# üî• –î–µ–Ω—å 12. –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ + MCP

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º MCP (Model Context Protocol).

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç —É—Ä–æ–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä–∞—è:
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –≤–µ–±-—á–∞—Ç–∞ (–∏—Å—Ç–æ—Ä–∏—è –∏–∑ lesson-09)
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ Telegram –≥—Ä—É–ø–ø—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç summary —á–µ—Ä–µ–∑ LLM
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç summary –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ Telegram

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ (–∫–∞–∂–¥—ã–µ N –º–∏–Ω—É—Ç)
    ‚Üì
–í—ã–∑—ã–≤–∞–µ—Ç LLM: "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –¥–∞–Ω–Ω—ã–µ –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ X –∑–∞ –ø–µ—Ä–∏–æ–¥ Y-Z"
    ‚Üì
LLM —Ä–µ—à–∞–µ—Ç: –Ω—É–∂–Ω—ã –¥–∞–Ω–Ω—ã–µ –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
    ‚Üì
LLM –≤—ã–∑—ã–≤–∞–µ—Ç MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç: get_chat_history() –∏–ª–∏ get_telegram_messages()
    ‚Üì
MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —á–∏—Ç–∞–µ—Ç –∏–∑ –ë–î:
  - –í–µ–±-—á–∞—Ç ‚Üí memory.db (lesson-09)
  - Telegram ‚Üí summary.db (telegram_messages —Ç–∞–±–ª–∏—Ü–∞)
    ‚Üì
MCP –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ LLM
    ‚Üì
LLM –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç summary
    ‚Üì
–°–æ—Ö—Ä–∞–Ω—è–µ–º summary –≤ –ë–î (summaries —Ç–∞–±–ª–∏—Ü–∞)
    ‚Üì
–û—Ç–ø—Ä–∞–≤–ª—è–µ–º summary –ª–∏—á–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤ Telegram –æ—Ç –±–æ—Ç–∞
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
lesson-12-reminder-mcp/
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ THEORY.md
‚îú‚îÄ‚îÄ PROMPT.md
‚îú‚îÄ‚îÄ example.env
‚îú‚îÄ‚îÄ telegram_messages_example.txt
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ mcp-server.yaml
‚îÇ   ‚îî‚îÄ‚îÄ mcp-server.yaml.example
‚îú‚îÄ‚îÄ mcp-server/          # MCP —Å–µ—Ä–≤–µ—Ä —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ src/main/kotlin/com/prike/mcpserver/...
‚îú‚îÄ‚îÄ server/              # –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (MCP –∫–ª–∏–µ–Ω—Ç, LLM –∞–≥–µ–Ω—Ç, –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫)
‚îî‚îÄ‚îÄ client/              # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    ‚îú‚îÄ‚îÄ index.html
    ‚îú‚îÄ‚îÄ style.css
    ‚îî‚îÄ‚îÄ app.js
```

## üöÄ –ö–æ–º–º–∏—Ç 1: MCP Server - –≤–µ–±-—á–∞—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç

### –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

1. **MCP Server** (`mcp-server/`)
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ —Å Gradle
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º Kotlin SDK –¥–ª—è MCP
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ YAML

2. **ChatHistoryRepository**
   - –ß—Ç–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –∏–∑ `memory.db` (lesson-09)
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–º—É –¥–∏–∞–ø–∞–∑–æ–Ω—É
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–¥—Ö–æ–¥ –∏–∑ `SqliteMemoryRepository`

3. **ChatHistoryTool**
   - MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `get_chat_history(startTime, endTime)`
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –∏—Å—Ç–æ—Ä–∏–µ–π —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ –ø–µ—Ä–∏–æ–¥
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

4. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
   - `config/mcp-server.yaml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞
   - –ü—É—Ç—å –∫ –ë–î –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥

### –ó–∞–ø—É—Å–∫ MCP —Å–µ—Ä–≤–µ—Ä–∞:

```bash
cd mcp-server
./gradlew run
```

–ò–ª–∏ —Å–æ–±–µ—Ä–∏—Ç–µ JAR:

```bash
./gradlew jar
java -jar build/libs/summary-mcp-server-1.0.0.jar
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

MCP —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ stdio —Ä–µ–∂–∏–º–µ. –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MCP –∫–ª–∏–µ–Ω—Ç –∏–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å –æ—Å–Ω–æ–≤–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º (–±—É–¥–µ—Ç –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –∫–æ–º–º–∏—Ç–∞—Ö).

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:

- Java 17+
- Gradle 8.14+
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `memory.db` –∏–∑ lesson-09 –¥–æ–ª–∂–Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ –ø—É—Ç–∏, —É–∫–∞–∑–∞–Ω–Ω–æ–º—É –≤ –∫–æ–Ω—Ñ–∏–≥–µ

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

- –ö–æ–º–º–∏—Ç 2: MCP Server - Telegram –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç + Telegram Bot
- –ö–æ–º–º–∏—Ç 3: –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ - MCP –∫–ª–∏–µ–Ω—Ç
- –ö–æ–º–º–∏—Ç 4: LLM –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- –ö–æ–º–º–∏—Ç 5: –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
- –ö–æ–º–º–∏—Ç 6: UI

