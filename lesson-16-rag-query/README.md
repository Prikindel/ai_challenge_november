# üî• –î–µ–Ω—å 16. –ü–µ—Ä–≤—ã–π RAG-–∑–∞–ø—Ä–æ—Å

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ RAG (Retrieval-Augmented Generation) –∫ LLM —á–µ—Ä–µ–∑ OpenRouter –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ —Å RAG –∏ –±–µ–∑ RAG. –£—Ä–æ–∫ –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ –∫–æ–¥–µ –∏–∑ —É—Ä–æ–∫–∞ 15 —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ RAG.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç —É—Ä–æ–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ RAG –∫ LLM –Ω–∞ –æ—Å–Ω–æ–≤–µ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –∏–∑ —É—Ä–æ–∫–∞ 15:
- **–ü–æ–ª–Ω—ã–π –∫–æ–¥ –∏–∑ —É—Ä–æ–∫–∞ 15** ‚Äî –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –ø–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
- **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ OpenRouter** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç LLM
- **RAG-–∑–∞–ø—Ä–æ—Å—ã** ‚Äî –ø–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏—Ö –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤** —Å RAG (—Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º) –∏ –±–µ–∑ RAG (–æ–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º)
- **UI –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è** ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Ä–∞–≤–Ω–∏—Ç—å –¥–≤–∞ –ø–æ–¥—Ö–æ–¥–∞ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

## üéØ –ü–∞–π–ø–ª–∞–π–Ω RAG-–∑–∞–ø—Ä–æ—Å–∞

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å
   ‚Üì
2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–∞ –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ (—á–µ—Ä–µ–∑ Ollama)
   ‚Üì
3. –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π (–∫–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ)
   ‚Üì
4. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —á–∞–Ω–∫–æ–≤ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π (–ø–æ–ª–µ content)
   ‚Üì
5. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏–∑ —á–∞–Ω–∫–æ–≤
   ‚Üì
6. –ó–∞–ø—Ä–æ—Å –∫ LLM —á–µ—Ä–µ–∑ OpenRouter —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (RAG-—Ä–µ–∂–∏–º)
   ‚Üì
7. –ó–∞–ø—Ä–æ—Å –∫ LLM —á–µ—Ä–µ–∑ OpenRouter –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–æ–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º)
   ‚Üì
8. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –≤—ã–≤–æ–¥—ã
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
–í–æ–ø—Ä–æ—Å ‚Üí KnowledgeBaseSearchService ‚Üí –ü–æ–∏—Å–∫ —á–∞–Ω–∫–æ–≤ (–∏–∑ —É—Ä–æ–∫–∞ 15)
                                    ‚Üì
                    –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∏–∑ –ë–î (–ø–æ–ª–µ content)
                                    ‚Üì
                    PromptBuilder ‚Üí –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞
                                    ‚Üì
                    RAGService ‚Üí –ó–∞–ø—Ä–æ—Å –∫ OpenRouter (RAG)
                                    ‚Üì
                    ComparisonService ‚Üí –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –æ–±—ã—á–Ω—ã–º —Ä–µ–∂–∏–º–æ–º
                                    ‚Üì
                    –ê–Ω–∞–ª–∏–∑ –∏ –≤—ã–≤–æ–¥—ã
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
lesson-16-rag-query/
‚îú‚îÄ‚îÄ README.md              # –û–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–∞
‚îú‚îÄ‚îÄ PROMPT.md              # –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ
‚îú‚îÄ‚îÄ THEORY.md              # –¢–µ–æ—Ä–∏—è –ø–æ RAG
‚îú‚îÄ‚îÄ CHAT_PROMPT.txt        # –ö—Ä–∞—Ç–∫–∏–π –ø—Ä–æ–º–ø—Ç –¥–ª—è AI –∞–≥–µ–Ω—Ç–∞
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ server.yaml        # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (Ollama, –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π, RAG)
‚îú‚îÄ‚îÄ server/                # –°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å (Kotlin + Ktor)
‚îÇ   ‚îî‚îÄ‚îÄ src/main/kotlin/com/prike/
‚îÇ       ‚îú‚îÄ‚îÄ data/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ repository/
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ KnowledgeBaseRepository.kt
‚îÇ       ‚îú‚îÄ‚îÄ domain/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ service/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ KnowledgeBaseService.kt
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RAGService.kt
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PromptBuilder.kt
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ComparisonService.kt
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ResponseAnalyzer.kt
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ model/
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ RAGRequest.kt
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ RAGResponse.kt
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ ComparisonResult.kt
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ RetrievedChunk.kt
‚îÇ       ‚îî‚îÄ‚îÄ presentation/
‚îÇ           ‚îú‚îÄ‚îÄ controller/
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ RAGController.kt
‚îÇ           ‚îî‚îÄ‚îÄ dto/
‚îÇ               ‚îú‚îÄ‚îÄ RAGQueryRequestDto.kt
‚îÇ               ‚îú‚îÄ‚îÄ RAGQueryResponseDto.kt
‚îÇ               ‚îî‚îÄ‚îÄ ComparisonResponseDto.kt
‚îî‚îÄ‚îÄ client/                # –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å (Vanilla JS)
    ‚îú‚îÄ‚îÄ index.html
    ‚îú‚îÄ‚îÄ rag.html           # –°—Ç—Ä–∞–Ω–∏—Ü–∞ RAG-–∑–∞–ø—Ä–æ—Å–æ–≤
    ‚îú‚îÄ‚îÄ compare.html       # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ style.css
    ‚îî‚îÄ‚îÄ app.js
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

1. **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –∏–∑ —É—Ä–æ–∫–∞ 15:**
   - –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
   - SQLite –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ `documents` –∏ `document_chunks`
   - –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –≤ –ø–∞–ø–∫–µ `documents/`

2. **Ollama:**
   - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –∏ –∑–∞–ø—É—â–µ–Ω–∞: https://ollama.ai/
   - –ó–∞–≥—Ä—É–∂–µ–Ω–∞ –º–æ–¥–µ–ª—å –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤: `ollama pull nomic-embed-text`
   - –ü—Ä–æ–≤–µ—Ä–∫–∞: `curl http://localhost:11434/api/tags`

3. **OpenRouter:**
   - API –∫–ª—é—á –æ—Ç OpenRouter: https://openrouter.ai/
   - –î–æ–±–∞–≤–∏—Ç—å –≤ `.env` (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞): `OPENAI_API_KEY=your_key`
   - –ú–æ–¥–µ–ª—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `config/server.yaml` (–ø–∞—Ä–∞–º–µ—Ç—Ä `ai.model`)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** (–µ—Å–ª–∏ –µ—â—ë –Ω–µ —Å–¥–µ–ª–∞–Ω–æ):
```bash
git clone <repository-url>
cd ai_challenge_november/lesson-16-rag-query
```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:**
```bash
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ config/server.yaml:
# - ollama.baseUrl
# - ollama.model (–¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤)
# - knowledgeBase.databasePath
# - ai.provider (openrouter)
# - ai.model (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤)

# –°–æ–∑–¥–∞–π—Ç–µ .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:
# OPENAI_API_KEY=your_openrouter_api_key
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
```bash
cd server
./gradlew run
```

4. **–û—Ç–∫—Ä–æ–π—Ç–µ –∫–ª–∏–µ–Ω—Ç:**
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
open client/index.html
# –∏–ª–∏
http://localhost:8080
```

## üì° API Endpoints

### –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è (–∏–∑ —É—Ä–æ–∫–∞ 15)

- `POST /api/indexing/index` ‚Äî –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç/—Ñ–∞–π–ª
- `GET /api/indexing/documents` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- `POST /api/search/query` ‚Äî –ø–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π

### RAG-–∑–∞–ø—Ä–æ—Å—ã

### 1. RAG-–∑–∞–ø—Ä–æ—Å (—Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º)

**POST** `/api/rag/query`

**Request:**
```json
{
  "question": "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?",
  "topK": 3,
  "minSimilarity": 0.5
}
```

**Response:**
```json
{
  "question": "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?",
  "answer": "–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è MCP —Å–µ—Ä–≤–µ—Ä–∞ –Ω—É–∂–Ω–æ...",
  "contextChunks": [
    {
      "chunkId": "...",
      "documentPath": "documents/01-mcp-server-creation.md",
      "content": "...",
      "similarity": 0.89
    }
  ],
  "mode": "RAG",
  "tokensUsed": 150
}
```

### 2. –û–±—ã—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å (–±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)

**POST** `/api/rag/standard`

**Request:**
```json
{
  "question": "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?"
}
```

**Response:**
```json
{
  "question": "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?",
  "answer": "MCP —Å–µ—Ä–≤–µ—Ä –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å...",
  "contextChunks": [],
  "mode": "STANDARD",
  "tokensUsed": 120
}
```

### 3. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–±–æ–∏—Ö —Ä–µ–∂–∏–º–æ–≤

**POST** `/api/rag/compare`

**Request:**
```json
{
  "question": "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?",
  "topK": 3,
  "minSimilarity": 0.5
}
```

**Response:**
```json
{
  "question": "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?",
  "ragResponse": { ... },
  "standardResponse": { ... },
  "analysis": {
    "ragAdvantages": [
      "–ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏",
      "–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞"
    ],
    "ragDisadvantages": [],
    "accuracyComparison": "RAG –æ—Ç–≤–µ—Ç –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π",
    "completenessComparison": "RAG –æ—Ç–≤–µ—Ç –±–æ–ª–µ–µ –ø–æ–ª–Ω—ã–π",
    "relevanceScore": 0.92
  },
  "insights": [
    {
      "type": "RAG_HELPED",
      "description": "RAG –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏",
      "evidence": "–û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ—á–Ω—ã–µ —à–∞–≥–∏ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞..."
    }
  ]
}
```

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `config/server.yaml`:

```yaml
server:
  port: 8080

ollama:
  baseUrl: "http://localhost:11434"
  model: "nomic-embed-text"  # –º–æ–¥–µ–ª—å –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
  timeout: 30000

knowledgeBase:
  databasePath: "data/knowledge_base.db"  # –ø—É—Ç—å –∫ –ë–î –∏–∑ —É—Ä–æ–∫–∞ 15

indexing:
  chunkSize: 800
  overlapSize: 100
  documentsPath: "documents"

ai:
  provider: "openrouter"
  apiKey: "${OPENAI_API_KEY}"  # –±–µ—Ä—ë—Ç—Å—è –∏–∑ .env
  model: "gpt-4o-mini"  # –º–æ–¥–µ–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
  temperature: 0.7
  maxTokens: 2000

rag:
  topK: 3  # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
  minSimilarity: 0.5  # –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ
  maxContextLength: 2000  # –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–≤ —Ç–æ–∫–µ–Ω–∞—Ö)
  
prompt:
  systemMessage: "–¢—ã ‚Äî –ø–æ–º–æ—â–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π."
  contextFormat: "[–ß–∞–Ω–∫ {index}] (–¥–æ–∫—É–º–µ–Ω—Ç: {document}, —Å—Ö–æ–¥—Å—Ç–≤–æ: {similarity})\n{content}\n"
```

**–í `.env` (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞):**
```
OPENAI_API_KEY=your_openrouter_api_key
```

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (–∏–∑ —É—Ä–æ–∫–∞ 15)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –±–∞–∑—É –∑–Ω–∞–Ω–∏–π:
- –ó–∞–≥—Ä—É–∑–∏—Ç–µ Markdown —Ñ–∞–π–ª—ã
- –î–æ–∫—É–º–µ–Ω—Ç—ã –±—É–¥—É—Ç —Ä–∞–∑–±–∏—Ç—ã –Ω–∞ —á–∞–Ω–∫–∏
- –°–≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ —á–µ—Ä–µ–∑ Ollama
- –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –≤ SQLite

### –ü–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π (–∏–∑ —É—Ä–æ–∫–∞ 15)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ–∏—Å–∫–∞ –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞:
- –í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å
- –°–∏—Å—Ç–µ–º–∞ –Ω–∞–π–¥—ë—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞–Ω–∫–∏
- –ü–æ–∫–∞–∂–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –æ—Ü–µ–Ω–∫–æ–π —Å—Ö–æ–¥—Å—Ç–≤–∞

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ RAG –∏ –æ–±—ã—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞

**–í–æ–ø—Ä–æ—Å:** "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?"

**RAG-–æ—Ç–≤–µ—Ç:**
```
–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è MCP —Å–µ—Ä–≤–µ—Ä–∞ –Ω—É–∂–Ω–æ:
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SDK
2. –°–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å Server
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
...
(–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏)
```

**–û–±—ã—á–Ω—ã–π –æ—Ç–≤–µ—Ç:**
```
MCP —Å–µ—Ä–≤–µ—Ä –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å, –∏—Å–ø–æ–ª—å–∑—É—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π SDK...
(–æ–±—â–∏–µ –∑–Ω–∞–Ω–∏—è LLM)
```

**–í—ã–≤–æ–¥:** RAG –ø–æ–º–æ–≥ ‚Äî –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

### –ü—Ä–∏–º–µ—Ä 2: –û–±—â–∏–π –≤–æ–ø—Ä–æ—Å

**–í–æ–ø—Ä–æ—Å:** "–ß—Ç–æ —Ç–∞–∫–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ?"

**RAG-–æ—Ç–≤–µ—Ç:**
```
–í –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏.
(LLM –º–æ–∂–µ—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–±—â–∏—Ö –∑–Ω–∞–Ω–∏–π)
```

**–û–±—ã—á–Ω—ã–π –æ—Ç–≤–µ—Ç:**
```
–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º...
(–æ–±—â–∏–µ –∑–Ω–∞–Ω–∏—è LLM)
```

**–í—ã–≤–æ–¥:** RAG –Ω–µ –ø–æ–º–æ–≥ ‚Äî –≤–æ–ø—Ä–æ—Å –≤–Ω–µ –æ–±–ª–∞—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

## üìä –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –ì–¥–µ RAG –ø–æ–º–æ–≥–∞–µ—Ç:

1. **–í–æ–ø—Ä–æ—Å—ã –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:**
   - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
   - –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã
   - –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

2. **–°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∑–Ω–∞–Ω–∏—è:**
   - –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
   - –ü—Ä–æ–µ–∫—Ç–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
   - –ö–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã

### –ì–¥–µ RAG –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç:

1. **–í–æ–ø—Ä–æ—Å—ã –≤–Ω–µ –æ–±–ª–∞—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:**
   - –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã
   - –í–æ–ø—Ä–æ—Å—ã –Ω–µ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π

2. **–£—Å—Ç–∞—Ä–µ–≤—à–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:**
   - –î–æ–∫—É–º–µ–Ω—Ç—ã –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã
   - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —É—Å—Ç–∞—Ä–µ–ª–∞

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–µ –≤–æ–ø—Ä–æ—Å—ã:

1. **–í–æ–ø—Ä–æ—Å—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ RAG –¥–æ–ª–∂–µ–Ω –ø–æ–º–æ—á—å:**
   - "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?"
   - "–ö–∞–∫ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ —á–µ—Ä–µ–∑ Ollama?"
   - "–ß—Ç–æ —Ç–∞–∫–æ–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ —á–∞–Ω–∫–æ–≤?"
   - "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ?"

2. **–í–æ–ø—Ä–æ—Å—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ RAG –º–æ–∂–µ—Ç –Ω–µ –ø–æ–º–æ—á—å:**
   - "–ö–∞–∫ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å –±–æ—Ä—â?" (–Ω–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö)
   - "–ß—Ç–æ —Ç–∞–∫–æ–µ –∫–≤–∞–Ω—Ç–æ–≤–∞—è —Ñ–∏–∑–∏–∫–∞?" (–Ω–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö)
   - –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ LLM –º–æ–∂–µ—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –∑–Ω–∞–Ω–∏–π:**
   - –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∞ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏)
   - –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ —á–∞–Ω–∫–∏ —Å —Ç–µ–∫—Å—Ç–æ–º (–ø–æ–ª–µ `content`)

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ Ollama:**
   - –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω–∞
   - –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –º–æ–¥–µ–ª—å `nomic-embed-text`

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ OpenRouter:**
   - –î–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω `OPENAI_API_KEY` –≤ `.env`
   - –ú–æ–¥–µ–ª—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –≤ `config/server.yaml` (–ø–∞—Ä–∞–º–µ—Ç—Ä `ai.model`)

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **PROMPT.md** ‚Äî –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ
- **THEORY.md** ‚Äî —Ç–µ–æ—Ä–∏—è –ø–æ RAG, –ø–æ–∏—Å–∫—É, –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- **CHAT_PROMPT.txt** ‚Äî –∫—Ä–∞—Ç–∫–∏–π –ø—Ä–æ–º–ø—Ç –¥–ª—è AI –∞–≥–µ–Ω—Ç–∞

## üéì –¶–µ–ª–∏ —É—Ä–æ–∫–∞

- –ü–æ–¥–∫–ª—é—á–∏—Ç—å RAG –∫ LLM —á–µ—Ä–µ–∑ OpenRouter
- –ü–æ–Ω—è—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å RAG –∏ –±–µ–∑ RAG
- –°—Ä–∞–≤–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—ã —Å RAG –∏ –±–µ–∑ RAG
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –≤ –∞–≥–µ–Ω—Ç–∞

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —É—Ä–æ–∫–∏

- [lesson-15-document-indexing](../lesson-15-document-indexing/) ‚Äî –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏ (–±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π)

## üìñ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [RAG: Retrieval-Augmented Generation (Paper)](https://arxiv.org/abs/2005.11401)
- [OpenRouter API Documentation](https://openrouter.ai/docs)
- [LangChain RAG Tutorial](https://python.langchain.com/docs/use_cases/question_answering/)
- [Ollama API Documentation](https://ollama.ai/docs/api)

