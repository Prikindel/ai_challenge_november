# –ü—Ä–æ–º–ø—Ç –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: üî• –î–µ–Ω—å 16. –ü–µ—Ä–≤—ã–π RAG-–∑–∞–ø—Ä–æ—Å

–¢—ã ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, —Å–æ–∑–¥–∞—é—â–∏–π —É—Ä–æ–∫ ¬´üî• –î–µ–Ω—å 16. –ü–µ—Ä–≤—ã–π RAG-–∑–∞–ø—Ä–æ—Å¬ª –≤ –º–æ–¥—É–ª–µ `lesson-16-rag-query`. –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–µ–∫ **Kotlin + Ktor + Clean Architecture + SQLite** —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –Ω–∞ **vanilla JS**. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –±–µ–∑ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –¥—Ä—É–≥–∏—Ö —É—Ä–æ–∫–æ–≤ –≤ –∫–æ–¥–µ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏. –ò—Å–ø–æ–ª—å–∑—É–π **–±–∞–∑—É –∑–Ω–∞–Ω–∏–π –∏–∑ —É—Ä–æ–∫–∞ 15** (–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã —Å —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏) –∏ **Ollama API** –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ LLM.

## üéØ –¶–µ–ª—å —É—Ä–æ–∫–∞

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å RAG (Retrieval-Augmented Generation) —Å–∏—Å—Ç–µ–º—É: –≤–æ–ø—Ä–æ—Å ‚Üí –ø–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤ ‚Üí –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Å –≤–æ–ø—Ä–æ—Å–æ–º ‚Üí –∑–∞–ø—Ä–æ—Å –∫ LLM. –°—Ä–∞–≤–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—ã –º–æ–¥–µ–ª–∏ —Å RAG –∏ –±–µ–∑ RAG, —Å–¥–µ–ª–∞—Ç—å –≤—ã–≤–æ–¥—ã –æ —Ç–æ–º, –≥–¥–µ RAG –ø–æ–º–æ–≥–∞–µ—Ç, –∞ –≥–¥–µ ‚Äî –Ω–µ—Ç.

### –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è:

**RAG = –ü–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π + –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ LLM** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏—Ö –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç LLM –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.

### –ü–∞–π–ø–ª–∞–π–Ω RAG-–∑–∞–ø—Ä–æ—Å–∞:

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å
   ‚Üì
2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–∞ –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞
   ‚Üì
3. –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π (–∫–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ)
   ‚Üì
4. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —á–∞–Ω–∫–æ–≤ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π (–ø–æ–ª–µ content)
   ‚Üì
5. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏–∑ —á–∞–Ω–∫–æ–≤
   ‚Üì
6. –ó–∞–ø—Ä–æ—Å –∫ LLM —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (RAG-—Ä–µ–∂–∏–º)
   ‚Üì
7. –ó–∞–ø—Ä–æ—Å –∫ LLM –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–æ–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º)
   ‚Üì
8. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –≤—ã–≤–æ–¥—ã
```

### –ü—Ä–∏–º–µ—Ä–Ω—ã–π flow –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?"

1. –°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —ç–º–±–µ–¥–¥–∏–Ω–≥ –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞
2. –ò—â–µ—Ç —Ç–æ–ø-3 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–∞ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
3. –ü–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—Å—Ç —á–∞–Ω–∫–æ–≤ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π (–ø–æ–ª–µ content)
4. –§–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç:
   "–ö–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π:
   [–ß–∞–Ω–∫ 1: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ–∑–¥–∞–Ω–∏–∏ MCP —Å–µ—Ä–≤–µ—Ä–∞]
   [–ß–∞–Ω–∫ 2: –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞]
   [–ß–∞–Ω–∫ 3: –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏]
   
   –í–æ–ø—Ä–æ—Å: –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?
   
   –û—Ç–≤–µ—Ç—å –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞."
5. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ LLM (Ollama) —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º ‚Üí RAG-–æ—Ç–≤–µ—Ç
6. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ LLM –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ‚Üí –æ–±—ã—á–Ω—ã–π –æ—Ç–≤–µ—Ç
7. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–±–∞ –æ—Ç–≤–µ—Ç–∞ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ
```

---

## üìã –ü–æ—ç—Ç–∞–ø–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã)

**–í–ê–ñ–ù–û:** –†–µ–∞–ª–∏–∑—É–π –ø–æ—à–∞–≥–æ–≤–æ, –∫–∞–∂–¥—ã–π —à–∞–≥ ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π git –∫–æ–º–º–∏—Ç. –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ –ø–æ–∫–∞–∂–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –æ–Ω –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç –∏ —Å–∫–∞–∂–µ—Ç "–ø—Ä–∏—Å—Ç—É–ø–∞–π –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É".

### –ö–æ–º–º–∏—Ç 1: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π –∏–∑ —É—Ä–æ–∫–∞ 15:

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. `KnowledgeBaseService` ‚Äî —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
   - –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤ –ø–æ –∑–∞–ø—Ä–æ—Å—É
   - –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —á–∞–Ω–∫–æ–≤ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π (–ø–æ–ª–µ `content`)
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –∏–∑ —É—Ä–æ–∫–∞ 15

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
server/
‚îú‚îÄ‚îÄ src/main/kotlin/com/prike/
‚îÇ   ‚îú‚îÄ‚îÄ data/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ repository/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ KnowledgeBaseRepository.kt  # —Ä–∞–±–æ—Ç–∞ —Å –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ KnowledgeBaseService.kt
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ model/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ SearchResult.kt
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ RetrievedChunk.kt
```

**–ú–æ–¥–µ–ª—å RetrievedChunk:**
```kotlin
data class RetrievedChunk(
    val chunkId: String,
    val documentId: String,
    val documentPath: String,
    val chunkIndex: Int,
    val content: String,  // —Ç–µ–∫—Å—Ç —á–∞–Ω–∫–∞ –∏–∑ –ë–î (–ø–æ–ª–µ content)
    val startIndex: Int,
    val endIndex: Int,
    val similarity: Float  // –∫–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ
)
```

**–ú–æ–¥–µ–ª—å SearchResult:**
```kotlin
data class SearchResult(
    val query: String,
    val chunks: List<RetrievedChunk>,
    val totalFound: Int
)
```

**–í–∞–∂–Ω–æ:**
- –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∏–∑ —É—Ä–æ–∫–∞ 15 (SQLite —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ `documents` –∏ `document_chunks`)
- –í –ë–î —Ö—Ä–∞–Ω–∏—Ç—Å—è –ø–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç —á–∞–Ω–∫–æ–≤ –≤ –ø–æ–ª–µ `content` —Ç–∞–±–ª–∏—Ü—ã `document_chunks`
- –¢–µ–∫—Å—Ç —á–∞–Ω–∫–æ–≤ –±–µ—Ä—ë—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –ë–î, –Ω–µ –Ω—É–∂–Ω–æ –∏–∑–≤–ª–µ–∫–∞—Ç—å –∏–∑ —Ñ–∞–π–ª–æ–≤
- –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É –±–µ—Ä—ë—Ç—Å—è –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `documents.file_path` (–¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞)

### –ö–æ–º–º–∏—Ç 2: RAG-—Å–µ—Ä–≤–∏—Å

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è RAG-–ø—Ä–æ–º–ø—Ç–æ–≤ –∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM:

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. `RAGService` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–∏—Å –¥–ª—è RAG-–∑–∞–ø—Ä–æ—Å–æ–≤
   - –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
   - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
   - –ó–∞–ø—Ä–æ—Å –∫ LLM —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (RAG-—Ä–µ–∂–∏–º)
   - –ó–∞–ø—Ä–æ—Å –∫ LLM –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–æ–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º)

2. `PromptBuilder` ‚Äî –ø–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å –ø—Ä–æ–º–ø—Ç–æ–≤
   - –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏–∑ —á–∞–Ω–∫–æ–≤
   - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–Ω—É–º–µ—Ä–∞—Ü–∏—è, –∏—Å—Ç–æ—á–Ω–∏–∫–∏)
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –¥–ª—è LLM

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
server/
‚îú‚îÄ‚îÄ src/main/kotlin/com/prike/
‚îÇ   ‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ RAGService.kt
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PromptBuilder.kt
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ model/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ RAGRequest.kt
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ RAGResponse.kt
```

**–ú–æ–¥–µ–ª—å RAGRequest:**
```kotlin
data class RAGRequest(
    val question: String,
    val topK: Int = 3,  // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
    val minSimilarity: Float = 0.5f,  // –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ
    val includeContext: Boolean = true  // –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å RAG –∏–ª–∏ –Ω–µ—Ç
)
```

**–ú–æ–¥–µ–ª—å RAGResponse:**
```kotlin
data class RAGResponse(
    val question: String,
    val answer: String,
    val contextChunks: List<RetrievedChunk>,  // –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —á–∞–Ω–∫–∏
    val mode: ResponseMode,  // RAG –∏–ª–∏ STANDARD
    val tokensUsed: Int? = null
)

enum class ResponseMode {
    RAG,      // —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
    STANDARD  // –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
}
```

**–ü—Ä–∏–º–µ—Ä –ø—Ä–æ–º–ø—Ç–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º:**
```
–¢—ã ‚Äî –ø–æ–º–æ—â–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π.

–ö–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π:

[–ß–∞–Ω–∫ 1] (–¥–æ–∫—É–º–µ–Ω—Ç: documents/01-mcp-server-creation.md, —Å—Ö–æ–¥—Å—Ç–≤–æ: 0.89)
–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä? –°–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SDK...

[–ß–∞–Ω–∫ 2] (–¥–æ–∫—É–º–µ–Ω—Ç: documents/01-mcp-server-creation.md, —Å—Ö–æ–¥—Å—Ç–≤–æ: 0.76)
...—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å SDK. –ó–∞—Ç–µ–º —Å–æ–∑–¥–∞—Ç—å –∫–ª–∞—Å—Å Server...

[–ß–∞–Ω–∫ 3] (–¥–æ–∫—É–º–µ–Ω—Ç: documents/02-embeddings-and-vector-search.md, —Å—Ö–æ–¥—Å—Ç–≤–æ: 0.65)
–î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Ollama...

–í–æ–ø—Ä–æ—Å: –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
- –û—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –ï—Å–ª–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –æ—Ç–≤–µ—Ç–∞, —Å–∫–∞–∂–∏ –æ–± —ç—Ç–æ–º
- –ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –ï—Å–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤–∞, —É–∫–∞–∂–∏ –Ω–∞ —ç—Ç–æ

–û—Ç–≤–µ—Ç:
```

**–í–∞–∂–Ω–æ:**
- –ò—Å–ø–æ–ª—å–∑—É–π Ollama API –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM (–º–æ–¥–µ–ª—å –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
- –î–ª—è RAG-—Ä–µ–∂–∏–º–∞ –¥–æ–±–∞–≤–ª—è–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ –ø—Ä–æ–º–ø—Ç
- –î–ª—è –æ–±—ã—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–π —Ç–æ–ª—å–∫–æ –≤–æ–ø—Ä–æ—Å
- –°–æ—Ö—Ä–∞–Ω—è–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —á–∞–Ω–∫–∏ –≤ –æ—Ç–≤–µ—Ç–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### –ö–æ–º–º–∏—Ç 3: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–µ—Ä–≤–∏—Å –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤ —Å RAG –∏ –±–µ–∑ RAG:

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. `ComparisonService` ‚Äî —Å–µ—Ä–≤–∏—Å –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–±–æ–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤ (RAG –∏ STANDARD)
   - –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–ª–∏—á–∏–π
   - –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ (—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å, —Ç–æ—á–Ω–æ—Å—Ç—å, –ø–æ–ª–Ω–æ—Ç–∞)

2. `ResponseAnalyzer` ‚Äî –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –æ—Ç–≤–µ—Ç–æ–≤
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤
   - –í—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤ RAG
   - –í—ã—è–≤–ª–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤ RAG

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
server/
‚îú‚îÄ‚îÄ src/main/kotlin/com/prike/
‚îÇ   ‚îú‚îÄ‚îÄ domain/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ service/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ComparisonService.kt
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ResponseAnalyzer.kt
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ model/
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ ComparisonResult.kt
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ AnalysisInsight.kt
```

**–ú–æ–¥–µ–ª—å ComparisonResult:**
```kotlin
data class ComparisonResult(
    val question: String,
    val ragResponse: RAGResponse,
    val standardResponse: RAGResponse,
    val analysis: ResponseAnalysis,
    val insights: List<AnalysisInsight>
)

data class ResponseAnalysis(
    val ragAdvantages: List<String>,  // –≥–¥–µ RAG –ø–æ–º–æ–≥
    val ragDisadvantages: List<String>,  // –≥–¥–µ RAG –Ω–µ –ø–æ–º–æ–≥
    val accuracyComparison: String,  // —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏
    val completenessComparison: String,  // —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Ç—ã
    val relevanceScore: Float  // –æ—Ü–µ–Ω–∫–∞ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (0-1)
)

data class AnalysisInsight(
    val type: InsightType,
    val description: String,
    val evidence: String  // –ø—Ä–∏–º–µ—Ä –∏–∑ –æ—Ç–≤–µ—Ç–∞
)

enum class InsightType {
    RAG_HELPED,      // RAG –ø–æ–º–æ–≥ (–±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π/–ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç)
    RAG_HURT,        // RAG –Ω–µ –ø–æ–º–æ–≥ (—É—Ö—É–¥—à–∏–ª –æ—Ç–≤–µ—Ç)
    RAG_IRRELEVANT,  // RAG –Ω–µ –ø–æ–≤–ª–∏—è–ª (–æ—Ç–≤–µ—Ç—ã –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ)
    CONTEXT_MISSING  // –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –Ω–µ –±—ã–ª–æ –Ω—É–∂–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
}
```

**–í–∞–∂–Ω–æ:**
- –°—Ä–∞–≤–Ω–∏–≤–∞–π –æ—Ç–≤–µ—Ç—ã –ø–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏, —Ç–æ—á–Ω–æ—Å—Ç–∏ –∏ –ø–æ–ª–Ω–æ—Ç–µ
- –í—ã—è–≤–ª—è–π —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ RAG –ø–æ–º–æ–≥ (–±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã, –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ—Ç–∞–ª–∏)
- –í—ã—è–≤–ª—è–π —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ RAG –Ω–µ –ø–æ–º–æ–≥ (—É—Å—Ç–∞—Ä–µ–≤—à–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç)
- –°–æ—Ö—Ä–∞–Ω—è–π –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

### –ö–æ–º–º–∏—Ç 4: API –¥–ª—è RAG-–∑–∞–ø—Ä–æ—Å–æ–≤

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å HTTP API –¥–ª—è RAG-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. `RAGController` ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –¥–ª—è RAG-–∑–∞–ø—Ä–æ—Å–æ–≤
   - `POST /api/rag/query` ‚Äî RAG-–∑–∞–ø—Ä–æ—Å (—Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º)
   - `POST /api/rag/standard` ‚Äî –æ–±—ã—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å (–±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
   - `POST /api/rag/compare` ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ–±–æ–∏—Ö —Ä–µ–∂–∏–º–æ–≤

2. DTO –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
server/
‚îú‚îÄ‚îÄ src/main/kotlin/com/prike/
‚îÇ   ‚îî‚îÄ‚îÄ presentation/
‚îÇ       ‚îú‚îÄ‚îÄ controller/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ RAGController.kt
‚îÇ       ‚îî‚îÄ‚îÄ dto/
‚îÇ           ‚îú‚îÄ‚îÄ RAGQueryRequestDto.kt
‚îÇ           ‚îú‚îÄ‚îÄ RAGQueryResponseDto.kt
‚îÇ           ‚îî‚îÄ‚îÄ ComparisonResponseDto.kt
```

**API Endpoints:**

1. **RAG-–∑–∞–ø—Ä–æ—Å:**
```kotlin
POST /api/rag/query
Body: {
    "question": "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?",
    "topK": 3,
    "minSimilarity": 0.5
}
Response: {
    "question": "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?",
    "answer": "–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è MCP —Å–µ—Ä–≤–µ—Ä–∞ –Ω—É–∂–Ω–æ...",
    "contextChunks": [
        {
            "chunkId": "...",
            "documentPath": "documents/01-mcp-server-creation.md",
            "content": "...",
            "similarity": 0.89
        }
    ],
    "mode": "RAG",
    "tokensUsed": 150
}
```

2. **–û–±—ã—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å:**
```kotlin
POST /api/rag/standard
Body: {
    "question": "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?"
}
Response: {
    "question": "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?",
    "answer": "MCP —Å–µ—Ä–≤–µ—Ä –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å...",
    "contextChunks": [],
    "mode": "STANDARD",
    "tokensUsed": 120
}
```

3. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ:**
```kotlin
POST /api/rag/compare
Body: {
    "question": "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?",
    "topK": 3,
    "minSimilarity": 0.5
}
Response: {
    "question": "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?",
    "ragResponse": { ... },
    "standardResponse": { ... },
    "analysis": {
        "ragAdvantages": [
            "–ë–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏",
            "–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞"
        ],
        "ragDisadvantages": [],
        "accuracyComparison": "RAG –æ—Ç–≤–µ—Ç –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π",
        "completenessComparison": "RAG –æ—Ç–≤–µ—Ç –±–æ–ª–µ–µ –ø–æ–ª–Ω—ã–π",
        "relevanceScore": 0.92
    },
    "insights": [
        {
            "type": "RAG_HELPED",
            "description": "RAG –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏–ª –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏",
            "evidence": "–û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ—á–Ω—ã–µ —à–∞–≥–∏ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞..."
        }
    ]
}
```

**–í–∞–∂–Ω–æ:**
- –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å JSON
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π –æ—à–∏–±–∫–∏ (–±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞, LLM –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
- –õ–æ–≥–∏—Ä—É–π –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### –ö–æ–º–º–∏—Ç 5: UI –¥–ª—è RAG-–∑–∞–ø—Ä–æ—Å–æ–≤

–°–æ–∑–¥–∞—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è RAG-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. –°—Ç—Ä–∞–Ω–∏—Ü–∞ RAG-–∑–∞–ø—Ä–æ—Å–∞:
   - –ü–æ–ª–µ –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞
   - –ö–Ω–æ–ø–∫–∞ "–° RAG" (–∑–∞–ø—Ä–æ—Å —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º)
   - –ö–Ω–æ–ø–∫–∞ "–ë–µ–∑ RAG" (–æ–±—ã—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å)
   - –ö–Ω–æ–ø–∫–∞ "–°—Ä–∞–≤–Ω–∏—Ç—å" (–æ–±–∞ —Ä–µ–∂–∏–º–∞)
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤ (–¥–ª—è RAG)

2. –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:
   - –î–≤–∞ –æ—Ç–≤–µ—Ç–∞ —Ä—è–¥–æ–º (RAG vs STANDARD)
   - –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–ª–∏—á–∏–π
   - –ò–Ω—Å–∞–π—Ç—ã (–≥–¥–µ RAG –ø–æ–º–æ–≥, –≥–¥–µ –Ω–µ—Ç)
   - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

3. –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤:
   - –°–ø–∏—Å–æ–∫ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
   - –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
client/
‚îú‚îÄ‚îÄ index.html
‚îú‚îÄ‚îÄ rag.html      # —Å—Ç—Ä–∞–Ω–∏—Ü–∞ RAG-–∑–∞–ø—Ä–æ—Å–æ–≤
‚îú‚îÄ‚îÄ compare.html  # —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
‚îú‚îÄ‚îÄ style.css
‚îî‚îÄ‚îÄ app.js
```

**UI —ç–ª–µ–º–µ–Ω—Ç—ã:**
- –ü–æ–ª–µ –≤–≤–æ–¥–∞ –≤–æ–ø—Ä–æ—Å–∞
- –ö–Ω–æ–ø–∫–∏ —Ä–µ–∂–∏–º–æ–≤ (RAG / STANDARD / –°—Ä–∞–≤–Ω–∏—Ç—å)
- –ë–ª–æ–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤ (—Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Ä–∞–∑–ª–∏—á–∏–π)
- –°–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤ (–¥–ª—è RAG)
- –ë–ª–æ–∫ –∞–Ω–∞–ª–∏–∑–∞ (–ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞/–Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ RAG)
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

**–í–∞–∂–Ω–æ:**
- –ü–æ–∫–∞–∑—ã–≤–∞–π –ø—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏
- –í—ã–¥–µ–ª—è–π —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É –æ—Ç–≤–µ—Ç–∞–º–∏
- –ü–æ–∫–∞–∑—ã–≤–∞–π –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–¥–ª—è RAG)
- –í–∏–∑—É–∞–ª–∏–∑–∏—Ä—É–π –∞–Ω–∞–ª–∏–∑ (–≥–¥–µ RAG –ø–æ–º–æ–≥, –≥–¥–µ –Ω–µ—Ç)

### –ö–æ–º–º–∏—Ç 6: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ `config/server.yaml`:
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Ollama (URL, –º–æ–¥–µ–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤)
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π (–ø—É—Ç—å –∫ –ë–î)
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ RAG (topK, minSimilarity)
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–º–ø—Ç–æ–≤

2. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
   - README.md —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —É—Ä–æ–∫–∞
   - THEORY.md —Å —Ç–µ–æ—Ä–∏–µ–π –ø–æ RAG
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
```yaml
ollama:
  baseUrl: "http://localhost:11434"
  chatModel: "llama3.2"  # –º–æ–¥–µ–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤
  embeddingModel: "nomic-embed-text"  # –º–æ–¥–µ–ª—å –¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞)
  timeout: 30000

knowledgeBase:
  databasePath: "data/knowledge_base.db"  # –ø—É—Ç—å –∫ –ë–î –∏–∑ —É—Ä–æ–∫–∞ 15
  # documentsPath –Ω–µ –Ω—É–∂–µ–Ω - —Ç–µ–∫—Å—Ç —á–∞–Ω–∫–æ–≤ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î

rag:
  topK: 3  # –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
  minSimilarity: 0.5  # –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ
  maxContextLength: 2000  # –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–≤ —Ç–æ–∫–µ–Ω–∞—Ö)
  
prompt:
  systemMessage: "–¢—ã ‚Äî –ø–æ–º–æ—â–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π."
  contextFormat: "[–ß–∞–Ω–∫ {index}] (–¥–æ–∫—É–º–µ–Ω—Ç: {document}, —Å—Ö–æ–¥—Å—Ç–≤–æ: {similarity})\n{content}\n"
```

**–í–∞–∂–Ω–æ:**
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ YAML (–Ω–µ –≤ `.env`)
- `.env` —Ñ–∞–π–ª –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π

**–í–∞–∂–Ω–æ:** –í —É—Ä–æ–∫–µ 15 —Ç–µ–∫—Å—Ç —á–∞–Ω–∫–æ–≤ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î –≤ –ø–æ–ª–µ `content` —Ç–∞–±–ª–∏—Ü—ã `document_chunks`. –≠—Ç–æ –Ω—É–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å –ø—Ä–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

1. **–ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —á–∞–Ω–∫–æ–≤:**
   - –¢–µ–∫—Å—Ç —á–∞–Ω–∫–æ–≤ –±–µ—Ä—ë—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –ë–î (–ø–æ–ª–µ `content`)
   - –ù–µ –Ω—É–∂–Ω–æ –∏–∑–≤–ª–µ–∫–∞—Ç—å —Ç–µ–∫—Å—Ç –∏–∑ —Ñ–∞–π–ª–æ–≤
   - –í—Å–µ –¥–∞–Ω–Ω—ã–µ —É–∂–µ –µ—Å—Ç—å –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π

2. **–ü–æ–∏—Å–∫ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π:**
   - –ò—Å–ø–æ–ª—å–∑—É–π —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ª–æ–≥–∏–∫—É –∏–∑ —É—Ä–æ–∫–∞ 15
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–π —ç–º–±–µ–¥–¥–∏–Ω–≥ –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞
   - –ò—â–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞–Ω–∫–∏ –ø–æ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–º—É —Å—Ö–æ–¥—Å—Ç–≤—É
   - –ü–æ–ª—É—á–∞–π —Ç–µ–∫—Å—Ç —á–∞–Ω–∫–æ–≤ –∏–∑ –ø–æ–ª—è `content` –≤ –ë–î

### –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è RAG:**
```
{systemMessage}

–ö–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π:

{contextChunks}

–í–æ–ø—Ä–æ—Å: {question}

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
- –û—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –ï—Å–ª–∏ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è –æ—Ç–≤–µ—Ç–∞, —Å–∫–∞–∂–∏ –æ–± —ç—Ç–æ–º
- –ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –ï—Å–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–≤–∞, —É–∫–∞–∂–∏ –Ω–∞ —ç—Ç–æ

–û—Ç–≤–µ—Ç:
```

**–§–æ—Ä–º–∞—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:**
```
[–ß–∞–Ω–∫ 1] (–¥–æ–∫—É–º–µ–Ω—Ç: documents/01-mcp-server-creation.md, —Å—Ö–æ–¥—Å—Ç–≤–æ: 0.89)
{content}

[–ß–∞–Ω–∫ 2] (–¥–æ–∫—É–º–µ–Ω—Ç: documents/01-mcp-server-creation.md, —Å—Ö–æ–¥—Å—Ç–≤–æ: 0.76)
{content}

[–ß–∞–Ω–∫ 3] (–¥–æ–∫—É–º–µ–Ω—Ç: documents/02-embeddings-and-vector-search.md, —Å—Ö–æ–¥—Å—Ç–≤–æ: 0.65)
{content}
```

### –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤

**–ö—Ä–∏—Ç–µ—Ä–∏–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:**
1. **–†–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å:** –û—Ç–≤–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤–æ–ø—Ä–æ—Å—É?
2. **–¢–æ—á–Ω–æ—Å—Ç—å:** –û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é?
3. **–ü–æ–ª–Ω–æ—Ç–∞:** –û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–µ—Ç–∞–ª–∏?
4. **–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ—Å—Ç—å:** –û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏ –¥–µ—Ç–∞–ª–∏?

**–ê–Ω–∞–ª–∏–∑:**
- RAG –ø–æ–º–æ–≥, –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π/–ø–æ–ª–Ω—ã–π/–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π
- RAG –Ω–µ –ø–æ–º–æ–≥, –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç —É—Ö—É–¥—à–∏–ª—Å—è –∏–ª–∏ —Å—Ç–∞–ª –º–µ–Ω–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–º
- RAG –Ω–µ –ø–æ–≤–ª–∏—è–ª, –µ—Å–ª–∏ –æ—Ç–≤–µ—Ç—ã –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

1. **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞:**
   - –ü–æ–∫–∞–∑—ã–≤–∞–π –ø–æ–Ω—è—Ç–Ω—É—é –æ—à–∏–±–∫—É
   - –ü—Ä–µ–¥–ª–∞–≥–∞–π –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Ç—å –∫ –ë–î

2. **LLM –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω:**
   - –ü–æ–∫–∞–∑—ã–≤–∞–π –ø–æ–Ω—è—Ç–Ω—É—é –æ—à–∏–±–∫—É
   - –ü—Ä–µ–¥–ª–∞–≥–∞–π –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Ollama

3. **–ß–∞–Ω–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ –ë–î:**
   - –õ–æ–≥–∏—Ä—É–π –æ—à–∏–±–∫—É
   - –ü—Ä–æ–ø—É—Å–∫–∞–π —á–∞–Ω–∫
   - –ü—Ä–æ–¥–æ–ª–∂–∞–π —Ä–∞–±–æ—Ç—É —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ —á–∞–Ω–∫–∞–º–∏

4. **–ù–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤:**
   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü—Ä–µ–¥–ª–∞–≥–∞–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º

---

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–í–æ–ø—Ä–æ—Å—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ RAG –¥–æ–ª–∂–µ–Ω –ø–æ–º–æ—á—å:**
   - "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?"
   - "–ö–∞–∫ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ —á–µ—Ä–µ–∑ Ollama?"
   - "–ß—Ç–æ —Ç–∞–∫–æ–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ —á–∞–Ω–∫–æ–≤?"
   - "–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ?"

2. **–í–æ–ø—Ä–æ—Å—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ RAG –º–æ–∂–µ—Ç –Ω–µ –ø–æ–º–æ—á—å:**
   - "–ö–∞–∫ –ø—Ä–∏–≥–æ—Ç–æ–≤–∏—Ç—å –±–æ—Ä—â?" (–Ω–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö)
   - "–ß—Ç–æ —Ç–∞–∫–æ–µ –∫–≤–∞–Ω—Ç–æ–≤–∞—è —Ñ–∏–∑–∏–∫–∞?" (–Ω–µ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö)
   - –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ LLM –º–æ–∂–µ—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

3. **–í–æ–ø—Ä–æ—Å—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:**
   - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (RAG –¥–æ–ª–∂–µ–Ω –¥–∞—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π –æ—Ç–≤–µ—Ç)
   - –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã (RAG –º–æ–∂–µ—Ç –Ω–µ –ø–æ–≤–ª–∏—è—Ç—å)

### –í—ã–≤–æ–¥—ã —É—Ä–æ–∫–∞:

1. **–ì–¥–µ RAG –ø–æ–º–æ–≥–∞–µ—Ç:**
   - –í–æ–ø—Ä–æ—Å—ã –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
   - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –∏ –ø—Ä–∏–º–µ—Ä—ã
   - –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

2. **–ì–¥–µ RAG –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç:**
   - –í–æ–ø—Ä–æ—Å—ã –≤–Ω–µ –æ–±–ª–∞—Å—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - –û–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ LLM –º–æ–∂–µ—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å —Å–∞–º
   - –£—Å—Ç–∞—Ä–µ–≤—à–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö

3. **–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å RAG:**
   - –ï—Å—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π
   - –ù—É–∂–Ω—ã —Ç–æ—á–Ω—ã–µ –¥–µ—Ç–∞–ª–∏ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
   - –í–∞–∂–Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

---

## üéì –¶–µ–ª–∏ —É—Ä–æ–∫–∞

- –ù–∞—É—á–∏—Ç—å—Å—è —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å RAG-–∑–∞–ø—Ä–æ—Å—ã
- –ü–æ–Ω—è—Ç—å, –∫–æ–≥–¥–∞ RAG –ø–æ–º–æ–≥–∞–µ—Ç, –∞ –∫–æ–≥–¥–∞ ‚Äî –Ω–µ—Ç
- –°—Ä–∞–≤–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—ã —Å RAG –∏ –±–µ–∑ RAG
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –≤ –∞–≥–µ–Ω—Ç–∞

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [RAG: Retrieval-Augmented Generation](https://arxiv.org/abs/2005.11401)
- [LangChain RAG Tutorial](https://python.langchain.com/docs/use_cases/question_answering/)
- [Ollama API Documentation](https://ollama.ai/docs/api)

