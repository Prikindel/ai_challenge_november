–¢—ã ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, —Å–æ–∑–¥–∞—é—â–∏–π —É—Ä–æ–∫ ¬´üî• –î–µ–Ω—å 16. –ü–µ—Ä–≤—ã–π RAG-–∑–∞–ø—Ä–æ—Å¬ª –≤ –º–æ–¥—É–ª–µ `lesson-16-rag-query`.

–ü–æ–ª–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `PROMPT.md`. –ü—Ä–æ—á–∏—Ç–∞–π –µ–≥–æ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã.

## –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏

–ü–æ–¥–∫–ª—é—á–∏—Ç—å RAG (Retrieval-Augmented Generation) –∫ LLM —á–µ—Ä–µ–∑ OpenRouter –∏ –ø–æ–Ω—è—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å RAG –∏ –±–µ–∑ RAG. –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—å —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —á–∞–Ω–∫–∏ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è LLM –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã —Å RAG –∏ –±–µ–∑ RAG.

**–ö–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–µ—Å—å –∫–æ–¥ –∏–∑ —É—Ä–æ–∫–∞ 15 –≤ —É—Ä–æ–∫ 16 (–ø–µ—Ä–≤—ã–π –∫–æ–º–º–∏—Ç)
2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å OpenRouter (–∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —É—Ä–æ–∫–∞—Ö) –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å
3. –û—Å—Ç–∞–≤–∏—Ç—å UI –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (–∫–∞–∫ –≤ —É—Ä–æ–∫–µ 15) ‚Äî –ù–ï –£–î–ê–õ–Ø–¢–¨
4. –î–æ–±–∞–≤–∏—Ç—å –≤ UI –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Ä–∞–≤–Ω–∏—Ç—å –¥–≤–∞ –ø–æ–¥—Ö–æ–¥–∞: —Å RAG –∏ –±–µ–∑ RAG
5. –ö–∞–∂–¥—ã–π –∫–æ–º–º–∏—Ç ‚Äî —ç—Ç–æ —Å—Ç–æ–ø, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –∫–æ–¥–æ–º –∏ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å —Å–∞–º
6. –¶–µ–ª—å —É—Ä–æ–∫–∞ ‚Äî –ø–æ–¥–∫–ª—é—á–∏—Ç—å RAG –∫ LLM –∏ –ø–æ–Ω—è—Ç—å —Ä–∞–∑–Ω–∏—Ü—É

## –ü–∞–π–ø–ª–∞–π–Ω RAG-–∑–∞–ø—Ä–æ—Å–∞

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–¥–∞—ë—Ç –≤–æ–ø—Ä–æ—Å
   ‚Üì
2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–±–µ–¥–¥–∏–Ω–≥–∞ –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞ (—á–µ—Ä–µ–∑ Ollama)
   ‚Üì
3. –ü–æ–∏—Å–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π (–∫–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ)
   ‚Üì
4. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —á–∞–Ω–∫–æ–≤ –∏–∑ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π (–ø–æ–ª–µ content)
   ‚Üì
5. –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏–∑ —á–∞–Ω–∫–æ–≤
   ‚Üì
6. –ó–∞–ø—Ä–æ—Å –∫ LLM —á–µ—Ä–µ–∑ OpenRouter —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º (RAG-—Ä–µ–∂–∏–º)
   ‚Üì
7. –ó–∞–ø—Ä–æ—Å –∫ LLM —á–µ—Ä–µ–∑ OpenRouter –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–æ–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º)
   ‚Üì
8. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –≤—ã–≤–æ–¥—ã
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–º–∏—Ç–æ–≤

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:** 
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–º–∏—Ç–∞ **–û–°–¢–ê–ù–ê–í–õ–ò–í–ê–ô–°–Ø** –∏ –ø–æ–∫–∞–∂–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ö–æ—á–µ—Ç –æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è —Å –∫–æ–¥–æ–º –∏ –∑–∞–∫–æ–º–º–∏—Ç–∏—Ç—å —Å–∞–º
- **–ù–ï –ü–†–û–î–û–õ–ñ–ê–ô** –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –∫–æ–º–º–∏—Ç—É –±–µ–∑ —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

1. **–ö–æ–º–º–∏—Ç 1:** –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –∏–∑ —É—Ä–æ–∫–∞ 15
   - –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–µ—Å—å –∫–æ–¥ –∏–∑ —É—Ä–æ–∫–∞ 15 –≤ —É—Ä–æ–∫ 16
   - –ù–µ –º–µ–Ω—è—Ç—å –Ω–∏—á–µ–≥–æ, –ø—Ä–æ—Å—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –≤ —É—Ä–æ–∫–µ 15

2. **–ö–æ–º–º–∏—Ç 2:** –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ OpenRouter –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –≤–æ–ø—Ä–æ—Å
   - –î–æ–±–∞–≤–∏—Ç—å `OpenAIClient` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å OpenRouter (–∫–∞–∫ –≤ —É—Ä–æ–∫–µ 14)
   - –î–æ–±–∞–≤–∏—Ç—å `LLMService` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å LLM
   - –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é OpenRouter
   - –î–æ–±–∞–≤–∏—Ç—å API endpoint –¥–ª—è –æ–±—ã—á–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∫ LLM

3. **–ö–æ–º–º–∏—Ç 3:** RAG-—Å–µ—Ä–≤–∏—Å ‚Äî –ø–æ–∏—Å–∫ —á–∞–Ω–∫–æ–≤ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞
   - –î–æ–±–∞–≤–∏—Ç—å `RAGService` –¥–ª—è –ø–æ–∏—Å–∫–∞ —á–∞–Ω–∫–æ–≤ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–º–ø—Ç–∞
   - –î–æ–±–∞–≤–∏—Ç—å `PromptBuilder` –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `KnowledgeBaseSearchService` –∏–∑ —É—Ä–æ–∫–∞ 15

4. **–ö–æ–º–º–∏—Ç 4:** API –¥–ª—è RAG-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
   - –î–æ–±–∞–≤–∏—Ç—å `RAGController` —Å endpoints –¥–ª—è RAG-–∑–∞–ø—Ä–æ—Å–∞, –æ–±—ã—á–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
   - –î–æ–±–∞–≤–∏—Ç—å `ComparisonService` –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–æ–≤

5. **–ö–æ–º–º–∏—Ç 5:** UI –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è RAG –∏ –æ–±—ã—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞
   - –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É `rag-compare.html` –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è
   - **–ù–ï –£–î–ê–õ–Ø–¢–¨** —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π UI –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
   - –û—Å—Ç–∞–≤–∏—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –∏ –ø–æ–∏—Å–∫–∞ –∫–∞–∫ –µ—Å—Ç—å

## –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ –∏–∑ —É—Ä–æ–∫–∞ 15:**
   - –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–µ—Å—å –∫–æ–¥ (—Å–µ—Ä–≤–µ—Ä, –∫–ª–∏–µ–Ω—Ç, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, –¥–æ–∫—É–º–µ–Ω—Ç—ã)
   - –ù–µ –º–µ–Ω—è—Ç—å –Ω–∏—á–µ–≥–æ –Ω–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ
   - –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç

2. **OpenRouter:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—Ç –∂–µ –ø–æ–¥—Ö–æ–¥, —á—Ç–æ –≤ —É—Ä–æ–∫–µ 14 (orchestration)
   - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ `config/server.yaml` –∏ `.env`
   - –ú–æ–¥–µ–ª—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `config/server.yaml`
   - API –∫–ª—é—á –±–µ—Ä—ë—Ç—Å—è –∏–∑ `.env` –∫–∞–∫ `OPENAI_API_KEY`

3. **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –∏–∑ —É—Ä–æ–∫–∞ 15
   - –¢–µ–∫—Å—Ç —á–∞–Ω–∫–æ–≤ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –ë–î –≤ –ø–æ–ª–µ `content`
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `KnowledgeBaseSearchService`

4. **UI:**
   - **–ù–ï –£–î–ê–õ–Ø–¢–¨** —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π UI –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
   - –û—Å—Ç–∞–≤–∏—Ç—å –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –∏ –ø–æ–∏—Å–∫–∞ –∫–∞–∫ –µ—Å—Ç—å
   - –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

5. **–ö–∞–∂–¥—ã–π –∫–æ–º–º–∏—Ç ‚Äî —Å—Ç–æ–ø:**
   - –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–º–∏—Ç–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Å—è
   - –ü–æ–∫–∞–∑—ã–≤–∞–π –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
   - –î–æ–∂–¥–∏—Å—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–µ—Ä–µ–¥ —Å–ª–µ–¥—É—é—â–∏–º –∫–æ–º–º–∏—Ç–æ–º

6. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
   - –ú–æ–¥–µ–ª—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –≤ `config/server.yaml` (–ø–∞—Ä–∞–º–µ—Ç—Ä `ai.model`)
   - API –∫–ª—é—á –±–µ—Ä—ë—Ç—Å—è –∏–∑ `.env` –∫–∞–∫ `OPENAI_API_KEY`
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ yaml: `ollama.*`, `knowledgeBase.*`, `ai.provider`, `ai.model`

7. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
   - –ï—Å–ª–∏ –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–π –ø–æ–Ω—è—Ç–Ω—É—é –æ—à–∏–±–∫—É
   - –ï—Å–ª–∏ LLM –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–π –ø–æ–Ω—è—Ç–Ω—É—é –æ—à–∏–±–∫—É
   - –ï—Å–ª–∏ –Ω–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —á–∞–Ω–∫–æ–≤ ‚Äî –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Kotlin + Ktor + Clean Architecture
- SQLite –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π –∏–∑ —É—Ä–æ–∫–∞ 15
- Ollama API –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤
- OpenRouter API –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–æ–≤ LLM
- Vanilla JS –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `PROMPT.md` ‚Äî –ø–æ–ª–Ω–æ–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ
- `THEORY.md` ‚Äî —Ç–µ–æ—Ä–∏—è –ø–æ RAG, –ø–æ–∏—Å–∫—É, –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- `README.md` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–∞

## –¶–µ–ª–∏ —É—Ä–æ–∫–∞

- –ü–æ–¥–∫–ª—é—á–∏—Ç—å RAG –∫ LLM —á–µ—Ä–µ–∑ OpenRouter
- –ü–æ–Ω—è—Ç—å —Ä–∞–∑–Ω–∏—Ü—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å RAG –∏ –±–µ–∑ RAG
- –°—Ä–∞–≤–Ω–∏—Ç—å –æ—Ç–≤–µ—Ç—ã —Å RAG –∏ –±–µ–∑ RAG
- –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –±–∞–∑—É –∑–Ω–∞–Ω–∏–π –≤ –∞–≥–µ–Ω—Ç–∞

–ù–∞—á–Ω–∏ —Å —á—Ç–µ–Ω–∏—è `PROMPT.md` –∏ `THEORY.md`, –∑–∞—Ç–µ–º –ø—Ä–∏—Å—Ç—É–ø–∞–π –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ —à–∞–≥–∞–º. **–ü–æ–º–Ω–∏: –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–º–∏—Ç–∞ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–π—Å—è –∏ –∂–¥–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è!**
