# –ü—Ä–æ–º–ø—Ç –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: üî• –î–µ–Ω—å 17. –†–µ—Ä–∞–Ω–∫–∏–Ω–≥ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

–¢—ã ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, —Å–æ–∑–¥–∞—é—â–∏–π —É—Ä–æ–∫ ¬´üî• –î–µ–Ω—å 17. –†–µ—Ä–∞–Ω–∫–∏–Ω–≥ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è¬ª –≤ –º–æ–¥—É–ª–µ `lesson-17-rag-reranking`. –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–µ–∫ **Kotlin + Ktor + Clean Architecture + SQLite** —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –Ω–∞ **vanilla JS**. –í –∫–∞—á–µ—Å—Ç–≤–µ –±–∞–∑—ã –º—ã **–∫–æ–ø–∏—Ä—É–µ–º –≤–µ—Å—å –∫–æ–¥ –∏–∑ —É—Ä–æ–∫–∞ 16** –∏ —Ä–∞–∑–≤–∏–≤–∞–µ–º –µ–≥–æ ‚Äî –º–µ–Ω—è–µ–º –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è `lesson-16-rag-query` –Ω–∞ `lesson-17-rag-reranking`, –Ω–µ –ª–æ–º–∞—è —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.

## üéØ –¶–µ–ª—å —É—Ä–æ–∫–∞

–£–ª—É—á—à–∏—Ç—å RAG-–ø–∞–π–ø–ª–∞–π–Ω, –¥–æ–±–∞–≤–∏–≤ –≤—Ç–æ—Ä–æ–π —ç—Ç–∞–ø –ø–æ—Å–ª–µ –ø–æ–∏—Å–∫–∞: **—Ä–µ—Ä–∞–Ω–∫–∏–Ω–≥ / —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏**. –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Ä–æ–≥ –æ—Ç—Å–µ—á–µ–Ω–∏—è –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, —Å—Ä–∞–≤–Ω–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤ –±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞ –∏ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º –∏ –ø–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ —ç—Ç–æ –≤–ª–∏—è–µ—Ç –Ω–∞ –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç–≤–µ—Ç –∞–≥–µ–Ω—Ç–∞.

### –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è

```
–ü–æ–∏—Å–∫ –ø–æ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π ‚Üí –†–µ—Ä–µ–Ω–∫–∏–Ω–≥ / —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è ‚Üí –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ‚Üí –ó–∞–ø—Ä–æ—Å –∫ OpenRouter ‚Üí –°—Ä–∞–≤–Ω–µ–Ω–∏–µ
```

–ú—ã —Å–Ω–∞—á–∞–ª–∞ –∏—â–µ–º top-K —á–∞–Ω–∫–æ–≤ (–∫–∞–∫ –≤ —É—Ä–æ–∫–µ 16), –∑–∞—Ç–µ–º –ø—Ä–æ–≥–æ–Ω—è–µ–º –∏—Ö —á–µ—Ä–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Å–ª–æ–π:
- **–ü—Ä–æ—Å—Ç–æ–π —Ñ–∏–ª—å—Ç—Ä** (–ø–æ—Ä–æ–≥ –ø–æ—Ö–æ–∂–µ—Å—Ç–∏ –ø–æ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–º—É —Å—Ö–æ–¥—Å—Ç–≤—É)
- **–ò/–∏–ª–∏ ML-—Ä–µ—Ä–∞–Ω–∫–µ—Ä** (LLM/–≤—Ç–æ—Ä–æ–π –∑–∞–ø—Ä–æ—Å –∫ OpenRouter –¥–ª—è —Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏—è)

–ü–æ—Ä–æ–≥ –∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –≤—ã–±–∏—Ä–∞—é—Ç—Å—è –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ UI.

---

## üìã –ü–æ—ç—Ç–∞–ø–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã)

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:**
- –ö–∞–∂–¥—ã–π –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–π —à–∞–≥ = –æ—Ç–¥–µ–ª—å–Ω—ã–π git-–∫–æ–º–º–∏—Ç.
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ **–°–¢–û–ü**, –ø–æ–∫–∞–∂–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏ –¥–æ–∂–¥–∏—Å—å ¬´–æ–∫, –ø—Ä–æ–¥–æ–ª–∂–∞–π¬ª.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º –¥–µ–ª–∞–µ—Ç merge/commit –¥–∞–ª–µ–µ.

### –ö–æ–º–º–∏—Ç 1: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ä–æ–∫–∞ 16

**–ó–∞–¥–∞—á–∞:** –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `lesson-16-rag-query/` –≤ `lesson-17-rag-reranking/`.

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã (server, client, config, README, THEORY, PROMPT, CHAT_PROMPT, –¥–æ–∫—É–º–µ–Ω—Ç—ã, –¥–∞–Ω–Ω—ã–µ).
2. –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è:
   - –ü–∞–ø–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞, Gradle settings, package references, –∑–∞–≥–æ–ª–æ–≤–∫–∏, README
   - –í—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è `lesson-16-rag-query` ‚Üí `lesson-17-rag-reranking`
   - ¬´–î–µ–Ω—å 16¬ª ‚Üí ¬´–î–µ–Ω—å 17¬ª
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è, –ø–æ–∫–∞–∑–∞—Ç—å diff –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

---

### –ö–æ–º–º–∏—Ç 2: –ë–∞–∑–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏

**–ó–∞–¥–∞—á–∞:** –¥–æ–±–∞–≤–∏—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–æ—Ä–æ–≥ –ø–æ—Ö–æ–∂–µ—Å—Ç–∏, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –æ—Ç–±—Ä–∞—Å—ã–≤–∞—Ç—å —Å–ª–∞–±—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. `RelevanceFilter` (domain/service):
   - –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤
   - –£–¥–∞–ª—è–µ—Ç —Ç–µ, —á–µ–π `similarity` –Ω–∏–∂–µ `rag.filter.minSimilarity`
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (—Å–∫–æ–ª—å–∫–æ –æ—Ç–±—Ä–æ—à–µ–Ω–æ, —Å—Ä–µ–¥–Ω–µ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ –∏ —Ç.–ø.)
2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è `rag.filter` –≤ `config/server.yaml`:
   ```yaml
   rag:
     retrieval:
       topK: 5
       minSimilarity: 0.4
     filter:
       enabled: true
       type: "threshold"   # "threshold" | "reranker"
       minSimilarity: 0.6
       keepTop: 3
   ```
3. API/DTO –¥–æ–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª–µ–º `filterStats`.

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–∞–π–ø–ª–∞–π–Ω–µ:**
```
–ü–æ–∏—Å–∫ —á–∞–Ω–∫–æ–≤ ‚Üí ThresholdFilter ‚Üí PromptBuilder
```

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 3: ML-—Ä–µ—Ä–∞–Ω–∫–µ—Ä (LLM-–ø–µ—Ä–µ—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ)

**–ó–∞–¥–∞—á–∞:** –¥–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –≤—Ç–æ—Ä–æ–π —ç—Ç–∞–ø ‚Äî LLM –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –∫–∞–∂–¥–æ–≥–æ —á–∞–Ω–∫–∞ –∏ –≤—ã–¥–∞–µ—Ç –Ω–æ–≤—ã–π –ø–æ—Ä—è–¥–æ–∫ / –º–∞—Ä–∫–∏—Ä–æ–≤–∫—É.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. `RerankerService`:
   - –°—Ç—Ä–æ–∏—Ç –∫–æ—Ä–æ—Ç–∫–∏–π –ø—Ä–æ–º–ø—Ç –¥–ª—è OpenRouter (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `LLMService`)
   - –ù–∞ –≤—Ö–æ–¥: –≤–æ–ø—Ä–æ—Å + —Ç–æ–ø-N —á–∞–Ω–∫–æ–≤
   - –ù–∞ –≤—ã—Ö–æ–¥: —Å–ø–∏—Å–æ–∫ —Å –ø–æ–ª—è–º–∏ `rerankScore`, `reason`, `shouldUse`
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `rag.filter`:
   ```yaml
   rag:
     filter:
       type: "reranker"
       reranker:
         model: "gpt-4o-mini"     # –º–æ–∂–Ω–æ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ
         maxChunks: 6
         decisionPrompt: "..."
   ```
3. –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–±–∏—Ä–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏—é:
   - `threshold` ‚Üí —Ç–æ–ª—å–∫–æ –ø–æ—Ä–æ–≥
   - `reranker` ‚Üí LLM –ø–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–µ—Ç + –æ—Ç—Å–µ–∏–≤–∞–µ—Ç
   - `hybrid` ‚Üí —Å–Ω–∞—á–∞–ª–∞ –ø–æ—Ä–æ–≥, –ø–æ—Ç–æ–º reranker

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–∞–π–º–∞—É—Ç—ã / –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å OpenRouter (—Ñ–æ–ª–±—ç–∫ –∫ threshold).
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏—á–∏–Ω—É –æ—Ç–±—Ä–∞–∫–æ–≤–∫–∏ —á–∞–Ω–∫–∞.

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ RAG-—Å–µ—Ä–≤–∏—Å –∏ API

**–ó–∞–¥–∞—á–∞:** –≤—Å—Ç—Ä–æ–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä/—Ä–µ—Ä–∞–Ω–∫–µ—Ä –≤ –≤–µ—Å—å RAG-–ø–æ—Ç–æ–∫ –∏ –¥–æ–±–∞–≤–∏—Ç—å —Å—Ä–∞–≤–Ω–µ–Ω–∏—è.

**–î–µ–π—Å—Ç–≤–∏—è:**
1. `RAGService`:
   - –≠—Ç–∞–ø—ã: –ø–æ–∏—Å–∫ ‚Üí —Ñ–∏–ª—å—Ç—Ä/—Ä–µ—Ä–∞–Ω–∫–µ—Ä ‚Üí –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ‚Üí –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –ø—Ä–æ–º–ø—Ç–∞
   - –í–æ–∑–≤—Ä–∞—â–∞—Ç—å –ø–æ–¥—Ä–æ–±–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É (`retrieved`, `filteredOut`, `rerankDecisions`).
2. `ComparisonService`:
   - –°—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ç—Ä–∏ —Ä–µ–∂–∏–º–∞: `STANDARD`, `RAG_NO_FILTER`, `RAG_WITH_FILTER`
   - –í–æ–∑–≤—Ä–∞—â–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤, —Å—Ä–µ–¥–Ω–µ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ, –Ω–∞–ª–∏—á–∏–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏).
3. API:
   - `POST /api/rag/query` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥–∏ `applyFilter`, `strategy`
   - `POST /api/rag/compare` ‚Äî —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å—Ä–∞–∑—É –¥–≤–∞ —Ä–µ–∂–∏–º–∞
   - DTO —Ä–∞—Å—à–∏—Ä–∏—Ç—å –ø–æ–ª—è–º–∏ `filterApplied`, `filterStats`, `rerankInsights`.

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 5: UI –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

**–ó–∞–¥–∞—á–∞:** –æ–±–Ω–æ–≤–∏—Ç—å UI (—Å–æ—Ö—Ä–∞–Ω–∏–≤ –≤—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∏–∑ —É—Ä–æ–∫–∞ 16) –∏ –¥–æ–±–∞–≤–∏—Ç—å –±–ª–æ–∫–∏:
1. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ **rag-compare.html**:
   - –§–æ—Ä–º–∞ –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (`–±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞`, `threshold`, `reranker`, `hybrid`)
   - –°–ª–∞–π–¥–µ—Ä/–ø–æ–ª–µ –¥–ª—è –ø–æ—Ä–æ–≥–∞
   - –¢–∞–±—ã —Å –ª–æ–≥–æ–º —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ (`–æ—Ç–±—Ä–æ—à–µ–Ω–Ω—ã–µ —á–∞–Ω–∫–∏`, `—Ä–µ—à–µ–Ω–∏—è reranker`)
   - –ì—Ä–∞—Ñ–∏–∫–∏/–±–∞—Ä-—á–∞—Ä—Ç—ã (–ø—Ä–æ—Å—Ç—ã–µ div) –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –æ—Ü–µ–Ω–æ–∫
2. –ù–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ **search.html** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ—Ä–æ–≥ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –µ–≥–æ –±—ã—Å—Ç—Ä–æ –∏–∑–º–µ–Ω–∏—Ç—å
3. –û–±–Ω–æ–≤–∏—Ç—å `index.html`, –¥–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∏–¥–µ–æ-–¥–µ–º–æ.

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 6: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ó–∞–¥–∞—á–∞:** –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –≤—ã–≤–æ–¥—ã.

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –û–±–Ω–æ–≤–∏—Ç—å `README.md`, `THEORY.md`, `PROMPT.md`, `CHAT_PROMPT.txt` –ø–æ–¥ –î–µ–Ω—å 17.
2. –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–¥–µ–ª ¬´–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è¬ª —Å —Å—Å—ã–ª–∫–æ–π –Ω–∞ –≤–∏–¥–µ–æ (—Ñ–æ—Ä–º–∞—Ç: –í–∏–¥–µ–æ + –ö–æ–¥).
3. –û–ø–∏—Å–∞—Ç—å, –∫–æ–≥–¥–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª–µ–∑–Ω–∞ / –≤—Ä–µ–¥–Ω–∞, —É–∫–∞–∑–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø–æ—Ä–æ–≥–∏.
4. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ—Ä–Ω–µ–≤–æ–π `README.md`, –¥–æ–±–∞–≤–∏–≤ —Å—Å—ã–ª–∫—É –Ω–∞ —É—Ä–æ–∫ 17.

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –ø–æ–∫–∞–∑–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

---

## üß† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–æ—Ä–æ–≥–æ–≤—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
- –û–ø–µ—Ä–∏—Ä—É—é—Ç –Ω–∞ —Å—ã—Ä—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö –∫–æ—Å–∏–Ω—É—Å–Ω–æ–≥–æ —Å—Ö–æ–¥—Å—Ç–≤–∞.
- –ù—É–∂–Ω—ã —Ä–∞–∑–Ω—ã–µ —Ä–µ–∂–∏–º—ã: `>=`, –≥–∏–±–∫–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ top-N, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ `keepTop`.
- –ù—É–∂–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å, –ø–æ—á–µ–º—É —á–∞–Ω–∫ –æ—Ç–±—Ä–æ—à–µ–Ω (–Ω–∏–∂–µ –ø–æ—Ä–æ–≥–∞, –ø–ª–æ—Ö–æ–π rerankScore –∏ —Ç.–¥.).

### LLM-—Ä–µ—Ä–∞–Ω–∫–µ—Ä
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç OpenRouter (—á–µ—Ä–µ–∑ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `LLMService`).
- –ü—Ä–æ–º–ø—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–º –∏ –¥–µ—à—ë–≤—ã–º:
  ```
  –¢—ã ‚Äî reranker. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞–Ω–∫–∞ –æ—Ü–µ–Ω–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å –≤–æ–ø—Ä–æ—Å—É –ø–æ —à–∫–∞–ª–µ 0-1.
  –í–µ—Ä–Ω–∏ JSON: [{chunkId, relevance, reason, shouldUse}]
  ```
- –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤ (max 6) –∏ —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞.
- –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—à–µ–Ω–∏–π (optional) –≤ –ø–∞–º—è—Ç–∏, —á—Ç–æ–±—ã –Ω–µ –¥—ë—Ä–≥–∞—Ç—å LLM –ø–æ –æ–¥–Ω–æ–º—É –∏ —Ç–æ–º—É –∂–µ –∑–∞–ø—Ä–æ—Å—É.

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ—Ä–æ–≥–∞
- –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (`0.6`) –∑–∞–¥–∞—ë—Ç—Å—è –≤ YAML.
- UI –¥–æ–ª–∂–µ–Ω –ø–æ–∑–≤–æ–ª—è—Ç—å –º–µ–Ω—è—Ç—å –ø–æ—Ä–æ–≥ –±–µ–∑ —Ä–µ—Å—Ç–∞—Ä—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞ (—á–µ—Ä–µ–∑ endpoint –∏–ª–∏ query-–ø–∞—Ä–∞–º–µ—Ç—Ä).
- –î–æ–±–∞–≤–∏—Ç—å —ç–Ω–¥–ø–æ–∏–Ω—Ç `GET /api/rag/filter/config` –∏ `POST /api/rag/filter/config`.

### –ú–µ—Ç—Ä–∏–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–æ–≤ –¥–æ/–ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞.
- –°—Ä–µ–¥–Ω–µ–µ/–º–µ–¥–∏–∞–Ω–∞ —Å—Ö–æ–¥—Å—Ç–≤–∞.
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤, –∏—Ö id/–¥–æ–∫—É–º–µ–Ω—Ç—ã.
- Rerank score –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —á–∞–Ω–∫–∞.

### –í–∏–¥–µ–æ + –∫–æ–¥
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ (–≤ README).
- –ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –≤–∏–¥–µ–æ: –∑–∞–ø—É—Å–∫ —Ñ–∏–ª—å—Ç—Ä–∞, —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤, –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä–æ–≥–∞ ‚Üí –¥—Ä—É–≥–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–∞.

---

## üìä –ü—Ä–∏–º–µ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è

1. –í–æ–ø—Ä–æ—Å: ¬´–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä?¬ª
   - –ë–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞: 5 —á–∞–Ω–∫–æ–≤, —á–∞—Å—Ç—å –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∞ ‚Üí –æ—Ç–≤–µ—Ç —Ä–∞–∑–º—ã—Ç—ã–π.
   - –° –ø–æ—Ä–æ–≥–æ–º 0.7: 2 —á–∞–Ω–∫–∞, –æ—Ç–≤–µ—Ç —Ç–æ—á–Ω–µ–µ.
   - –° reranker‚Äô–æ–º: 3 —á–∞–Ω–∫–∞ —Å –ø–æ—è—Å–Ω–µ–Ω–∏—è–º–∏, –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∏—á–∏–Ω—ã.
2. –í–æ–ø—Ä–æ—Å: ¬´–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Å–∏–Ω—É—Å–Ω–æ–µ —Å—Ö–æ–¥—Å—Ç–≤–æ?¬ª
   - –ë–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞: —à—É–º.
   - –° —Ñ–∏–ª—å—Ç—Ä–æ–º: –æ—Å—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ —á–∞–Ω–∫–∏.

---

## üéì –¶–µ–ª–∏ —É—Ä–æ–∫–∞

- –ù–∞—É—á–∏—Ç—å—Å—è –¥–æ–±–∞–≤–ª—è—Ç—å –≤—Ç–æ—Ä–æ–π —ç—Ç–∞–ø –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ RAG.
- –í—ã—è—Å–Ω–∏—Ç—å, –∫–∞–∫ –ø–æ—Ä–æ–≥ –∏ reranker –≤–ª–∏—è—é—Ç –Ω–∞ –æ—Ç–≤–µ—Ç.
- –ù–∞—É—á–∏—Ç—å—Å—è –≤–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é.
- –ü–æ–ª—É—á–∏—Ç—å —É–ª—É—á—à–µ–Ω–Ω—ã–π RAG —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π/—Ä–µ—Ä–∞–Ω–∫–∏–Ω–≥–æ–º (–í–∏–¥–µ–æ + –ö–æ–¥).

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `PROMPT.md` ‚Äî —Ç–µ–∫—É—â–µ–µ –¢–ó (—ç—Ç–æ—Ç —Ñ–∞–π–ª).
- `THEORY.md` ‚Äî —Ç–µ–æ—Ä–∏—è –ø—Ä–æ —Ä–µ—Ä–∞–Ω–∫–∏–Ω–≥, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –∏ –æ—Ü–µ–Ω–∫—É —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏.
- `README.md` ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∑–∞–ø—É—Å–∫—É –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —É—Ä–æ–∫–∞.
- `CHAT_PROMPT.txt` ‚Äî –∫—Ä–∞—Ç–∫–∞—è –≤–µ—Ä—Å–∏—è –¢–ó –¥–ª—è –∞–≥–µ–Ω—Ç–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.



