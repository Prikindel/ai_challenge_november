# Организация базы знаний

Руководство по организации и использованию базы знаний в God Agent.

## Структура базы знаний

```
knowledge-base/
├── projects/          # Документация проектов
│   ├── project-1/
│   │   ├── docs/
│   │   ├── notes.md
│   │   └── ideas.md
│   └── project-2/
├── learning/          # Заметки и обучение
│   ├── ai-notes.md
│   ├── kotlin-tips.md
│   └── architecture-patterns.md
├── personal/          # Личные заметки
│   ├── goals-2024.md
│   ├── meeting-notes/
│   └── ideas.md
└── references/       # Справочные материалы
    ├── articles/
    └── books/
```

## Категории документов

### 1. Projects (Проекты)

Документация и заметки по вашим проектам.

**Пример:**
```
projects/my-app/
├── README.md          # Описание проекта
├── docs/
│   ├── api.md         # API документация
│   ├── architecture.md # Архитектура
│   └── deployment.md  # Деплой
├── notes.md           # Заметки по разработке
└── ideas.md           # Идеи для улучшения
```

### 2. Learning (Обучение)

Заметки по обучению, конспекты, полезные материалы.

**Пример:**
```
learning/
├── ai-notes.md        # Заметки по AI
├── kotlin-tips.md     # Советы по Kotlin
├── architecture-patterns.md # Паттерны архитектуры
└── courses/
    └── course-name.md
```

### 3. Personal (Личное)

Личные заметки, цели, встречи, идеи.

**Пример:**
```
personal/
├── goals-2024.md      # Цели на год
├── meeting-notes/
│   ├── 2024-01-15.md
│   └── 2024-01-20.md
└── ideas.md           # Идеи и мысли
```

### 4. References (Справочники)

Справочные материалы, статьи, книги.

**Пример:**
```
references/
├── articles/
│   ├── article-1.md
│   └── article-2.md
└── books/
    └── book-summary.md
```

## Формат документов

### Markdown (рекомендуется)

```markdown
# Заголовок документа

## Раздел 1

Текст с **жирным** и *курсивом*.

### Подраздел

- Список
- Элементов

## Раздел 2

Код:
```kotlin
fun example() {
    println("Hello")
}
```

Ссылки: [Текст](https://example.com)
```

### Текстовые файлы

Обычные `.txt` файлы также поддерживаются.

## Индексация

### Автоматическая индексация

При запуске God Agent база знаний индексируется автоматически (если `auto_index: true` в конфиге).

### Ручная индексация

1. Через UI: страница настроек → "Переиндексировать"
2. Через API: `POST /api/knowledge-base/index`

### Индексация при изменении

Если `watch_changes: true`, система автоматически переиндексирует измененные файлы.

## Поиск

### Через чат

Просто спросите: "Найди информацию о проекте X"

### Через API

```bash
GET /api/knowledge-base/search?query=проект&category=projects
```

### По категориям

Можно искать только в определенной категории:
- "Найди в learning информацию о Kotlin"
- "Что я писал в personal про цели?"

## Лучшие практики

1. **Используйте структуру папок** — организуйте документы по категориям
2. **Пишите понятные заголовки** — они помогают в поиске
3. **Добавляйте метаданные** — даты, теги, авторы
4. **Регулярно обновляйте** — добавляйте новые документы
5. **Используйте ссылки** — связывайте связанные документы

## Примеры запросов

### Базовые запросы

**"Найди информацию о проекте my-app"**
- RAG ищет в `knowledge-base/projects/my-app/`
- Возвращает релевантные фрагменты из README, docs, notes
- Пример ответа: "Проект my-app - это веб-приложение на Kotlin + Ktor. Основные компоненты:..."

**"Что я писал про архитектуру?"**
- Поиск по всем категориям
- Находит упоминания архитектуры в learning/, projects/, personal/
- Возвращает цитаты с источниками

**"Покажи мои заметки по Kotlin"**
- Поиск в `knowledge-base/learning/`
- Находит файлы типа `kotlin-tips.md`, `kotlin-notes.md`
- Возвращает релевантные фрагменты

### Запросы с категориями

**"Найди в personal цели на 2024"**
- Поиск только в `knowledge-base/personal/`
- Находит `goals-2024.md`
- Возвращает конкретные цели

**"Что есть в references про AI?"**
- Поиск в `knowledge-base/references/`
- Находит статьи и книги про AI
- Возвращает список источников

### Сложные запросы

**"Сравни архитектуру проекта X и проекта Y"**
- RAG находит информацию о обоих проектах
- LLM сравнивает архитектуры
- Возвращает структурированное сравнение

**"Какие идеи я записывал про улучшение проекта Z?"**
- Поиск в `projects/project-z/ideas.md`
- Находит все идеи
- Группирует по темам

### Примеры через API

```bash
# Поиск по всем категориям
curl "http://localhost:8080/api/knowledge-base/search?query=архитектура"

# Поиск в конкретной категории
curl "http://localhost:8080/api/knowledge-base/search?query=Kotlin&category=learning"

# Ограничение результатов
curl "http://localhost:8080/api/knowledge-base/search?query=проект&limit=3"
```

### Примеры ответов

**Запрос:** "Найди информацию о проекте god-agent"

**Ответ:**
```json
{
  "query": "проект god-agent",
  "results": [
    {
      "document": "projects/god-agent/README.md",
      "chunk": "God Agent - персональный AI-помощник с модульной архитектурой...",
      "score": 0.98,
      "category": "projects"
    },
    {
      "document": "projects/god-agent/docs/architecture.md",
      "chunk": "Архитектура God Agent состоит из следующих компонентов...",
      "score": 0.85,
      "category": "projects"
    }
  ],
  "total": 2
}
```

**Запрос:** "Что я писал про RAG?"

**Ответ:**
```json
{
  "query": "RAG",
  "results": [
    {
      "document": "learning/ai-notes.md",
      "chunk": "RAG (Retrieval-Augmented Generation) - техника объединения поиска и генерации...",
      "score": 0.95,
      "category": "learning"
    },
    {
      "document": "projects/god-agent/notes.md",
      "chunk": "В God Agent используется RAG для поиска по базе знаний...",
      "score": 0.88,
      "category": "projects"
    }
  ],
  "total": 2
}
```

## Решение проблем

### Документы не индексируются

- Проверьте формат файлов (Markdown или текст)
- Убедитесь, что файлы в правильной директории
- Проверьте права доступа

### Поиск не находит документы

- Переиндексируйте базу знаний
- Проверьте, что документы в правильной категории
- Используйте более конкретные запросы

### Медленный поиск

- Уменьшите количество документов
- Используйте фильтрацию по категориям
- Оптимизируйте размер чанков

