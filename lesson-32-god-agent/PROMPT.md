# –ü—Ä–æ–º–ø—Ç –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: üî• –î–µ–Ω—å 32. God Agent

–¢—ã ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, —Å–æ–∑–¥–∞—é—â–∏–π —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —É—Ä–æ–∫ ¬´üî• –î–µ–Ω—å 32. God Agent¬ª –≤ –º–æ–¥—É–ª–µ `lesson-32-god-agent`. –≠—Ç–æ **–æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –Ω–∞—Ä–∞–±–æ—Ç–æ–∫** –≤ –æ–¥–Ω–æ–≥–æ –±–æ–ª—å—à–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ AI-–ø–æ–º–æ—â–Ω–∏–∫–∞ —Å –º–æ–¥—É–ª—å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π (MCP –∫–∞–∫ –ø–ª–∞–≥–∏–Ω—ã, RAG –¥–ª—è –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π).

## üéØ –¶–µ–ª—å —É—Ä–æ–∫–∞

–°–æ–∑–¥–∞—Ç—å **–ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ AI-–ø–æ–º–æ—â–Ω–∏–∫–∞**, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç:
- **RAG** ‚Äî –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π —Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **MCP —Å–µ—Ä–≤–µ—Ä—ã** ‚Äî –º–æ–¥—É–ª—å–Ω—ã–µ –ø–ª–∞–≥–∏–Ω—ã (Git, Telegram, Analytics, File System –∏ —Ç.–¥.)
- **–ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥** ‚Äî —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏ —á–µ—Ä–µ–∑ Vosk
- **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è** ‚Äî –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è, —Å—Ç–∏–ª—å
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** ‚Äî –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- **–õ–æ–∫–∞–ª—å–Ω–∞—è LLM** ‚Äî —Ä–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ VPS

### –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è

```
–ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å ‚Üí –†–æ—É—Ç–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Üí MCP/RAG/Analytics ‚Üí –õ–æ–∫–∞–ª—å–Ω–∞—è LLM ‚Üí –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç
```

**–°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞:**
- –†–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π (–∫–∞–∫ Obsidian)
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –º–æ–¥—É–ª—å–Ω—ã–µ MCP —Å–µ—Ä–≤–µ—Ä—ã (–∫–∞–∫ –ø–ª–∞–≥–∏–Ω—ã)
- –ü–æ–Ω–∏–º–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –µ–≥–æ –¥–∞–Ω–Ω—ã–µ
- –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–≤–µ—Ç—ã –ø–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üìã –ü–æ—ç—Ç–∞–ø–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã)

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:**
- –ö–∞–∂–¥—ã–π –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–π —à–∞–≥ = –æ—Ç–¥–µ–ª—å–Ω—ã–π git-–∫–æ–º–º–∏—Ç.
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ **–°–¢–û–ü**, –ø–æ–∫–∞–∂–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏ –¥–æ–∂–¥–∏—Å—å ¬´–æ–∫, –ø—Ä–æ–¥–æ–ª–∂–∞–π¬ª.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º –¥–µ–ª–∞–µ—Ç merge/commit –¥–∞–ª–µ–µ.

---

### –ö–æ–º–º–∏—Ç 1: –í—ã–±–æ—Ä –±–∞–∑—ã –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–ó–∞–¥–∞—á–∞:** –≤—ã–±—Ä–∞—Ç—å –±–∞–∑–æ–≤—ã–π —É—Ä–æ–∫ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è God Agent.

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –±–∞–∑–∞:** `lesson-30-personalization` –∏–ª–∏ `lesson-20-dev-assistant`
- –£–∂–µ –µ—Å—Ç—å RAG, MCP, –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —á–∞—Ç —Å –∏—Å—Ç–æ—Ä–∏–µ–π
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ª–æ–∫–∞–ª—å–Ω–æ–π LLM

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏–∑ `lesson-30-personalization` –≤ `lesson-32-god-agent/`
2. –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è:
   - –ü–∞–ø–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞, Gradle settings, package references
   - –í—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è ‚Üí `lesson-32-god-agent`
   - ¬´–î–µ–Ω—å 30¬ª ‚Üí ¬´–î–µ–Ω—å 32¬ª
3. –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –º–æ–¥—É–ª—å–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:
   ```
   lesson-32-god-agent/
   ‚îú‚îÄ‚îÄ mcp-servers/          # MCP —Å–µ—Ä–≤–µ—Ä—ã (–ø–ª–∞–≥–∏–Ω—ã)
   ‚îÇ   ‚îú‚îÄ‚îÄ git-mcp/
   ‚îÇ   ‚îú‚îÄ‚îÄ telegram-mcp/
   ‚îÇ   ‚îú‚îÄ‚îÄ analytics-mcp/
   ‚îÇ   ‚îú‚îÄ‚îÄ filesystem-mcp/
   ‚îÇ   ‚îî‚îÄ‚îÄ calendar-mcp/
   ‚îú‚îÄ‚îÄ knowledge-base/       # –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π (RAG)
   ‚îÇ   ‚îú‚îÄ‚îÄ projects/
   ‚îÇ   ‚îú‚îÄ‚îÄ learning/
   ‚îÇ   ‚îú‚îÄ‚îÄ personal/
   ‚îÇ   ‚îî‚îÄ‚îÄ references/
   ‚îú‚îÄ‚îÄ data/                 # –î–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
   ‚îÇ   ‚îú‚îÄ‚îÄ analytics/
   ‚îÇ   ‚îî‚îÄ‚îÄ projects/
   ‚îî‚îÄ‚îÄ config/
       ‚îî‚îÄ‚îÄ mcp-servers.yaml  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
   ```
4. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è, –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞.

---

### –ö–æ–º–º–∏—Ç 2: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MCP —Å–µ—Ä–≤–µ—Ä–æ–≤ (–ø–ª–∞–≥–∏–Ω–æ–≤)

**–ó–∞–¥–∞—á–∞:** —Å–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è –º–æ–¥—É–ª—å–Ω—ã—Ö MCP —Å–µ—Ä–≤–µ—Ä–æ–≤.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è MCP** (`config/mcp-servers.yaml`):
   ```yaml
   mcp_servers:
     enabled: true
     
     git:
       enabled: true
       name: "Git MCP"
       description: "–†–∞–±–æ—Ç–∞ —Å git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏ –∏ —Ñ–∞–π–ª–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞"
       repositories:
         - path: "${HOME}/projects/my-project"
           name: "My Project"
         - path: "${HOME}/projects/other-project"
           name: "Other Project"
     
     telegram:
       enabled: true
       name: "Telegram MCP"
       description: "–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram"
       bot_token: "${TELEGRAM_BOT_TOKEN}"
       chat_id: "${TELEGRAM_CHAT_ID}"
     
     analytics:
       enabled: true
       name: "Analytics MCP"
       description: "–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –∏–∑ CSV, JSON, –ë–î"
       data_sources:
         - type: "csv"
           path: "data/analytics/metrics.csv"
           name: "Metrics"
         - type: "db"
           path: "data/analytics/user_data.db"
           name: "User Data"
         - type: "json"
           path: "data/analytics/logs.json"
           name: "Logs"
     
     filesystem:
       enabled: true
       name: "File System MCP"
       description: "–ü–æ–∏—Å–∫ –∏ —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –≤ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ"
       allowed_paths:
         - "${HOME}/Documents"
         - "${HOME}/projects"
         - "knowledge-base"
     
     calendar:
       enabled: false  # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
       name: "Calendar MCP"
       description: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è–º–∏ –∏ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏"
       storage_path: "data/calendar/events.json"
   ```

2. **–ú–æ–¥–µ–ª—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** (`domain/model/MCPServerConfig.kt`):
   ```kotlin
   data class MCPServerConfig(
       val enabled: Boolean,
       val name: String,
       val description: String,
       val config: Map<String, Any>
   )
   
   data class MCPServersConfig(
       val enabled: Boolean,
       val servers: Map<String, MCPServerConfig>
   )
   ```

3. **–°–µ—Ä–≤–∏—Å –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** (`domain/service/MCPConfigService.kt`):
   ```kotlin
   class MCPConfigService {
       fun loadConfig(): MCPServersConfig {
           // –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑ config/mcp-servers.yaml
       }
       
       fun getEnabledServers(): List<MCPServerConfig> {
           // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–∫–ª—é—á–µ–Ω–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã
       }
       
       fun isServerEnabled(name: String): Boolean {
           // –ü—Ä–æ–≤–µ—Ä–∫–∞, –≤–∫–ª—é—á–µ–Ω –ª–∏ —Å–µ—Ä–≤–µ—Ä
       }
   }
   ```

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 3: –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π MCP Router

**–ó–∞–¥–∞—á–∞:** —Å–æ–∑–¥–∞—Ç—å —Ä–æ—É—Ç–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç MCP —Å–µ—Ä–≤–µ—Ä—ã –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **MCP Router Service** (`domain/service/MCPRouterService.kt`):
   ```kotlin
   class MCPRouterService(
       private val mcpConfigService: MCPConfigService,
       private val mcpClients: Map<String, MCPClient>
   ) {
       /**
        * –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏–∑ –≤—Å–µ—Ö MCP —Å–µ—Ä–≤–µ—Ä–æ–≤
        */
       fun getAllAvailableTools(): List<MCPTool> {
           val enabledServers = mcpConfigService.getEnabledServers()
           return enabledServers.flatMap { serverConfig ->
               val client = mcpClients[serverConfig.name]
               client?.listTools() ?: emptyList()
           }
       }
       
       /**
        * –í—ã–ø–æ–ª–Ω–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –ø–æ –∏–º–µ–Ω–∏
        */
       suspend fun executeTool(
           serverName: String,
           toolName: String,
           arguments: Map<String, Any>
       ): MCPToolResult {
           val client = mcpClients[serverName]
               ?: throw IllegalArgumentException("MCP server not found: $serverName")
           
           return client.callTool(toolName, arguments)
       }
       
       /**
        * –ü–æ–ª—É—á–∏—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è LLM
        */
       fun getToolsDescription(): String {
           val tools = getAllAvailableTools()
           return tools.groupBy { it.serverName }
               .map { (serverName, serverTools) ->
                   """
                   ## $serverName
                   ${serverTools.joinToString("\n") { "- ${it.name}: ${it.description}" }}
                   """.trimIndent()
               }
               .joinToString("\n\n")
       }
   }
   ```

2. **–ú–æ–¥–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞** (`domain/model/MCPTool.kt`):
   ```kotlin
   data class MCPTool(
       val serverName: String,
       val name: String,
       val description: String,
       val parameters: Map<String, Any>
   )
   
   data class MCPToolResult(
       val success: Boolean,
       val data: Any?,
       val error: String?
   )
   ```

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ RequestRouterService** (`domain/service/RequestRouterService.kt`):
   ```kotlin
   class RequestRouterService(
       private val mcpRouterService: MCPRouterService,
       private val llmService: LLMService
   ) {
       /**
        * –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
        */
       suspend fun routeRequest(
           userQuery: String,
           chatHistory: List<ChatMessage>
       ): RoutingDecision {
           // –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
           val availableTools = mcpRouterService.getAllAvailableTools()
           val toolsDescription = mcpRouterService.getToolsDescription()
           
           // LLM —Ä–µ—à–∞–µ—Ç, –∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
           val prompt = buildRoutingPrompt(userQuery, toolsDescription, chatHistory)
           val response = llmService.generateResponse(prompt)
           
           return parseRoutingDecision(response, availableTools)
       }
       
       private fun buildRoutingPrompt(
           query: String,
           toolsDescription: String,
           history: List<ChatMessage>
       ): String {
           return """
           –¢—ã ‚Äî —Ä–æ—É—Ç–µ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–≥–æ AI-–ø–æ–º–æ—â–Ω–∏–∫–∞.
           
           –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
           $toolsDescription
           
           –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞:
           ${history.takeLast(5).joinToString("\n") { "${it.role}: ${it.content}" }}
           
           –ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: $query
           
           –û–ø—Ä–µ–¥–µ–ª–∏, –∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ—Ç–≤–µ—Ç–∞ –Ω–∞ –∑–∞–ø—Ä–æ—Å.
           –í–µ—Ä–Ω–∏ JSON —Å —Ä–µ—à–µ–Ω–∏–µ–º:
           {
             "action": "MCP_TOOLS" | "RAG_SEARCH" | "ANALYTICS" | "DIRECT_ANSWER",
             "tools": [
               {"server": "server_name", "tool": "tool_name", "args": {...}}
             ],
             "reasoning": "–æ–±—ä—è—Å–Ω–µ–Ω–∏–µ –≤—ã–±–æ—Ä–∞"
           }
           """.trimIndent()
       }
   }
   ```

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 4: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π (RAG)

**–ó–∞–¥–∞—á–∞:** —Ä–∞—Å—à–∏—Ä–∏—Ç—å RAG —Å–∏—Å—Ç–µ–º—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ª–∏—á–Ω–æ–π –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π** (`knowledge-base/`):
   ```
   knowledge-base/
   ‚îú‚îÄ‚îÄ projects/
   ‚îÇ   ‚îú‚îÄ‚îÄ project-1/
   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ docs/
   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ notes.md
   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ideas.md
   ‚îÇ   ‚îî‚îÄ‚îÄ project-2/
   ‚îú‚îÄ‚îÄ learning/
   ‚îÇ   ‚îú‚îÄ‚îÄ ai-notes.md
   ‚îÇ   ‚îú‚îÄ‚îÄ kotlin-tips.md
   ‚îÇ   ‚îî‚îÄ‚îÄ architecture-patterns.md
   ‚îú‚îÄ‚îÄ personal/
   ‚îÇ   ‚îú‚îÄ‚îÄ goals-2024.md
   ‚îÇ   ‚îú‚îÄ‚îÄ meeting-notes/
   ‚îÇ   ‚îî‚îÄ‚îÄ ideas.md
   ‚îî‚îÄ‚îÄ references/
       ‚îú‚îÄ‚îÄ articles/
       ‚îî‚îÄ‚îÄ books/
   ```

2. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π DocumentIndexer** (`domain/service/KnowledgeBaseService.kt`):
   ```kotlin
   class KnowledgeBaseService(
       private val documentIndexer: DocumentIndexer,
       private val embeddingService: EmbeddingService
   ) {
       /**
        * –ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤—Å—é –±–∞–∑—É –∑–Ω–∞–Ω–∏–π
        */
       suspend fun indexKnowledgeBase(basePath: String = "knowledge-base") {
           val categories = listOf("projects", "learning", "personal", "references")
           
           categories.forEach { category ->
               val categoryPath = Paths.get(basePath, category)
               if (Files.exists(categoryPath)) {
                   indexCategory(category, categoryPath.toString())
               }
           }
       }
       
       /**
        * –ü–æ–∏—Å–∫ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
        */
       suspend fun searchInCategory(
           query: String,
           category: String? = null,
           limit: Int = 5
       ): List<RetrievedChunk> {
           // RAG –ø–æ–∏—Å–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
       }
       
       /**
        * –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤
        */
       fun watchForChanges(basePath: String) {
           // File watcher –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
       }
   }
   ```

3. **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** (`domain/model/DocumentCategory.kt`):
   ```kotlin
   enum class DocumentCategory {
       PROJECTS,
       LEARNING,
       PERSONAL,
       REFERENCES
   }
   ```

4. **API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π** (`presentation/controller/KnowledgeBaseController.kt`):
   ```kotlin
   class KnowledgeBaseController(
       private val knowledgeBaseService: KnowledgeBaseService
   ) {
       fun Application.knowledgeBaseRoutes() {
           route("/api/knowledge-base") {
               post("/index") {
                   knowledgeBaseService.indexKnowledgeBase()
                   call.respond(mapOf("status" to "indexed"))
               }
               
               get("/search") {
                   val query = call.request.queryParameters["query"] ?: ""
                   val category = call.request.queryParameters["category"]
                   val results = knowledgeBaseService.searchInCategory(query, category)
                   call.respond(results)
               }
               
               get("/categories") {
                   val categories = listOf("projects", "learning", "personal", "references")
                   call.respond(categories)
               }
           }
       }
   }
   ```

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 5: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–æ–ª–æ—Å–æ–≤–æ–≥–æ –≤–≤–æ–¥–∞

**–ó–∞–¥–∞—á–∞:** –¥–æ–±–∞–≤–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥ –∏–∑ —É—Ä–æ–∫–∞ 31.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–∑ lesson-31**:
   - `SpeechRecognitionService` (Vosk)
   - `AudioConversionService` (ffmpeg)
   - `VoiceController` (API endpoints)

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –≥–ª–∞–≤–Ω—ã–π —á–∞—Ç** (`presentation/controller/ChatController.kt`):
   ```kotlin
   class ChatController(
       private val chatService: ChatService,
       private val speechRecognitionService: SpeechRecognitionService
   ) {
       fun Application.chatRoutes() {
           route("/api/chat") {
               post("/message") {
                   val request = call.receive<ChatRequest>()
                   val response = chatService.processMessage(request)
                   call.respond(response)
               }
               
               // –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥
               post("/voice") {
                   val multipart = call.receiveMultipart()
                   var audioData: ByteArray? = null
                   
                   multipart.forEachPart { part ->
                       when (part) {
                           is PartData.FileItem -> {
                               audioData = part.streamProvider().readBytes()
                           }
                           else -> {}
                       }
                       part.dispose()
                   }
                   
                   if (audioData == null) {
                       call.respond(HttpStatusCode.BadRequest,
                           mapOf("error" to "No audio data"))
                       return@post
                   }
                   
                   // –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ä–µ—á–∏
                   val recognizedText = speechRecognitionService.recognize(audioData)
                   
                   // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞–∫ –æ–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
                   val request = ChatRequest(
                       message = recognizedText,
                       sessionId = call.request.queryParameters["sessionId"]
                   )
                   val response = chatService.processMessage(request)
                   
                   call.respond(mapOf(
                       "recognizedText" to recognizedText,
                       "response" to response
                   ))
               }
           }
       }
   }
   ```

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI** (`client/index.html`):
   - –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –≤ —á–∞—Ç
   - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Web Audio API
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –∞—É–¥–∏–æ –Ω–∞ `/api/chat/voice`

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 6: Analytics MCP —Å–µ—Ä–≤–µ—Ä

**–ó–∞–¥–∞—á–∞:** —Å–æ–∑–¥–∞—Ç—å MCP —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **Analytics MCP Server** (`mcp-servers/analytics-mcp/`):
   ```kotlin
   class AnalyticsMCPServer : BaseMCPServer() {
       override fun getTools(): List<Tool> {
           return listOf(
               Tool(
                   name = "analyze_csv",
                   description = "–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –∏–∑ CSV —Ñ–∞–π–ª–∞",
                   inputSchema = mapOf(
                       "file_path" to "string",
                       "query" to "string"
                   )
               ),
               Tool(
                   name = "analyze_json",
                   description = "–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –∏–∑ JSON —Ñ–∞–π–ª–∞",
                   inputSchema = mapOf(
                       "file_path" to "string",
                       "query" to "string"
                   )
               ),
               Tool(
                   name = "analyze_database",
                   description = "–ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –∏–∑ SQLite –±–∞–∑—ã",
                   inputSchema = mapOf(
                       "db_path" to "string",
                       "query" to "string"
                   )
               ),
               Tool(
                   name = "get_data_summary",
                   description = "–ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–¥–∫—É –ø–æ –¥–∞–Ω–Ω—ã–º",
                   inputSchema = mapOf(
                       "data_source" to "string"
                   )
               )
           )
       }
       
       override suspend fun handleToolCall(toolName: String, arguments: Map<String, Any>): ToolResult {
           return when (toolName) {
               "analyze_csv" -> analyzeCSV(
                   arguments["file_path"] as String,
                   arguments["query"] as String
               )
               "analyze_json" -> analyzeJSON(
                   arguments["file_path"] as String,
                   arguments["query"] as String
               )
               "analyze_database" -> analyzeDatabase(
                   arguments["db_path"] as String,
                   arguments["query"] as String
               )
               "get_data_summary" -> getDataSummary(
                   arguments["data_source"] as String
               )
               else -> ToolResult(success = false, error = "Unknown tool")
           }
       }
       
       private suspend fun analyzeCSV(filePath: String, query: String): ToolResult {
           // –ß—Ç–µ–Ω–∏–µ CSV, –∞–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ LLM
           val data = readCSV(filePath)
           val analysis = llmService.analyzeData(data, query)
           return ToolResult(success = true, data = analysis)
       }
   }
   ```

2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ MCP Router**:
   - –î–æ–±–∞–≤–∏—Ç—å Analytics MCP –≤ —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–µ—Ä–≤–µ—Ä–æ–≤
   - –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 7: –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π God Agent Service

**–ó–∞–¥–∞—á–∞:** —Å–æ–∑–¥–∞—Ç—å –≥–ª–∞–≤–Ω—ã–π —Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **God Agent Service** (`domain/service/GodAgentService.kt`):
   ```kotlin
   class GodAgentService(
       private val mcpRouterService: MCPRouterService,
       private val knowledgeBaseService: KnowledgeBaseService,
       private val requestRouterService: RequestRouterService,
       private val chatService: ChatService,
       private val userProfileService: UserProfileService,
       private val llmService: LLMService
   ) {
       /**
        * –ì–ª–∞–≤–Ω—ã–π –º–µ—Ç–æ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        */
       suspend fun processUserRequest(
           message: String,
           sessionId: String,
           userId: String
       ): ChatResponse {
           // 1. –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
           val userProfile = userProfileService.getUserProfile(userId)
           
           // 2. –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞
           val chatHistory = chatService.getChatHistory(sessionId)
           
           // 3. –†–æ—É—Ç–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–∞
           val routingDecision = requestRouterService.routeRequest(message, chatHistory)
           
           // 4. –í—ã–ø–æ–ª–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏—è
           val context = when (routingDecision.action) {
               RoutingAction.MCP_TOOLS -> executeMCPTools(routingDecision.tools)
               RoutingAction.RAG_SEARCH -> performRAGSearch(message, routingDecision.category)
               RoutingAction.ANALYTICS -> performAnalytics(message, routingDecision.dataSource)
               RoutingAction.DIRECT_ANSWER -> null
           }
           
           // 5. –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–º–ø—Ç —Å —É—á–µ—Ç–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
           val prompt = buildPersonalizedPrompt(
               message = message,
               context = context,
               userProfile = userProfile,
               chatHistory = chatHistory
           )
           
           // 6. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ LLM
           val response = llmService.generateResponse(prompt)
           
           // 7. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –∏—Å—Ç–æ—Ä–∏—é
           chatService.saveMessage(sessionId, message, response, userId)
           
           return ChatResponse(
               message = response,
               sources = extractSources(context),
               toolsUsed = routingDecision.tools.map { it.toolName }
           )
       }
       
       private suspend fun executeMCPTools(tools: List<ToolCall>): String {
           val results = tools.map { tool ->
               mcpRouterService.executeTool(
                   serverName = tool.server,
                   toolName = tool.tool,
                   arguments = tool.args
               )
           }
           return results.joinToString("\n") { it.data.toString() }
       }
       
       private suspend fun performRAGSearch(
           query: String,
           category: String?
       ): String {
           val chunks = knowledgeBaseService.searchInCategory(query, category)
           return chunks.joinToString("\n\n") { chunk ->
               "[${chunk.source}] ${chunk.text}"
           }
       }
       
       private suspend fun performAnalytics(
           query: String,
           dataSource: String?
       ): String {
           val result = mcpRouterService.executeTool(
               serverName = "analytics",
               toolName = "analyze_data",
               arguments = mapOf(
                   "data_source" to (dataSource ?: "default"),
                   "query" to query
               )
           )
           return result.data.toString()
       }
       
       private fun buildPersonalizedPrompt(
           message: String,
           context: String?,
           userProfile: UserProfile,
           chatHistory: List<ChatMessage>
       ): String {
           return """
           –¢—ã ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π AI-–ø–æ–º–æ—â–Ω–∏–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${userProfile.name}.
           
           –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
           - –°—Ç–∏–ª—å –æ–±—â–µ–Ω–∏—è: ${userProfile.communicationStyle}
           - –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è: ${userProfile.preferences.joinToString(", ")}
           - –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ä–∞–±–æ—Ç—ã: ${userProfile.workContext}
           
           ${if (context != null) "–ö–æ–Ω—Ç–µ–∫—Å—Ç:\n$context\n" else ""}
           
           –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞:
           ${chatHistory.takeLast(5).joinToString("\n") { "${it.role}: ${it.content}" }}
           
           –ó–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: $message
           
           –û—Ç–≤–µ—Ç—å –Ω–∞ –∑–∞–ø—Ä–æ—Å, —É—á–∏—Ç—ã–≤–∞—è –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç.
           """.trimIndent()
       }
   }
   ```

2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ ChatController**:
   ```kotlin
   class ChatController(
       private val godAgentService: GodAgentService
   ) {
       fun Application.chatRoutes() {
           route("/api/chat") {
               post("/message") {
                   val request = call.receive<ChatRequest>()
                   val response = godAgentService.processUserRequest(
                       message = request.message,
                       sessionId = request.sessionId ?: generateSessionId(),
                       userId = request.userId ?: "default"
                   )
                   call.respond(response)
               }
           }
       }
   }
   ```

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 8: UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è MCP —Å–µ—Ä–≤–µ—Ä–∞–º–∏

**–ó–∞–¥–∞—á–∞:** —Å–æ–∑–¥–∞—Ç—å UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è MCP —Å–µ—Ä–≤–µ—Ä–∞–º–∏ –∏ –±–∞–∑–æ–π –∑–Ω–∞–Ω–∏–π.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫** (`client/settings.html`):
   ```html
   <div class="settings-page">
       <h1>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ God Agent</h1>
       
       <!-- MCP –°–µ—Ä–≤–µ—Ä—ã -->
       <section class="mcp-servers">
           <h2>MCP –°–µ—Ä–≤–µ—Ä—ã (–ü–ª–∞–≥–∏–Ω—ã)</h2>
           <div id="mcpServersList"></div>
           <button onclick="addMCPServer()">–î–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä</button>
       </section>
       
       <!-- –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π -->
       <section class="knowledge-base">
           <h2>–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</h2>
           <button onclick="indexKnowledgeBase()">–ü–µ—Ä–µ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å</button>
           <div id="knowledgeBaseStats"></div>
       </section>
       
       <!-- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
       <section class="user-profile">
           <h2>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</h2>
           <form id="profileForm">
               <!-- –ü–æ–ª—è –ø—Ä–æ—Ñ–∏–ª—è -->
           </form>
       </section>
   </div>
   ```

2. **JavaScript –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** (`client/settings.js`):
   ```javascript
   async function loadMCPServers() {
       const response = await fetch('/api/mcp/servers');
       const servers = await response.json();
       
       const list = document.getElementById('mcpServersList');
       list.innerHTML = servers.map(server => `
           <div class="mcp-server-card">
               <h3>${server.name}</h3>
               <p>${server.description}</p>
               <label>
                   <input type="checkbox" 
                          ${server.enabled ? 'checked' : ''}
                          onchange="toggleMCPServer('${server.name}', this.checked)">
                   –í–∫–ª—é—á–µ–Ω
               </label>
           </div>
       `).join('');
   }
   
   async function indexKnowledgeBase() {
       const response = await fetch('/api/knowledge-base/index', {
           method: 'POST'
       });
       const result = await response.json();
       alert('–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∞!');
   }
   ```

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 9: –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

**–ó–∞–¥–∞—á–∞:** —Å–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **–ü—Ä–∏–º–µ—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤** (`knowledge-base/examples/`):
   - `projects/example-project/README.md`
   - `learning/ai-notes.md`
   - `personal/goals-2024.md`
   - `references/articles/example.md`

2. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è** (`docs/`):
   - `MCP_SERVERS.md` ‚Äî –∫–∞–∫ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ MCP —Å–µ—Ä–≤–µ—Ä—ã
   - `KNOWLEDGE_BASE.md` ‚Äî –∫–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –±–∞–∑—É –∑–Ω–∞–Ω–∏–π
   - `ANALYTICS.md` ‚Äî –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É
   - `PERSONALIZATION.md` ‚Äî –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏

3. **README.md** ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å —Å –ø–æ–ª–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** —Ñ–∏–Ω–∞–ª.

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         God Agent (–ï–¥–∏–Ω—ã–π UI)           ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ
‚îÇ  ‚îÇ   –ß–∞—Ç    ‚îÇ  ‚îÇ –ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π‚îÇ ‚îÇ–ê–Ω–∞–ª–∏—Ç–∏–∫–∞‚îÇ‚îÇ
‚îÇ  ‚îÇ (—Ç–µ–∫—Å—Ç+  ‚îÇ  ‚îÇ   (RAG)   ‚îÇ  ‚îÇ (–¥–∞–Ω–Ω—ã–µ)‚îÇ‚îÇ
‚îÇ  ‚îÇ –≥–æ–ª–æ—Å)   ‚îÇ  ‚îÇ           ‚îÇ  ‚îÇ         ‚îÇ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ              ‚îÇ
           ‚ñº              ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ  MCP Router  ‚îÇ  ‚îÇ  RAG Engine  ‚îÇ
    ‚îÇ  (–ø–ª–∞–≥–∏–Ω—ã)   ‚îÇ  ‚îÇ  (–ø–æ–∏—Å–∫)     ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ   MCP Servers (–ø–ª–∞–≥–∏–Ω—ã) ‚îÇ
    ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
    ‚îÇ ‚Ä¢ Git MCP               ‚îÇ
    ‚îÇ ‚Ä¢ Telegram MCP          ‚îÇ
    ‚îÇ ‚Ä¢ Analytics MCP         ‚îÇ
    ‚îÇ ‚Ä¢ File System MCP       ‚îÇ
    ‚îÇ ‚Ä¢ Calendar MCP          ‚îÇ
    ‚îÇ ‚Ä¢ Custom MCP...         ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ
           ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ Local LLM    ‚îÇ
    ‚îÇ   (VPS)      ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**config/server.yaml:**
```yaml
god_agent:
  enabled: true
  
  mcp_servers:
    config_path: "config/mcp-servers.yaml"
  
  knowledge_base:
    base_path: "knowledge-base"
    auto_index: true
    watch_changes: true
  
  personalization:
    enabled: true
    profile_path: "data/user-profile.json"
  
  voice:
    enabled: true
    vosk_model_path: "models/vosk-model-small-ru-0.22"
  
  local_llm:
    enabled: true
    provider: "ollama"
    base_url: "https://your-vps.com"
    model: "llama3.2"
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

1. **"–ù–∞–π–¥–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–µ–∫—Ç–µ X"**
   - RAG –∏—â–µ—Ç –≤ `knowledge-base/projects/`
   - Git MCP —á–∏—Ç–∞–µ—Ç —Ñ–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—Ç–≤–µ—Ç —Å –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏

2. **"–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –º–µ—Ç—Ä–∏–∫–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü"**
   - Analytics MCP –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç `data/analytics/metrics.csv`
   - LLM –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç—á–µ—Ç
   - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

3. **"–ù–∞–ø–æ–º–Ω–∏ –º–Ω–µ –æ –≤—Å—Ç—Ä–µ—á–µ –∑–∞–≤—Ç—Ä–∞"**
   - Calendar MCP —Å–æ–∑–¥–∞–µ—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ
   - Telegram MCP –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ

4. **"–ß—Ç–æ —è –ø–∏—Å–∞–ª –ø—Ä–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É?"**
   - RAG –∏—â–µ—Ç –≤ `knowledge-base/learning/`
   - –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã

## –†–∏—Å–∫–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- **MCP —Å–µ—Ä–≤–µ—Ä—ã:** —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
- **–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π:** —Ä–µ–≥—É–ª—è—Ä–Ω–æ –∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è:** –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã RAG –ø–æ–∏—Å–∫–∞
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ —á–µ—Ä–µ–∑ File System MCP

