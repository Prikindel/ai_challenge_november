# üß† –¢–µ–æ—Ä–∏—è: –ö–æ–º–ø–æ–∑–∏—Ü–∏—è MCP-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

## –ß—Ç–æ —Ç–∞–∫–æ–µ –∫–æ–º–ø–æ–∑–∏—Ü–∏—è MCP-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤?

**–ö–æ–º–ø–æ–∑–∏—Ü–∏—è MCP-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤** ‚Äî —ç—Ç–æ –ø–æ–¥—Ö–æ–¥, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º LLM —Å–∞–º–∞ —Ä–µ—à–∞–µ—Ç, –∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—ã–∑—ã–≤–∞—Ç—å –∏ –≤ –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–æ–∂–Ω–æ–π –∑–∞–¥–∞—á–∏. –í–º–µ—Å—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤—ã–∑–æ–≤–æ–≤, –º—ã –¥–∞—ë–º LLM –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º, –∏ –æ–Ω–∞ —Å–∞–º–∞ —Å—Ç—Ä–æ–∏—Ç "–ø–∞–π–ø–ª–∞–π–Ω" –≤—ã–∑–æ–≤–æ–≤.

### –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è:

**–ú—ã –Ω–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å ‚Äî LLM —Å–∞–º–∞ —Ä–µ—à–∞–µ—Ç.**

### –ü—Ä–∏–º–µ—Ä:

```
–ó–∞–¥–∞—á–∞: "–°–æ–±–µ—Ä–∏ –ø–µ—Ä–µ–ø–∏—Å–∫—É –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞ –∏ –æ—Ç–ø—Ä–∞–≤—å –º–Ω–µ –≤ TG –∫—Ä–∞—Ç–∫—É—é —Å–≤–æ–¥–∫—É"

–ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ–º):
1. –í—ã–∑–≤–∞—Ç—å get_chat_history()
2. –°—É–º–º–∞—Ä–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
3. –í—ã–∑–≤–∞—Ç—å send_telegram_message()

–ö–æ–º–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (–∏—Å–ø–æ–ª—å–∑—É–µ–º):
LLM —Å–∞–º–∞ —Ä–µ—à–∞–µ—Ç:
1. "–ú–Ω–µ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∫—É" ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç get_chat_history()
2. "–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ —Å—É–º–º–∞—Ä–∏–∑–∏—Ä–æ–≤–∞—Ç—å" ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏
3. "–ù—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤ Telegram" ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç send_telegram_message()
```

---

## –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –∫–æ–º–ø–æ–∑–∏—Ü–∏—è?

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:

1. **–ì–∏–±–∫–æ—Å—Ç—å** ‚Äî LLM –º–æ–∂–µ—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–¥–∞—á—É
2. **–†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å** ‚Äî –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, LLM —Å–∞–º–∞ –Ω–∞—É—á–∏—Ç—Å—è –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
3. **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å** ‚Äî LLM –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** ‚Äî LLM –º–æ–∂–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É –∏–ª–∏ –≤—ã–±—Ä–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—É—Ç—å

### –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

1. **–ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å** ‚Äî —Å–ª–æ–∂–Ω–µ–µ –æ—Ç–ª–∞–¥–∏—Ç—å, –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫
2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** ‚Äî –º–æ–∂–µ—Ç –±—ã—Ç—å –±–æ–ª—å—à–µ –≤—ã–∑–æ–≤–æ–≤, —á–µ–º –Ω—É–∂–Ω–æ
3. **–°—Ç–æ–∏–º–æ—Å—Ç—å** ‚Äî –±–æ–ª—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM = –±–æ–ª—å—à–µ —Ç–æ–∫–µ–Ω–æ–≤

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–∑–∏—Ü–∏–∏

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ "–°–æ–±–µ—Ä–∏ –ø–µ—Ä–µ–ø–∏—Å–∫—É –∏ –æ—Ç–ø—Ä–∞–≤—å –≤ TG"
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ LLMCompositionAgent ‚îÇ
‚îÇ  (—É–ø—Ä–∞–≤–ª—è–µ—Ç —Ü–∏–∫–ª–æ–º) ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îú‚îÄ‚ñ∫ LLM (—Å tools)
       ‚îÇ   ‚îÇ
       ‚îÇ   ‚îú‚îÄ‚ñ∫ tool_call: get_chat_history
       ‚îÇ   ‚îÇ
       ‚îÇ   ‚îî‚îÄ‚ñ∫ tool_call: send_telegram_message
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  MCPToolAgent       ‚îÇ
‚îÇ  (–ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç       ‚îÇ
‚îÇ   MCP ‚Üí LLM tools)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  MCPClientManager   ‚îÇ
‚îÇ  (—É–ø—Ä–∞–≤–ª—è–µ—Ç         ‚îÇ
‚îÇ   –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏       ‚îÇ
‚îÇ   MCP —Å–µ—Ä–≤–µ—Ä–∞–º–∏)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îú‚îÄ‚ñ∫ MCP Server 1 (chat-history)
       ‚îÇ   ‚îî‚îÄ‚ñ∫ get_chat_history()
       ‚îÇ
       ‚îî‚îÄ‚ñ∫ MCP Server 2 (telegram-sender)
           ‚îî‚îÄ‚ñ∫ send_telegram_message()
```

### –ü–æ—Ç–æ–∫ —Ä–∞–±–æ—Ç—ã:

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å
   ‚Üì
2. LLMCompositionAgent –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
   ‚Üì
3. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ LLM —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ–± –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ö
   ‚Üì
4. LLM –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∑–∞–¥–∞—á—É –∏ —Ä–µ—à–∞–µ—Ç –≤—ã–∑–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
   ‚Üì
5. MCPToolAgent –≤—ã–∑—ã–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
   ‚Üì
6. –†–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ LLM (—Å —É—á—ë—Ç–æ–º –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞)
   ‚Üì
7. LLM –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ —Ä–µ—à–∞–µ—Ç:
   - –í—ã–∑–≤–∞—Ç—å –µ—â—ë –æ–¥–∏–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç? ‚Üí —à–∞–≥ 4
   - –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç? ‚Üí —à–∞–≥ 8
   ‚Üì
8. –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
```

---

## –ö–∞—Å–∫–∞–¥–Ω—ã–µ –≤—ã–∑–æ–≤—ã (Cascading Tool Calls)

### –ß—Ç–æ —ç—Ç–æ?

**–ö–∞—Å–∫–∞–¥–Ω—ã–µ –≤—ã–∑–æ–≤—ã** ‚Äî —ç—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–∑–æ–≤–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –≥–¥–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–¥–Ω–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –≤—ã–∑–æ–≤–∞.

### –ü—Ä–∏–º–µ—Ä:

```
–ò—Ç–µ—Ä–∞—Ü–∏—è 1:
  LLM: "–ú–Ω–µ –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∫—É"
  ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç get_chat_history(startTime, endTime)
  ‚Üí –ø–æ–ª—É—á–∞–µ—Ç: [{"role": "user", "content": "..."}, ...]

–ò—Ç–µ—Ä–∞—Ü–∏—è 2:
  LLM: "–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ —Å—É–º–º–∞—Ä–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É –ø–µ—Ä–µ–ø–∏—Å–∫—É"
  ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç)
  ‚Üí –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç: "–°–≤–æ–¥–∫–∞: –æ–±—Å—É–∂–¥–∞–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ MCP —Å–µ—Ä–≤–µ—Ä–∞..."

–ò—Ç–µ—Ä–∞—Ü–∏—è 3:
  LLM: "–ù—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–≤–æ–¥–∫—É –≤ Telegram"
  ‚Üí –≤—ã–∑—ã–≤–∞–µ—Ç send_telegram_message(userId, summary)
  ‚Üí –ø–æ–ª—É—á–∞–µ—Ç: {"success": true, "messageId": 123}

–ò—Ç–µ—Ä–∞—Ü–∏—è 4:
  LLM: "–ó–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞, —Å–æ–æ–±—â–∞—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é"
  ‚Üí —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: "–°–æ–±—Ä–∞–ª –ø–µ—Ä–µ–ø–∏—Å–∫—É, —Å—É–º–º–∞—Ä–∏–∑–∏—Ä–æ–≤–∞–ª –∏ –æ—Ç–ø—Ä–∞–≤–∏–ª –≤ –≤–∞—à Telegram"
```

### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ü–∏–∫–ª–∞:

```kotlin
var maxIterations = 10
var conversationHistory = mutableListOf<MessageDto>()

while (maxIterations > 0) {
    maxIterations--
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –≤ LLM —Å –∏—Å—Ç–æ—Ä–∏–µ–π
    val llmResponse = aiRepository.getMessageWithTools(
        messages = conversationHistory,
        tools = availableTools
    )
    
    if (llmResponse.hasToolCall()) {
        // –í—ã–∑—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç
        val toolResult = mcpToolAgent.callTool(
            toolCall.name,
            toolCall.arguments
        )
        
        // –î–æ–±–∞–≤–ª—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é
        conversationHistory.add(assistantMessage)
        conversationHistory.add(toolResultMessage)
        
        // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ü–∏–∫–ª
        continue
    } else {
        // –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
        break
    }
}
```

---

## Function Calling –≤ LLM

### –ß—Ç–æ —ç—Ç–æ?

**Function Calling** ‚Äî —ç—Ç–æ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç LLM –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –≤—ã–∑–æ–≤ –≤–Ω–µ—à–Ω–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π/–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –≤–æ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞.

### –§–æ—Ä–º–∞—Ç (OpenAI/OpenRouter):

```json
{
  "model": "gpt-4",
  "messages": [
    {"role": "user", "content": "–°–æ–±–µ—Ä–∏ –ø–µ—Ä–µ–ø–∏—Å–∫—É –∏ –æ—Ç–ø—Ä–∞–≤—å –≤ TG"}
  ],
  "tools": [
    {
      "type": "function",
      "function": {
        "name": "get_chat_history",
        "description": "–ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø–µ—Ä–µ–ø–∏—Å–∫–∏ –∑–∞ –ø–µ—Ä–∏–æ–¥",
        "parameters": {
          "type": "object",
          "properties": {
            "startTime": {"type": "number"},
            "endTime": {"type": "number"}
          },
          "required": ["startTime", "endTime"]
        }
      }
    }
  ]
}
```

### –û—Ç–≤–µ—Ç LLM:

```json
{
  "choices": [{
    "message": {
      "role": "assistant",
      "content": null,
      "tool_calls": [{
        "id": "call_123",
        "type": "function",
        "function": {
          "name": "get_chat_history",
          "arguments": "{\"startTime\": 1234567890, \"endTime\": 1234654290}"
        }
      }]
    }
  }]
}
```

### –ü–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:

```json
{
  "messages": [
    {"role": "user", "content": "–°–æ–±–µ—Ä–∏ –ø–µ—Ä–µ–ø–∏—Å–∫—É –∏ –æ—Ç–ø—Ä–∞–≤—å –≤ TG"},
    {"role": "assistant", "content": null, "tool_calls": [...]},
    {"role": "tool", "content": "[{\"role\":\"user\",\"content\":\"...\"}]", "tool_call_id": "call_123"}
  ]
}
```

---

## –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –≤ LLM tools

### –ó–∞–¥–∞—á–∞:

MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏–º–µ—é—Ç —Å–≤–æ–π —Ñ–æ—Ä–º–∞—Ç, –∞ LLM –æ–∂–∏–¥–∞–µ—Ç —Ñ–æ—Ä–º–∞—Ç OpenAI/OpenRouter tools. –ù—É–∂–Ω–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å.

### MCP —Ñ–æ—Ä–º–∞—Ç:

```kotlin
data class MCPTool(
    val name: String,
    val description: String,
    val inputSchema: JsonObject  // JSON Schema
)
```

### LLM —Ñ–æ—Ä–º–∞—Ç:

```kotlin
data class LLMTool(
    val type: String = "function",
    val function: LLMFunction
)

data class LLMFunction(
    val name: String,
    val description: String,
    val parameters: JsonObject  // JSON Schema
)
```

### –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ:

```kotlin
fun mcpToolToLLMTool(mcpTool: MCPTool): LLMTool {
    return LLMTool(
        type = "function",
        function = LLMFunction(
            name = mcpTool.name,
            description = mcpTool.description,
            parameters = mcpTool.inputSchema
        )
    )
}
```

---

## –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–µ–π –¥–∏–∞–ª–æ–≥–∞

### –ó–∞—á–µ–º –Ω—É–∂–Ω–∞ –∏—Å—Ç–æ—Ä–∏—è?

LLM –¥–æ–ª–∂–Ω–∞ –≤–∏–¥–µ—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤—ã–∑–æ–≤–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, —á—Ç–æ–±—ã:
- –ü–æ–Ω–∏–º–∞—Ç—å, –∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —É–∂–µ –±—ã–ª–∏ –≤—ã–∑–≤–∞–Ω—ã
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤—ã–∑–æ–≤–æ–≤
- –ü—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏—Å—Ç–æ—Ä–∏–∏:

```
[
  {"role": "user", "content": "–°–æ–±–µ—Ä–∏ –ø–µ—Ä–µ–ø–∏—Å–∫—É –∏ –æ—Ç–ø—Ä–∞–≤—å –≤ TG"},
  {"role": "assistant", "content": null, "tool_calls": [{"name": "get_chat_history", ...}]},
  {"role": "tool", "content": "[{...}]", "tool_call_id": "call_123"},
  {"role": "assistant", "content": null, "tool_calls": [{"name": "send_telegram_message", ...}]},
  {"role": "tool", "content": "{\"success\": true}", "tool_call_id": "call_456"},
  {"role": "assistant", "content": "–°–æ–±—Ä–∞–ª –ø–µ—Ä–µ–ø–∏—Å–∫—É, —Å—É–º–º–∞—Ä–∏–∑–∏—Ä–æ–≤–∞–ª –∏ –æ—Ç–ø—Ä–∞–≤–∏–ª –≤ –≤–∞—à Telegram"}
]
```

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞:

- –°–æ—Ö—Ä–∞–Ω—è–π —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–æ–æ–±—â–µ–Ω–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, 50)
- –ò–ª–∏ –æ–≥—Ä–∞–Ω–∏—á—å –ø–æ —Ç–æ–∫–µ–Ω–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø–æ—Å–ª–µ–¥–Ω–∏–µ 4000 —Ç–æ–∫–µ–Ω–æ–≤)
- –≠—Ç–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ LLM

---

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### –¢–∏–ø—ã –æ—à–∏–±–æ–∫:

1. **–û—à–∏–±–∫–∞ –≤—ã–∑–æ–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞** (–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω, –Ω–µ–≤–µ—Ä–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
2. **–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞** (–Ω–∞–ø—Ä–∏–º–µ—Ä, Telegram API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)
3. **–û—à–∏–±–∫–∞ LLM** (—Ç–∞–π–º–∞—É—Ç, –ø—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤)
4. **–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª** (LLM –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)

### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏:

#### 1. –ü–µ—Ä–µ–¥–∞—á–∞ –æ—à–∏–±–∫–∏ –≤ LLM:

```kotlin
try {
    val result = mcpToolAgent.callTool(toolName, arguments)
    conversationHistory.add(toolResultMessage(result))
} catch (e: Exception) {
    conversationHistory.add(toolResultMessage("""
        {
            "success": false,
            "error": "${e.message}"
        }
    """))
}
```

LLM —É–≤–∏–¥–∏—Ç –æ—à–∏–±–∫—É –∏ —Ä–µ—à–∏—Ç, —á—Ç–æ –¥–µ–ª–∞—Ç—å:
- –ü–æ–≤—Ç–æ—Ä–∏—Ç—å –ø–æ–ø—ã—Ç–∫—É
- –í—ã–±—Ä–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –ø—É—Ç—å
- –°–æ–æ–±—â–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –æ–± –æ—à–∏–±–∫–µ

#### 2. –ó–∞—â–∏—Ç–∞ –æ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞:

```kotlin
var maxIterations = 10

while (maxIterations > 0) {
    maxIterations--
    // ...
}

if (maxIterations == 0) {
    throw Exception("–ü—Ä–µ–≤—ã—à–µ–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Ç–µ—Ä–∞—Ü–∏–π")
}
```

#### 3. –¢–∞–π–º–∞—É—Ç—ã:

```kotlin
val result = withTimeout(30.seconds) {
    mcpToolAgent.callTool(toolName, arguments)
}
```

---

## –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ü—Ä–æ–±–ª–µ–º—ã:

1. **–ú–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM** ‚Äî –∫–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ —Ç—Ä–µ–±—É–µ—Ç –Ω–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞
2. **–î–æ–ª–≥–æ–µ –æ–∂–∏–¥–∞–Ω–∏–µ** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∂–¥—ë—Ç, –ø–æ–∫–∞ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –≤—Å—è —Ü–µ–ø–æ—á–∫–∞
3. **–í—ã—Å–æ–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å** ‚Äî –º–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–æ–≤ –Ω–∞ –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–∞

### –†–µ—à–µ–Ω–∏—è:

#### 1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:

```kotlin
// –ö—ç—à–∏—Ä—É–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–∑–æ–≤–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
val cache = mutableMapOf<String, String>()

fun callToolWithCache(toolName: String, arguments: JsonObject): String {
    val cacheKey = "$toolName:${arguments.toString()}"
    return cache.getOrPut(cacheKey) {
        mcpToolAgent.callTool(toolName, arguments)
    }
}
```

#### 2. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã (–µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ):

```kotlin
// –ï—Å–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã, –º–æ–∂–Ω–æ –≤—ã–∑–≤–∞—Ç—å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
val results = listOf(
    async { callTool("tool1", args1) },
    async { callTool("tool2", args2) }
).awaitAll()
```

#### 3. Streaming –æ—Ç–≤–µ—Ç–æ–≤ (–¥–ª—è –±—É–¥—É—â–µ–≥–æ):

```kotlin
// –û—Ç–ø—Ä–∞–≤–ª—è–π —á–∞—Å—Ç–∏—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á–µ—Ä–µ–∑ WebSocket
flow {
    emit("–ê–Ω–∞–ª–∏–∑–∏—Ä—É—é –∑–∞–¥–∞—á—É...")
    emit("–í—ã–∑—ã–≤–∞—é get_chat_history...")
    emit("–°—É–º–º–∞—Ä–∏–∑–∏—Ä—É—é...")
    emit("–û—Ç–ø—Ä–∞–≤–ª—è—é –≤ Telegram...")
    emit("–ì–æ—Ç–æ–≤–æ!")
}
```

---

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (lesson-12):

```kotlin
// –ú—ã –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
fun generateSummary() {
    val messages = getChatHistory()
    val summary = summarize(messages)
    sendToTelegram(summary)
}
```

**–ü–ª—é—Å—ã:**
- –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å
- –õ–µ–≥–∫–æ –æ—Ç–ª–∞–¥–∏—Ç—å
- –ú–µ–Ω—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM

**–ú–∏–Ω—É—Å—ã:**
- –ù–µ–≥–∏–±–∫–æ—Å—Ç—å
- –°–ª–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- –ù—É–∂–Ω–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ö–æ–º–ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (lesson-13):

```kotlin
// LLM —Å–∞–º–∞ —Ä–µ—à–∞–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
fun processUserMessage(message: String) {
    // –î–∞—ë–º LLM –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º
    val tools = mcpToolAgent.getLLMTools()
    
    // LLM —Å–∞–º–∞ —Ä–µ—à–∞–µ—Ç, —á—Ç–æ –≤—ã–∑—ã–≤–∞—Ç—å
    while (hasToolCall) {
        val toolCall = llmResponse.toolCall
        val result = callTool(toolCall)
        // –ü–µ—Ä–µ–¥–∞—ë–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞—Ç–Ω–æ LLM
    }
}
```

**–ü–ª—é—Å—ã:**
- –ì–∏–±–∫–æ—Å—Ç—å
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã
- LLM –º–æ–∂–µ—Ç –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è

**–ú–∏–Ω—É—Å—ã:**
- –ù–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç—å
- –ë–æ–ª—å—à–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ LLM
- –°–ª–æ–∂–Ω–µ–µ –æ—Ç–ª–∞–¥–∏—Ç—å

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç:

–ß—ë—Ç–∫–æ –æ–ø–∏—à–∏ LLM, –∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã –∏ –∫–∞–∫ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:

```
–¢—ã ‚Äî –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º:
- get_chat_history: –ø–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∫—É –∑–∞ –ø–µ—Ä–∏–æ–¥
- send_telegram_message: –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram

–¢—ã –º–æ–∂–µ—à—å –≤—ã–∑—ã–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á.
–í—Å–µ–≥–¥–∞ –¥–∞–≤–∞–π –ø–æ–Ω—è—Ç–Ω—ã–π —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.
```

### 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:

–ü—Ä–æ–≤–µ—Ä—è–π –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:

```kotlin
fun validateToolCall(toolCall: ToolCall): Boolean {
    return when (toolCall.name) {
        "get_chat_history" -> {
            toolCall.arguments.has("startTime") && 
            toolCall.arguments.has("endTime")
        }
        "send_telegram_message" -> {
            toolCall.arguments.has("userId") && 
            toolCall.arguments.has("message")
        }
        else -> false
    }
}
```

### 3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

–õ–æ–≥–∏—Ä—É–π –≤—Å–µ –≤—ã–∑–æ–≤—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏:

```kotlin
logger.info("LLM requested tool: ${toolCall.name} with args: ${toolCall.arguments}")
logger.info("Tool result: $result")
```

### 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

–°–æ–∑–¥–∞–π —Ç–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–¥–∞—á:

```kotlin
@Test
fun testCascadingToolCalls() {
    val response = agent.processUserMessage(
        "–°–æ–±–µ—Ä–∏ –ø–µ—Ä–µ–ø–∏—Å–∫—É –∑–∞ 24 —á–∞—Å–∞ –∏ –æ—Ç–ø—Ä–∞–≤—å –≤ TG"
    )
    
    assertTrue(response.toolCalls.contains("get_chat_history"))
    assertTrue(response.toolCalls.contains("send_telegram_message"))
    assertNotNull(response.message)
}
```

---

## –í—ã–≤–æ–¥—ã

1. **–ö–æ–º–ø–æ–∑–∏—Ü–∏—è MCP-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤** ‚Äî –º–æ—â–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥–∏–±–∫–∏—Ö —Å–∏—Å—Ç–µ–º
2. **LLM —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é** ‚Äî –º—ã –Ω–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä—É–µ–º, –∞ –¥–∞—ë–º –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º
3. **–ö–∞—Å–∫–∞–¥–Ω—ã–µ –≤—ã–∑–æ–≤—ã** ‚Äî LLM –º–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö
4. **Function Calling** ‚Äî –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç LLM –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –≤—ã–∑–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
5. **–ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞** ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –ø—Ä–∏–Ω—è—Ç–∏—è —Ä–µ—à–µ–Ω–∏–π
6. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** ‚Äî –ø–µ—Ä–µ–¥–∞–≤–∞–π –æ—à–∏–±–∫–∏ –≤ LLM, –ø—É—Å—Ç—å –æ–Ω–∞ —Ä–µ—à–∞–µ—Ç, —á—Ç–æ –¥–µ–ª–∞—Ç—å
7. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –≤—ã–∑–æ–≤—ã, streaming –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [OpenAI Function Calling](https://platform.openai.com/docs/guides/function-calling)
- [OpenRouter API Documentation](https://openrouter.ai/docs)
- [MCP Protocol Specification](https://modelcontextprotocol.io/)
- [Kotlin Coroutines Guide](https://kotlinlang.org/docs/coroutines-guide.html)

