<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ß–∞—Ç —Å RAG</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üî• –î–µ–Ω—å 20. –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞</h1>
            <p>–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å RAG –∏ MCP –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π</p>
        </header>
        
        <main>
            <nav class="tabs">
                <a href="index.html" class="tab">–ì–ª–∞–≤–Ω–∞—è</a>
                <a href="indexing.html" class="tab">–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è</a>
                <a href="search.html" class="tab">–ü–æ–∏—Å–∫</a>
                <a href="rag-compare.html" class="tab">–°—Ä–∞–≤–Ω–µ–Ω–∏–µ RAG</a>
                <a href="citation-test.html" class="tab">–¢–µ—Å—Ç —Ü–∏—Ç–∞—Ç</a>
                <a href="chat.html" class="tab active">–ß–∞—Ç</a>
            </nav>
            
            <div class="chat-layout">
                <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å —Å–µ—Å—Å–∏—è–º–∏ -->
                <div class="chat-sidebar">
                    <div class="chat-sidebar-header">
                        <h3>–°–µ—Å—Å–∏–∏ —á–∞—Ç–∞</h3>
                        <button class="btn-new-session" onclick="createNewSession()" title="–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Å–µ—Å—Å–∏—é">
                            <span>+</span>
                        </button>
                    </div>
                    <div class="chat-sessions-list" id="sessionsList">
                        <div class="sessions-loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Å—Å–∏–π...</div>
                    </div>
                </div>
                
                <!-- –û—Å–Ω–æ–≤–Ω–∞—è –æ–±–ª–∞—Å—Ç—å —á–∞—Ç–∞ -->
                <div class="chat-container">
                    <!-- –û–±–ª–∞—Å—Ç—å –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π -->
                    <div class="chat-messages" id="chatMessages">
                        <div class="chat-welcome">
                            <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ —á–∞—Ç!</h2>
                            <p>–ó–∞–¥–∞–π—Ç–µ –≤–æ–ø—Ä–æ—Å, –∏ —è –Ω–∞–π–¥—É –æ—Ç–≤–µ—Ç –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.</p>
                            <div class="chat-help-hint">
                                <p><strong>üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞:</strong> –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É <code>/help [–≤–æ–ø—Ä–æ—Å]</code> –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –æ –ø—Ä–æ–µ–∫—Ç–µ. –ù–∞–ø—Ä–∏–º–µ—Ä:</p>
                                <ul>
                                    <li><code>/help</code> ‚Äî –æ–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ</li>
                                    <li><code>/help –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç API?</code> ‚Äî –≤–æ–ø—Ä–æ—Å –æ–± API</li>
                                    <li><code>/help –∫–∞–∫–∞—è —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö?</code> ‚Äî –≤–æ–ø—Ä–æ—Å –æ —Å—Ö–µ–º–µ</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –û–±–ª–∞—Å—Ç—å –≤–≤–æ–¥–∞ —Å–æ–æ–±—â–µ–Ω–∏—è -->
                    <div class="chat-input-container">
                        <div class="chat-settings">
                            <div class="chat-setting-item">
                                <label for="ragStrategy">–°—Ç—Ä–∞—Ç–µ–≥–∏—è RAG:</label>
                                <select id="ragStrategy" title="–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –¥–ª—è RAG">
                                    <option value="threshold">Threshold (–ø–æ—Ä–æ–≥–æ–≤—ã–π —Ñ–∏–ª—å—Ç—Ä, –±–µ–∑ LLM)</option>
                                    <option value="reranker" selected>Reranker (LLM —Ä–µ—Ä–∞–Ω–∫–∏–Ω–≥)</option>
                                    <option value="hybrid">Hybrid (threshold + reranker)</option>
                                    <option value="none">–ë–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏</option>
                                </select>
                            </div>
                            <div class="chat-setting-item">
                                <label for="historyStrategy">–°—Ç—Ä–∞—Ç–µ–≥–∏—è –∏—Å—Ç–æ—Ä–∏–∏:</label>
                                <select id="historyStrategy" title="–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏—é –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞">
                                    <option value="sliding">Sliding Window (–ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–æ–æ–±—â–µ–Ω–∏–π)</option>
                                    <option value="token_limit">Token Limit (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ —Ç–æ–∫–µ–Ω–∞–º)</option>
                                    <option value="none">–ë–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (–≤—Å—è –∏—Å—Ç–æ—Ä–∏—è)</option>
                                </select>
                            </div>
                        </div>
                        <div class="chat-input-wrapper">
                            <textarea 
                                id="messageInput" 
                                placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ /help [–≤–æ–ø—Ä–æ—Å] –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –æ –ø—Ä–æ–µ–∫—Ç–µ..." 
                                rows="2"
                                maxlength="2000"
                            ></textarea>
                            <button id="sendButton" onclick="sendMessage()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                        </div>
                        <div class="chat-status" id="chatStatus"></div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <!-- Marked.js –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ Markdown -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="app.js"></script>
    <script src="citations.js"></script>
    <script src="document-viewer.js"></script>
    <script src="chat.js"></script>
</body>
</html>

