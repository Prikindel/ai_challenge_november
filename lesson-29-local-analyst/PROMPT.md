# –ü—Ä–æ–º–ø—Ç –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: üî• –î–µ–Ω—å 29. –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫

–¢—ã ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, —Å–æ–∑–¥–∞—é—â–∏–π —É—Ä–æ–∫ ¬´üî• –î–µ–Ω—å 29. –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏—Ç–∏–∫¬ª –≤ –º–æ–¥—É–ª–µ `lesson-29-local-analyst`. –ë–∞–∑–∞ –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ –î–Ω—è 24 (–∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –æ—Ç–∑—ã–≤–æ–≤ —Å –ë–î), –Ω–æ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—É—é LLM –∏–∑ –î–Ω—è 28 (VPS) –≤–º–µ—Å—Ç–æ –æ–±–ª–∞—á–Ω–æ–π.

## üéØ –¶–µ–ª—å —É—Ä–æ–∫–∞

–°–æ–∑–¥–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å CSV, JSON, –ª–æ–≥–∏ –ø—Ä–æ–µ–∫—Ç–∞ –∏ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã ("–∫–∞–∫–∞—è –æ—à–∏–±–∫–∞ —á–∞—â–µ –≤—Å–µ–≥–æ?", "–≥–¥–µ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ç–µ—Ä—è–µ—Ç—Å—è?") –∏—Å–ø–æ–ª—å–∑—É—è –ª–æ–∫–∞–ª—å–Ω—É—é LLM –Ω–∞ VPS.

### –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è

```
–î–∞–Ω–Ω—ã–µ (CSV/JSON/–ª–æ–≥–∏) ‚Üí –ó–∞–≥—Ä—É–∑–∫–∞ –≤ –ë–î ‚Üí –ê–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ –ª–æ–∫–∞–ª—å–Ω—É—é LLM ‚Üí –û—Ç–≤–µ—Ç—ã –Ω–∞ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã
```

**–°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞:**
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –¥–∞–Ω–Ω—ã—Ö –∏–∑ CSV, JSON, –ª–æ–≥–æ–≤
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –ë–î (SQLite)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é LLM (VPS) –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã –Ω–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–º —è–∑—ã–∫–µ
- –†–∞–±–æ—Ç–∞—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –ª–æ–∫–∞–ª—å–Ω–æ (–±–µ–∑ –æ–±–ª–∞—á–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤)

---

## üìã –ü–æ—ç—Ç–∞–ø–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã)

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:**
- –ö–∞–∂–¥—ã–π –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–π —à–∞–≥ = –æ—Ç–¥–µ–ª—å–Ω—ã–π git-–∫–æ–º–º–∏—Ç.
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ **–°–¢–û–ü**, –ø–æ–∫–∞–∂–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏ –¥–æ–∂–¥–∏—Å—å ¬´–æ–∫, –ø—Ä–æ–¥–æ–ª–∂–∞–π¬ª.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º –¥–µ–ª–∞–µ—Ç merge/commit –¥–∞–ª–µ–µ.

---

### –ö–æ–º–º–∏—Ç 1: –í—ã–±–æ—Ä –±–∞–∑–æ–≤–æ–≥–æ —É—Ä–æ–∫–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞

**–ó–∞–¥–∞—á–∞:** –≤–∑—è—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —É—Ä–æ–∫–∞ 24 –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞.

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞ –∏–∑ `lesson-24-real-task` –≤ `lesson-29-local-analyst/`
2. –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è:
   - –ü–∞–ø–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞, Gradle settings, package references
   - –í—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è ‚Üí `lesson-29-local-analyst`
   - ¬´–î–µ–Ω—å 24¬ª ‚Üí ¬´–î–µ–Ω—å 29¬ª
3. –£–¥–∞–ª–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç OpenRouter/OpenAI
4. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–π LLM (VPS)
5. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è, –ø–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞.

---

### –ö–æ–º–º–∏—Ç 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ª–æ–∫–∞–ª—å–Ω–æ–π LLM –∏–∑ —É—Ä–æ–∫–∞ 28

**–ó–∞–¥–∞—á–∞:** –∑–∞–º–µ–Ω–∏—Ç—å –æ–±–ª–∞—á–Ω—É—é LLM –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—É—é LLM —Å VPS.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏** (`config/server.yaml`):
   ```yaml
   localLLM:
     enabled: true
     provider: "ollama"
     baseUrl: "https://185.31.165.227"  # VPS –∏–∑ —É—Ä–æ–∫–∞ 28
     model: "llama3.2"
     apiPath: "/api/generate"
     timeout: 120000
     auth:
       type: "basic"
       user: "user"
       password: "pass"
     parameters:
       temperature: 0.3  # –ù–∏–∑–∫–∞—è –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
       maxTokens: 2048
       contextWindow: 4096
   ```

2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ LLMService** (`domain/service/LLMService.kt`):
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `LocalLLMClient` –≤–º–µ—Å—Ç–æ OpenRouter
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ —É—Ä–æ–∫–∞ 28
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —à–∞–±–ª–æ–Ω `analyst` –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤

3. **–°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** (`domain/service/PromptTemplateService.kt`):
   ```kotlin
   PromptTemplate(
       id = "analyst",
       name = "–ê–Ω–∞–ª–∏—Ç–∏–∫ –¥–∞–Ω–Ω—ã—Ö",
       description = "–î–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã",
       template = """–¢—ã –∞–Ω–∞–ª–∏—Ç–∏–∫ –¥–∞–Ω–Ω—ã—Ö. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç–≤–µ—á–∞–π –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —Ç–æ—á–Ω–æ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ.

–î–∞–Ω–Ω—ã–µ:
{data}

–í–æ–ø—Ä–æ—Å: {user_message}

–û—Ç–≤–µ—Ç (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, —Å —Ü–∏—Ñ—Ä–∞–º–∏ –∏ —Ñ–∞–∫—Ç–∞–º–∏):"""
   )
   ```

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 3: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ CSV —Ñ–∞–π–ª–æ–≤

**–ó–∞–¥–∞—á–∞:** –¥–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏ –ø–∞—Ä—Å–∏—Ç—å CSV —Ñ–∞–π–ª—ã.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö** (`domain/model/DataRecord.kt`):
   ```kotlin
   data class DataRecord(
       val id: String,
       val source: String,  // "csv", "json", "logs"
       val sourceFile: String,  // –∏–º—è —Ñ–∞–π–ª–∞
       val data: Map<String, Any>,  // –∫–ª—é—á-–∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –¥–∞–Ω–Ω—ã—Ö
       val timestamp: Long = System.currentTimeMillis()
   )
   ```

2. **CSV –ø–∞—Ä—Å–µ—Ä** (`data/parser/CsvParser.kt`):
   ```kotlin
   class CsvParser {
       fun parse(file: ByteArray, filename: String): List<DataRecord> {
           // –ü–∞—Ä—Å–∏–Ω–≥ CSV —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, opencsv)
           // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ DataRecord
       }
   }
   ```

3. **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–∞–Ω–Ω—ã—Ö** (`data/repository/DataRepository.kt`):
   ```kotlin
   interface DataRepository {
       suspend fun saveRecords(records: List<DataRecord>)
       suspend fun getRecords(limit: Int = 1000): List<DataRecord>
       suspend fun getRecordsBySource(source: String): List<DataRecord>
       suspend fun searchRecords(query: String): List<DataRecord>
   }
   ```

4. **API endpoint** (`presentation/controller/DataController.kt`):
   ```kotlin
   post("/api/data/upload/csv") {
       val multipart = call.receiveMultipart()
       // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ CSV
       // –ü–∞—Ä—Å–∏–Ω–≥ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
   }
   ```

5. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î** (`data/repository/Database.kt`):
   - –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `data_records` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 4: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ JSON —Ñ–∞–π–ª–æ–≤

**–ó–∞–¥–∞—á–∞:** –¥–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏ –ø–∞—Ä—Å–∏—Ç—å JSON —Ñ–∞–π–ª—ã.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **JSON –ø–∞—Ä—Å–µ—Ä** (`data/parser/JsonParser.kt`):
   ```kotlin
   class JsonParser {
       fun parse(file: ByteArray, filename: String): List<DataRecord> {
           // –ü–∞—Ä—Å–∏–Ω–≥ JSON (–º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤ –∏–ª–∏ –æ–¥–∏–Ω –æ–±—ä–µ–∫—Ç)
           // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ DataRecord
       }
   }
   ```

2. **API endpoint** (`presentation/controller/DataController.kt`):
   ```kotlin
   post("/api/data/upload/json") {
       val multipart = call.receiveMultipart()
       // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ JSON
       // –ü–∞—Ä—Å–∏–Ω–≥ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
   }
   ```

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 5: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–æ–≤

**–ó–∞–¥–∞—á–∞:** –¥–æ–±–∞–≤–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∂–∞—Ç—å –∏ –ø–∞—Ä—Å–∏—Ç—å –ª–æ–≥–∏ –ø—Ä–æ–µ–∫—Ç–∞.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **–ü–∞—Ä—Å–µ—Ä –ª–æ–≥–æ–≤** (`data/parser/LogParser.kt`):
   ```kotlin
   class LogParser {
       fun parse(file: ByteArray, filename: String): List<DataRecord> {
           // –ü–∞—Ä—Å–∏–Ω–≥ –ª–æ–≥–æ–≤ (—Ä–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: JSON logs, plain text logs)
           // –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ: timestamp, level, message, error –∏ —Ç.–¥.
           // –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ DataRecord
       }
       
       private fun parseLogLine(line: String): Map<String, Any>? {
           // –ü–∞—Ä—Å–∏–Ω–≥ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –ª–æ–≥–∞
       }
   }
   ```

2. **API endpoint** (`presentation/controller/DataController.kt`):
   ```kotlin
   post("/api/data/upload/logs") {
       val multipart = call.receiveMultipart()
       // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–æ–≤
       // –ü–∞—Ä—Å–∏–Ω–≥ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
   }
   ```

3. **–ú–æ–¥–µ–ª—å –ª–æ–≥–∞** (`domain/model/LogRecord.kt`):
   ```kotlin
   data class LogRecord(
       val timestamp: String,
       val level: String,  // ERROR, WARN, INFO, DEBUG
       val message: String,
       val error: String? = null,
       val stackTrace: String? = null
   )
   ```

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 6: –°–µ—Ä–≤–∏—Å –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö

**–ó–∞–¥–∞—á–∞:** —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–º–æ—â—å—é –ª–æ–∫–∞–ª—å–Ω–æ–π LLM.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **–°–µ—Ä–≤–∏—Å –∞–Ω–∞–ª–∏–∑–∞** (`domain/service/DataAnalysisService.kt`):
   ```kotlin
   class DataAnalysisService(
       private val dataRepository: DataRepository,
       private val llmService: LLMService
   ) {
       suspend fun analyzeQuestion(
           question: String,
           source: String? = null,
           limit: Int = 1000
       ): String {
           // 1. –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î
           val records = if (source != null) {
               dataRepository.getRecordsBySource(source)
           } else {
               dataRepository.getRecords(limit)
           }
           
           // 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è LLM
           val dataSummary = prepareDataSummary(records)
           
           // 3. –ó–∞–ø—Ä–æ—Å–∏—Ç—å –∞–Ω–∞–ª–∏–∑ —É LLM
           return llmService.generateResponse(
               userMessage = question,
               context = dataSummary,
               templateId = "analyst"
           )
       }
       
       private fun prepareDataSummary(records: List<DataRecord>): String {
           // –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –ø—Ä–∏–º–µ—Ä—ã, –ø–∞—Ç—Ç–µ—Ä–Ω—ã
           // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è LLM
       }
   }
   ```

2. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö** (`domain/service/DataStatisticsService.kt`):
   ```kotlin
   class DataStatisticsService {
       fun calculateStatistics(records: List<DataRecord>): DataStatistics {
           // –ü–æ–¥—Å—á—ë—Ç: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π, —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è, —á–∞—Å—Ç–æ—Ç—ã
           // –î–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö (CSV, JSON, –ª–æ–≥–∏)
       }
   }
   ```

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 7: API –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤

**–ó–∞–¥–∞—á–∞:** —Å–æ–∑–¥–∞—Ç—å API endpoint –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤ –Ω–∞ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **API endpoint** (`presentation/controller/AnalysisController.kt`):
   ```kotlin
   post("/api/analyze") {
       val request = call.receive<AnalysisRequest>()
       val answer = dataAnalysisService.analyzeQuestion(
           question = request.question,
           source = request.source,
           limit = request.limit ?: 1000
       )
       call.respond(AnalysisResponse(
           question = request.question,
           answer = answer,
           source = request.source,
           recordsCount = records.size
       ))
   }
   ```

2. **–ú–æ–¥–µ–ª–∏ –∑–∞–ø—Ä–æ—Å–∞/–æ—Ç–≤–µ—Ç–∞** (`presentation/dto/AnalysisDto.kt`):
   ```kotlin
   data class AnalysisRequest(
       val question: String,
       val source: String? = null,  // "csv", "json", "logs"
       val limit: Int? = null
   )
   
   data class AnalysisResponse(
       val question: String,
       val answer: String,
       val source: String?,
       val recordsCount: Int
   )
   ```

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 8: UI –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –≤–æ–ø—Ä–æ—Å–æ–≤

**–ó–∞–¥–∞—á–∞:** —Å–æ–∑–¥–∞—Ç—å UI –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–¥–∞–≤–∞–Ω–∏—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **HTML** (`client/index.html`):
   - –°–µ–∫—Ü–∏—è "–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö" —Å –≤—ã–±–æ—Ä–æ–º —Ç–∏–ø–∞ (CSV, JSON, –ª–æ–≥–∏)
   - –§–æ—Ä–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–∞
   - –°–ø–∏—Å–æ–∫ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
   - –°–µ–∫—Ü–∏—è "–ê–Ω–∞–ª–∏–∑" —Å –ø–æ–ª–µ–º –¥–ª—è –≤–æ–ø—Ä–æ—Å–∞
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤

2. **JavaScript** (`client/app.js`):
   - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ drag-and-drop –∏–ª–∏ –≤—ã–±–æ—Ä
   - –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –û—Ç–ø—Ä–∞–≤–∫–∞ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

3. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–Ω–∞–ª–∏–∑–∞** (`client/analysis.html`):
   - –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–¥–∞–≤–∞–Ω–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤
   - –ò—Å—Ç–æ—Ä–∏—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
   - –§–∏–ª—å—Ç—Ä—ã –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É –¥–∞–Ω–Ω—ã—Ö

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 9: –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–æ–ø—Ä–æ—Å—ã

**–ó–∞–¥–∞—á–∞:** –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ —É–ª—É—á—à–∏—Ç—å –∞–Ω–∞–ª–∏–∑.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **–ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤** (`domain/model/AnalyticQuestions.kt`):
   ```kotlin
   object AnalyticQuestions {
       val examples = listOf(
           "–ö–∞–∫–∞—è –æ—à–∏–±–∫–∞ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —á–∞—â–µ –≤—Å–µ–≥–æ?",
           "–ì–¥–µ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ç–µ—Ä—è–µ—Ç—Å—è?",
           "–ö–∞–∫–æ–π –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ —Å–∞–º—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π?",
           "–ö–∞–∫–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å –≤ –¥–∞–Ω–Ω—ã—Ö?",
           "–ö–∞–∫–∏–µ —Ç–æ–ø-5 –ø—Ä–æ–±–ª–µ–º –ø–æ —á–∞—Å—Ç–æ—Ç–µ?",
           "–ï—Å—Ç—å –ª–∏ —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å –≤ –¥–∞–Ω–Ω—ã—Ö?",
           "–ö–∞–∫–∏–µ –∞–Ω–æ–º–∞–ª–∏–∏ –º–æ–∂–Ω–æ –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å?"
       )
   }
   ```

2. **–£–ª—É—á—à–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑** (`domain/service/DataAnalysisService.kt`):
   - –†–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–∏–ø–∞ –≤–æ–ø—Ä–æ—Å–∞ (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –ø–∞—Ç—Ç–µ—Ä–Ω—ã, –∞–Ω–æ–º–∞–ª–∏–∏)
   - –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤
   - –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (—Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã, —Å–ø–∏—Å–∫–∏)

3. **UI** (`client/analysis.html`):
   - –ö–Ω–æ–ø–∫–∏ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –≤–æ–ø—Ä–æ—Å–æ–≤
   - –ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 10: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö

**–ó–∞–¥–∞—á–∞:** —Å–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ –ø—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –°–æ–∑–¥–∞—Ç—å `DATA_FORMATS.md`:
   - –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ (CSV, JSON, –ª–æ–≥–∏)
   - –ü—Ä–∏–º–µ—Ä—ã —Ñ–∞–π–ª–æ–≤
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –¥–∞–Ω–Ω—ã—Ö

2. –°–æ–∑–¥–∞—Ç—å `examples/` –ø–∞–ø–∫—É —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏:
   - `example.csv` ‚Äî –ø—Ä–∏–º–µ—Ä CSV –¥–∞–Ω–Ω—ã—Ö
   - `example.json` ‚Äî –ø—Ä–∏–º–µ—Ä JSON –¥–∞–Ω–Ω—ã—Ö
   - `example.log` ‚Äî –ø—Ä–∏–º–µ—Ä –ª–æ–≥–æ–≤

3. –û–±–Ω–æ–≤–∏—Ç—å `README.md`:
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–≥—Ä—É–∑–∫–µ –¥–∞–Ω–Ω—ã—Ö
   - –ü—Ä–∏–º–µ—Ä—ã –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
   - –û–ø–∏—Å–∞–Ω–∏–µ —Ä–∞–±–æ—Ç—ã —Å –ª–æ–∫–∞–ª—å–Ω–æ–π LLM

4. –°–æ–∑–¥–∞—Ç—å `ANALYTIC_EXAMPLES.md`:
   - –ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
   - –û–∂–∏–¥–∞–µ–º—ã–µ –æ—Ç–≤–µ—Ç—ã
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–µ –≤–æ–ø—Ä–æ—Å–æ–≤

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** —Ñ–∏–Ω–∞–ª.

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö

**CSV:**
- –ü–µ—Ä–≤–∞—è —Å—Ç—Ä–æ–∫–∞ ‚Äî –∑–∞–≥–æ–ª–æ–≤–∫–∏
- –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å: –∑–∞–ø—è—Ç–∞—è –∏–ª–∏ —Ç–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π
- –ö–æ–¥–∏—Ä–æ–≤–∫–∞: UTF-8

**JSON:**
- –ú–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤: `[{...}, {...}]`
- –û–¥–∏–Ω –æ–±—ä–µ–∫—Ç: `{...}`
- –í–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è

**–õ–æ–≥–∏:**
- JSON –ª–æ–≥–∏: `{"timestamp": "...", "level": "ERROR", "message": "..."}`
- Plain text –ª–æ–≥–∏: `2024-01-01 ERROR: message`
- –†–∞–∑–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã –ª–æ–≥–æ–≤ (log4j, winston, –∏ —Ç.–¥.)

### –ü—Ä–∏–º–µ—Ä—ã –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤

**–î–ª—è –ª–æ–≥–æ–≤:**
- "–ö–∞–∫–∞—è –æ—à–∏–±–∫–∞ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è —á–∞—â–µ –≤—Å–µ–≥–æ?"
- "–í –∫–∞–∫–æ–µ –≤—Ä–µ–º—è –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –æ—à–∏–±–æ–∫?"
- "–ö–∞–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –æ—à–∏–±–æ–∫?"

**–î–ª—è CSV/JSON:**
- "–ì–¥–µ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ç–µ—Ä—è–µ—Ç—Å—è?"
- "–ö–∞–∫–æ–π –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ —Å–∞–º—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π?"
- "–ö–∞–∫–∏–µ —Ç–æ–ø-5 –ø—Ä–æ–±–ª–µ–º –ø–æ —á–∞—Å—Ç–æ—Ç–µ?"
- "–ï—Å—Ç—å –ª–∏ —Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å –≤ –¥–∞–Ω–Ω—ã—Ö?"

### –ü—Ä–æ–º–ø—Ç-—à–∞–±–ª–æ–Ω –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

```
–¢—ã –∞–Ω–∞–ª–∏—Ç–∏–∫ –¥–∞–Ω–Ω—ã—Ö. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –æ—Ç–≤–µ—á–∞–π –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã —Ç–æ—á–Ω–æ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ.

–î–∞–Ω–Ω—ã–µ:
{data}

–í–æ–ø—Ä–æ—Å: {user_message}

–û—Ç–≤–µ—Ç (—Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π, —Å —Ü–∏—Ñ—Ä–∞–º–∏ –∏ —Ñ–∞–∫—Ç–∞–º–∏):
```

## –†–∏—Å–∫–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- **–û–±—ä—ë–º –¥–∞–Ω–Ω—ã—Ö:** –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (1000-5000)
- **–ü–∞–º—è—Ç—å:** –±–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã –ø–∞—Ä—Å–∏—Ç—å –ø–æ —á–∞—Å—Ç—è–º
- **–¢–æ—á–Ω–æ—Å—Ç—å:** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∏–∑–∫—É—é temperature (0.3) –¥–ª—è —Ç–æ—á–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –¥–ª—è LLM
- **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –≤ LLM

