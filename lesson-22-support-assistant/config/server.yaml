server:
  port: 8080
  host: "0.0.0.0"

ollama:
  baseUrl: "http://localhost:11434"  # URL Ollama сервера
  model: "nomic-embed-text"          # Модель для эмбеддингов
  timeout: 120000                    # Таймаут в миллисекундах (2 минуты для больших текстов)

knowledgeBase:
  databasePath: "data/knowledge_base.db"  # Путь к базе знаний
  
indexing:
  chunkSize: 300      # Размер чанка в токенах (уменьшено для стабильности Ollama)
  overlapSize: 50     # Перекрытие между чанками в токенах
  documentsPath: "documents"  # Папка с документами для индексации
  projectDocsPath: "../../project/docs"  # Папка с документацией проекта (в корне репозитория)
  projectReadmePath: "../../project/README.md"  # Путь к корневому README проекта (в корне репозитория)
  supportDocsPath: "../../project/docs/support"  # Папка с документацией поддержки (в корне репозитория)
  codeFiles:
    enabled: false    # Включить индексацию кода
    paths: []         # Пути к директориям с кодом (например, ["server/src", "client"])
    extensions: [".kt", ".java", ".js", ".ts", ".py"]  # Расширения файлов для индексации
    excludePatterns: ["**/build/**", "**/node_modules/**", "**/.git/**"]  # Паттерны исключения

ai:
  provider: "openrouter"
  apiKey: "${OPENAI_API_KEY}"  # берётся из .env
  model: "gpt-4o-mini"  # модель для генерации ответов
  temperature: 0.7
  maxTokens: 2000

rag:
  retrieval:
    topK: 5
    minSimilarity: 0.4
  filter:
    enabled: true
    type: "reranker"   # "none" | "threshold" | "reranker" | "hybrid"
    threshold:
      minSimilarity: 0.6
      keepTop: 3
    reranker:
      model: "gpt-4o-mini"
      maxChunks: 6
      systemPrompt: "Ты — reranker. Оцени релевантность каждого чанка вопросу."
  mcp:
    enabled: true        # Включить RAG MCP сервер
    jarPath: "rag-mcp-server/build/libs/rag-mcp-server-1.0.0.jar"  # Путь к JAR файлу (null для запуска через Gradle)

chat:
  history:
    maxMessages: 10      # Максимальное количество сообщений в истории (sliding window)
    maxTokens: 2000       # Максимальное количество токенов для истории диалога
    strategy: "sliding"    # Стратегия оптимизации: "sliding" | "token_limit" | "none"

git:
  mcp:
    enabled: true        # Включить Git MCP сервер
    jarPath: "git-mcp-server/build/libs/git-mcp-server-1.0.0.jar"  # Путь к JAR файлу (null для запуска через Gradle)
    cacheDurationMinutes: 5  # Время жизни кэша для git branch

crm:
  mcp:
    enabled: true        # Включить CRM MCP сервер
    jarPath: "crm-mcp-server/build/libs/crm-mcp-server-1.0.0.jar"  # Путь к JAR файлу (null для запуска через Gradle)

