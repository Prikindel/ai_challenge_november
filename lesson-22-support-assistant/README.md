# üî• –î–µ–Ω—å 22. –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–≤—å—é –∫–æ–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç RAG –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞, —á–µ—Ä–µ–∑ MCP –ø–æ–ª—É—á–∞–µ—Ç diff –∏–∑ PR –∏ –≤—ã–¥–∞—ë—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–µ–≤—å—é —Å –∑–∞–º–µ—á–∞–Ω–∏—è–º–∏, –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º–∏ –±–∞–≥–∞–º–∏ –∏ —Å–æ–≤–µ—Ç–∞–º–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é.

## –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

> üìπ [–í–∏–¥–µ–æ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç—É—Ç](https://disk.yandex.ru/i/vfMx9ZC1QlQBtQ)

**–°—Ü–µ–Ω–∞—Ä–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
1. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –æ—Ç–∫—Ä—ã—Ç–∏–µ UI
2. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ (project/docs/ –∏ project/README.md)
3. –û—Ç–∫—Ä—ã—Ç–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã "–†–µ–≤—å—é –∫–æ–¥–∞"
4. –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ —Ä–µ–≤—å—é: –ø–æ –≤–µ—Ç–∫–∞–º –∏–ª–∏ –ø–æ diff —Ñ–∞–π–ª—É
5. –£–∫–∞–∑–∞–Ω–∏–µ –≤–µ—Ç–æ–∫ (base –∏ head) –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∫–∞ diff —Ñ–∞–π–ª–∞
6. –ó–∞–ø—É—Å–∫ —Ä–µ–≤—å—é –∏ –æ–∂–∏–¥–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
7. –ü—Ä–æ—Å–º–æ—Ç—Ä –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π
8. –ü—Ä–æ—Å–º–æ—Ç—Ä –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –ø–æ —É–ª—É—á—à–µ–Ω–∏—é
9. –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–≤—å—é –≤ JSON, Markdown –∏–ª–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–í —ç—Ç–æ–º —É—Ä–æ–∫–µ –º—ã:
- –ö–æ–ø–∏—Ä—É–µ–º —Å–∏—Å—Ç–µ–º—É –∏–∑ —É—Ä–æ–∫–∞ 20 (RAG, MCP, Git –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
- –†–∞—Å—à–∏—Ä—è–µ–º **Git MCP —Å–µ—Ä–≤–µ—Ä** –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PR:
  - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `get_diff` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ diff –º–µ–∂–¥—É –≤–µ—Ç–∫–∞–º–∏
  - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `get_changed_files` ‚Äî —Å–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
  - –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç `get_file_content` ‚Äî —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
- –°–æ–∑–¥–∞—ë–º **CodeReviewService** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–¥–∞:
  - –ü–æ–ª—É—á–µ–Ω–∏–µ diff —á–µ—Ä–µ–∑ Git MCP
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ç–∏–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ RAG
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–≤—å—é —á–µ—Ä–µ–∑ LLM
  - –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
- –°–æ–∑–¥–∞—ë–º **CodeReviewPromptBuilder** –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ —Ä–µ–≤—å—é
- –†–µ–∞–ª–∏–∑—É–µ–º **API endpoints** –¥–ª—è —Ä–µ–≤—å—é –∫–æ–¥–∞:
  - `POST /api/review/pr` ‚Äî –∑–∞–ø—É—Å–∫ —Ä–µ–≤—å—é PR
  - `GET /api/review/pr/{reviewId}` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
  - `POST /api/review/diff` ‚Äî —Ä–µ–≤—å—é –ø–æ diff —Ñ–∞–π–ª—É
- –°–æ–∑–¥–∞—ë–º **UI –¥–ª—è —Ä–µ–≤—å—é –∫–æ–¥–∞**:
  - –§–æ—Ä–º–∞ –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è –≤–µ—Ç–æ–∫
  - –ó–∞–≥—Ä—É–∑–∫–∞ diff —Ñ–∞–π–ª–∞
  - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π
  - –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–≤—å—é –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
- –î–æ–±–∞–≤–ª—è–µ–º **–∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –∫–æ–¥–∞** –¥–ª—è RAG-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –°–æ–∑–¥–∞—ë–º **GitHub Action** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–≤—å—é –Ω–∞ PR (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üéØ –ü–∞–π–ø–ª–∞–π–Ω —Ä–µ–≤—å—é –∫–æ–¥–∞

```
–ó–∞–ø—Ä–æ—Å –Ω–∞ —Ä–µ–≤—å—é (–≤–µ—Ç–∫–∏ –∏–ª–∏ diff)
  ‚Üì
–ü–æ–ª—É—á–µ–Ω–∏–µ diff —á–µ—Ä–µ–∑ Git MCP (get_diff)
  ‚Üì
–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (get_changed_files)
  ‚Üì
–ë–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑ diff (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Ç–∏–ø—ã —Ñ–∞–π–ª–æ–≤)
  ‚Üì
–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ç–∏–≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ RAG (rag_search_project_docs)
  ‚Üì
–§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ –¥–ª—è —Ä–µ–≤—å—é (CodeReviewPromptBuilder):
  - –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –¥–ª—è code reviewer
  - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ–º–ø—Ç —Å diff, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –∏ RAG-–∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
  ‚Üì
–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ–≤—å—é —á–µ—Ä–µ–∑ LLM (LLMService)
  ‚Üì
–ü–∞—Ä—Å–∏–Ω–≥ JSON –æ—Ç–≤–µ—Ç–∞ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É CodeReview
  ‚Üì
–í–æ–∑–≤—Ä–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞: –ø—Ä–æ–±–ª–µ–º—ã, –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –æ–±—â–∞—è –æ—Ü–µ–Ω–∫–∞
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
lesson-22-support-assistant/
‚îú‚îÄ‚îÄ config/server.yaml
‚îú‚îÄ‚îÄ data/knowledge_base.db    # –±–∞–∑–∞ –∑–Ω–∞–Ω–∏–π + —á–∞—Ç
‚îú‚îÄ‚îÄ documents/                # –î–æ–∫—É–º–µ–Ω—Ç—ã –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ project/                  # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.md           # API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schema.md        # –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ README.md            # –ö–æ—Ä–Ω–µ–≤–æ–π README –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ git-mcp-server/          # MCP —Å–µ—Ä–≤–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å git
‚îÇ   ‚îî‚îÄ‚îÄ src/main/kotlin/com/prike/gitmcpserver/
‚îÇ       ‚îú‚îÄ‚îÄ Main.kt
‚îÇ       ‚îú‚îÄ‚îÄ server/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ GitMCPServer.kt
‚îÇ       ‚îî‚îÄ‚îÄ tools/
‚îÇ           ‚îú‚îÄ‚îÄ GetCurrentBranchTool.kt
‚îÇ           ‚îú‚îÄ‚îÄ GetDiffTool.kt              # –Ω–æ–≤—ã–π: –ø–æ–ª—É—á–µ–Ω–∏–µ diff
‚îÇ           ‚îú‚îÄ‚îÄ GetChangedFilesTool.kt      # –Ω–æ–≤—ã–π: —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤
‚îÇ           ‚îú‚îÄ‚îÄ GetFileContentTool.kt        # –Ω–æ–≤—ã–π: —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
‚îÇ           ‚îî‚îÄ‚îÄ handlers/
‚îÇ               ‚îú‚îÄ‚îÄ GetDiffHandler.kt
‚îÇ               ‚îú‚îÄ‚îÄ GetChangedFilesHandler.kt
‚îÇ               ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ server/
‚îÇ   ‚îî‚îÄ‚îÄ src/main/kotlin/com/prike/
‚îÇ       ‚îú‚îÄ‚îÄ data/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ client/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GitMCPClient.kt
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ RagMCPClient.kt
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ repository/
‚îÇ       ‚îú‚îÄ‚îÄ domain/
‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ model/
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CodeReview.kt            # –Ω–æ–≤—ã–π: –º–æ–¥–µ–ª–∏ —Ä–µ–≤—å—é
‚îÇ       ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ReviewIssue.kt
‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ReviewSuggestion.kt
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ service/
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ CodeReviewService.kt     # –Ω–æ–≤—ã–π: —Å–µ—Ä–≤–∏—Å —Ä–µ–≤—å—é
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ CodeReviewPromptBuilder.kt # –Ω–æ–≤—ã–π: –ø–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å –ø—Ä–æ–º–ø—Ç–æ–≤
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ GitMCPService.kt         # –æ–±–Ω–æ–≤–ª—ë–Ω: getDiff, getChangedFiles
‚îÇ       ‚îÇ       ‚îú‚îÄ‚îÄ RagMCPService.kt
‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ LLMService.kt
‚îÇ       ‚îî‚îÄ‚îÄ presentation/
‚îÇ           ‚îú‚îÄ‚îÄ controller/
‚îÇ           ‚îÇ   ‚îú‚îÄ‚îÄ CodeReviewController.kt   # –Ω–æ–≤—ã–π: API –¥–ª—è —Ä–µ–≤—å—é
‚îÇ           ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ           ‚îî‚îÄ‚îÄ dto/
‚îÇ               ‚îî‚îÄ‚îÄ CodeReviewDtos.kt        # –Ω–æ–≤—ã–π: DTO –¥–ª—è —Ä–µ–≤—å—é
‚îú‚îÄ‚îÄ rag-mcp-server/
‚îÇ   ‚îî‚îÄ‚îÄ src/main/kotlin/com/prike/ragmcpserver/
‚îÇ       ‚îî‚îÄ‚îÄ service/
‚îÇ           ‚îî‚îÄ‚îÄ DocumentIndexer.kt            # –æ–±–Ω–æ–≤–ª—ë–Ω: indexCodeFiles()
‚îî‚îÄ‚îÄ client/                # –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å (Vanilla JS)
    ‚îú‚îÄ‚îÄ code-review.html    # –Ω–æ–≤—ã–π: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–ª—è —Ä–µ–≤—å—é –∫–æ–¥–∞
    ‚îú‚îÄ‚îÄ code-review.js      # –Ω–æ–≤—ã–π: –ª–æ–≥–∏–∫–∞ —Ä–µ–≤—å—é
    ‚îî‚îÄ‚îÄ ...
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Java 17+
- Gradle 8+
- Ollama (–¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤)
- OpenRouter API –∫–ª—é—á (–¥–ª—è LLM)
- Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–µ—Ç–∫–∞–º–∏)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —É—Ä–æ–∫–∞:**
   ```bash
   cd lesson-22-support-assistant
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   cp example.env .env
   # –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ —É–∫–∞–∂–∏—Ç–µ OPENAI_API_KEY
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ Ollama (–¥–ª—è —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤):**
   ```bash
   ollama serve
   ollama pull nomic-embed-text
   ```

4. **–°–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
   ```bash
   cd server
   ./gradlew build
   ./gradlew run
   ```

5. **–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä:**
   ```
   http://localhost:8080
   ```

6. **–ò–Ω–¥–µ–∫—Å–∏—Ä—É–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è"
   - –ù–∞–∂–º–∏—Ç–µ "–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞"

7. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ä–µ–≤—å—é –∫–æ–¥–∞:**
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–†–µ–≤—å—é –∫–æ–¥–∞"
   - –í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–±: –ø–æ –≤–µ—Ç–∫–∞–º –∏–ª–∏ –ø–æ diff —Ñ–∞–π–ª—É
   - –£–∫–∞–∂–∏—Ç–µ –≤–µ—Ç–∫–∏ –∏–ª–∏ –∑–∞–≥—Ä—É–∑–∏—Ç–µ diff
   - –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–µ–≤—å—é"

## üìñ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –†–µ–≤—å—é –ø–æ –≤–µ—Ç–∫–∞–º

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–†–µ–≤—å—é –∫–æ–¥–∞"
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É "–ü–æ –≤–µ—Ç–∫–∞–º"
3. –£–∫–∞–∂–∏—Ç–µ –±–∞–∑–æ–≤—É—é –≤–µ—Ç–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `main`)
4. –£–∫–∞–∂–∏—Ç–µ —Ü–µ–ª–µ–≤—É—é –≤–µ—Ç–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, `feature-branch` –∏–ª–∏ `HEAD`)
5. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–µ–≤—å—é"
6. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (—Å—Ç–∞—Ç—É—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
7. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
   - –†–µ–∑—é–º–µ —Ä–µ–≤—å—é
   - –°–ø–∏—Å–æ–∫ –∏–∑–º–µ–Ω—ë–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
   - –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (—Å —Ü–≤–µ—Ç–æ–≤–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π)
   - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### –†–µ–≤—å—é –ø–æ diff —Ñ–∞–π–ª—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–†–µ–≤—å—é –∫–æ–¥–∞"
2. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É "–ü–æ diff —Ñ–∞–π–ª—É"
3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ diff —Ñ–∞–π–ª –∏–ª–∏ –≤—Å—Ç–∞–≤—å—Ç–µ diff –Ω–∞–ø—Ä—è–º—É—é
4. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –£–∫–∞–∂–∏—Ç–µ –±–∞–∑–æ–≤—É—é –∏ —Ü–µ–ª–µ–≤—É—é –≤–µ—Ç–∫–∏
5. –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å —Ä–µ–≤—å—é –ø–æ diff"
6. –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–≤—å—é

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ä–µ–≤—å—é –¥–æ—Å—Ç—É–ø–Ω—ã –∫–Ω–æ–ø–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞:
- **JSON** ‚Äî –ø–æ–ª–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
- **Markdown** ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç—á—ë—Ç
- **–¢–µ–∫—Å—Ç** ‚Äî –ø—Ä–æ—Å—Ç–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```bash
# –ü–æ–ª—É—á–∏—Ç—å diff –º–µ–∂–¥—É –≤–µ—Ç–∫–∞–º–∏
git diff main..feature-branch > changes.diff

# –ó–∞–≥—Ä—É–∑–∏—Ç—å diff –≤ UI –¥–ª—è —Ä–µ–≤—å—é
# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API –Ω–∞–ø—Ä—è–º—É—é
curl -X POST http://localhost:8080/api/review/diff \
  -H "Content-Type: application/json" \
  -d '{
    "diff": "...",
    "baseBranch": "main",
    "headBranch": "feature-branch",
    "changedFiles": ["file1.kt", "file2.kt"]
  }'
```

## üîß API Endpoints

### POST /api/review/pr

–ó–∞–ø—É—Å–∫–∞–µ—Ç —Ä–µ–≤—å—é PR –º–µ–∂–¥—É –¥–≤—É–º—è –≤–µ—Ç–∫–∞–º–∏.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "base": "main",
  "head": "feature-branch"
}
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "reviewId": "uuid",
  "baseBranch": "main",
  "headBranch": "feature-branch",
  "status": "pending",
  "message": "–†–µ–≤—å—é –∑–∞–ø—É—â–µ–Ω–æ..."
}
```

### GET /api/review/pr/{reviewId}

–ü–æ–ª—É—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–µ–≤—å—é –ø–æ ID.

**–û—Ç–≤–µ—Ç:**
```json
{
  "reviewId": "uuid",
  "baseBranch": "main",
  "headBranch": "feature-branch",
  "changedFiles": ["file1.kt"],
  "issues": [
    {
      "type": "BUG",
      "severity": "high",
      "file": "file1.kt",
      "line": 42,
      "message": "–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —É—Ç–µ—á–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤",
      "suggestion": "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ try-with-resources"
    }
  ],
  "suggestions": [...],
  "summary": "–†–µ–∑—é–º–µ —Ä–µ–≤—å—é",
  "overallScore": "request_changes"
}
```

### POST /api/review/diff

–ó–∞–ø—É—Å–∫–∞–µ—Ç —Ä–µ–≤—å—é –ø–æ diff —Ñ–∞–π–ª—É.

**–ó–∞–ø—Ä–æ—Å:**
```json
{
  "diff": "--- a/file.kt\n+++ b/file.kt\n...",
  "baseBranch": "main",
  "headBranch": "feature-branch",
  "changedFiles": ["file.kt"]
}
```

## üé® –¢–∏–ø—ã –ø—Ä–æ–±–ª–µ–º

- **BUG** ‚Äî –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏ (—É—Ç–µ—á–∫–∏ —Ä–µ—Å—É—Ä—Å–æ–≤, null checks)
- **SECURITY** ‚Äî –ø—Ä–æ–±–ª–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (SQL injection, XSS)
- **PERFORMANCE** ‚Äî –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **STYLE** ‚Äî —Å—Ç–∏–ª—å –∫–æ–¥–∞ (–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ, –¥–ª–∏–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–π)
- **LOGIC** ‚Äî –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
- **DOCUMENTATION** ‚Äî –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

## üö® –°–µ—Ä—å—ë–∑–Ω–æ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º

- **critical** ‚Äî –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (–∫—Ä–∞—Å–Ω—ã–π)
- **high** ‚Äî –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–æ—Ä–∞–Ω–∂–µ–≤—ã–π)
- **medium** ‚Äî —Å—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–∂—ë–ª—Ç—ã–π)
- **low** ‚Äî –Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (—Å–∏–Ω–∏–π)

## üìù –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∫–æ–¥–∞

–í `config/server.yaml` –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –∫–æ–¥–∞:

```yaml
indexing:
  codeFiles:
    enabled: false    # –í–∫–ª—é—á–∏—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –∫–æ–¥–∞
    paths: []         # –ü—É—Ç–∏ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è–º —Å –∫–æ–¥–æ–º
    extensions: [".kt", ".java", ".js", ".ts", ".py"]
    excludePatterns: ["**/build/**", "**/node_modules/**"]
```

## üîó GitHub Action

–°–æ–∑–¥–∞–Ω —É–ø—Ä–æ—â—ë–Ω–Ω—ã–π GitHub Action (`.github/workflows/code-review.yml`) –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–≤—å—é –Ω–∞ PR. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ—Ç–∫–ª—é—á—ë–Ω. –î–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `if: true` –≤ workflow —Ñ–∞–π–ª–µ.

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞ –≤ CI/CD –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–ª–æ–∂–Ω—ã–º. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å UI –¥–ª—è —Ä–µ–≤—å—é –∫–æ–¥–∞.

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- [THEORY.md](./THEORY.md) ‚Äî —Ç–µ–æ—Ä–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —Ä–µ–≤—å—é –∫–æ–¥–∞
- [PROMPT.md](./PROMPT.md) ‚Äî –ø—Ä–æ–º–ø—Ç –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- [CHAT_PROMPT.txt](./CHAT_PROMPT.txt) ‚Äî –ø—Ä–æ–º–ø—Ç –¥–ª—è —á–∞—Ç–∞

## ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –∑–∞—á—ë—Ç–∞

- ‚úÖ GitHub Action –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ PR (–∏–ª–∏ –∫–Ω–æ–ø–∫–∞ –≤ UI –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ä–µ–≤—å—é)
- ‚úÖ –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç diff —á–µ—Ä–µ–∑ MCP
- ‚úÖ –û—Ç–¥–∞—ë—Ç: –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –±–∞–≥–∏, —Å–æ–≤–µ—Ç—ã –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

## üéì –ß—Ç–æ –º—ã –∏–∑—É—á–∏–ª–∏

1. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ MCP —Å–µ—Ä–≤–µ—Ä–æ–≤** ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å git
2. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–µ–≤—å—é –∫–æ–¥–∞** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ LLM –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π
3. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è RAG** ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
4. **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥** ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ JSON –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç LLM
5. **UI –¥–ª—è —Ä–µ–≤—å—é** ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —É–¥–æ–±–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–≤—å—é
6. **–≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** ‚Äî —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–≤—å—é –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö
