lesson:
  promptTokenLimit: 1000
  defaultMaxResponseTokens: 512
  historyLimit: 15
  tokenEncoding: cl100k_base

scenarios:
  - id: short-request
    name: "Короткий запрос"
    description: "Минимальный пример для быстрого подсчёта токенов."
    defaultPrompt: |
      Объясни в нескольких предложениях, что такое токенизация текста и почему она важна для работы моделей.
    temperature: 0.2
    maxResponseTokens: 128

  - id: long-request
    name: "Длинный запрос"
    description: "Большой многошаговый сценарий, который генерирует заметное количество токенов."
    defaultPrompt: |
      Ты выступаешь в роли методолога, проводящего мастер-класс по оптимизации стоимости работы с LLM.
      Подготовь структурированный план занятия из 8 разделов. Для каждого раздела добавь:
        - краткую цель;
        - 2-3 практических упражнения;
        - перечень метрик, которые стоит собирать (включая использование токенов, время отклика, стоимость);
        - возможные риски и способы их смягчения.
      В завершении дай рекомендации по автоматизации мониторинга токенов и по адаптации лимитов под разные команды.
      Ответ должен быть на русском языке и содержать таблицу в текстовом виде.
    temperature: 0.4
    maxResponseTokens: 300

  - id: overflow-request
    name: "Превышение лимита"
    description: "Сценарий специально создаёт вход, который превышает лимит токенов модели."
    defaultPrompt: |
      Ниже приведён длинный фрагмент, который имитирует пользовательский документ и должен вызвать превышение лимита токенов.
      Подробно проанализируй его структуру и выдели ключевые темы.
      ---
      Когда команда планирует масштабирование платформы искусственного интеллекта, важно заранее учитывать тонкости биллинга и архитектуры.
      Этот документ собирает полные расшифровки встреч команды, в которых они обсуждают:
      - стратегию мониторинга расходов по проектам и продуктам;
      - договорённости с подразделениями маркетинга, продаж, операционного отдела и подразделений поддержки клиентов;
      - лучшие практики оптимизации подсказок;
      - способы сокращения количества токенов путём многократной итерации дизайна подсказок;
      - эксперименты по использованию сжатия контекстов, резюмирования и сохранения промежуточных результатов.
      Кроме того, документ содержит выдержки из внутренних стандартов компании, которые описывают:
      - все внутренние API, которые обращаются к LLM;
      - методики безопасного хранения журнала запросов;
      - схемы шифрования данных и уровни доступа для сотрудников разных ролей.
      Ниже перечислены стенограммы длинных обсуждений. Они специально дублируются, чтобы сделать текст очень объёмным и превысить лимит токенов:
      Блок 1. Руководители отделов детально обсуждают бюджеты на будущее полугодие, перечисляя десятки строчек затрат, сравнивая прогнозы, споря о коэффициентах корректировки и приводя длинные аргументы, цитирующие регламенты и письма поставщиков.
      Блок 2. Архитекторы рассматривают миграцию сервисов, описывая по каждому микросервису цепочки вызовов, анализируя графы зависимостей и приводя многостраничные выписки из журналов мониторинга.
      Блок 3. Команда безопасности перечисляет сценарии атак, подробно разбирая сотни шагов злоумышленников, приводя выдержки из политики информационной безопасности и внутренние отчёты по каждому инциденту.
      Блок 4. Продакт-менеджеры анализируют поведение пользователей, перечисляя сегменты, строя гипотезы, описывая результаты десятков A/B-тестов и длинных пользовательских интервью с прямыми цитатами.
      Блок 5. Юридический отдел цитирует нормативные акты разных стран, делают перекрёстные ссылки на договоры, протоколы согласований и комментарии консультантов в длинном формате.
      Блок 6. Специалисты по инфраструктуре перечисляют метрики нагрузки, пошаговые инструкции по развёртыванию, параметры кластеров, версии драйверов и драйверов устройств, а также полные записи инцидентов с таймлайном по минутам.
      Блок 7. Финансовая команда приводит аналитические записки на десятки страниц, декомпозируя каждую статью расходов и прогнозируя сценарии роста, включая описания чувствительности моделей.
      Блок 8. Отдел обучения описывает программы повышения квалификации, учебные планы, содержание каждого занятия, примеры домашних заданий и кейсов, а также отзывы участников в длинном виде.
      Блок 9. Аналитики данных прикладывают SQL-запросы, результаты выгрузок, сводные таблицы и подробные расшифровки визуализаций, каждая из которых описана длинными абзацами.
      Блок 10. Команда DevOps записывает последовательности развёртывания с полными логами команд, описывает ручные действия, возможные откаты и сценарии восстановления, сопровождая всё ссылками на дополнительные документы.
      Блок 11. Подразделение по работе с клиентами приводит список обращений, транскрипты звонков и переписок, полные тексты инструкций для сотрудников и длительные размышления о том, как уменьшить время решения проблем.
      Блок 12. Руководство формулирует стратегические цели, приводя аргументацию на десятках абзацев, обсуждая каждый KPI, риски и зависимости, а также планы по коммуникации с заинтересованными сторонами.
      Эти блоки повторяются последовательно несколько раз, добавляя ещё больше текста:
      Повтор A. Суммарно несколько сотен пунктов обсуждают интеграцию со сторонними платформами, юридические тонкости, тестирование, эксплуатацию и дальнейшее сопровождение.
      Повтор B. Каждая тема детализирована цитатами, ссылками, расписаниями и техническими выкладками, что многократно увеличивает длину входных данных для модели.
      Повтор C. Записаны все альтернативные решения, комментарии внешних консультантов и дополнения, поступившие уже после совещаний, с повтором исходных материалов.
      Повтор D. Для полного эффекта включены исторические справки, внутренние отчёты и переписка, что создаёт ещё десятки абзацев текста.
      Повтор E. Заключительный проход содержит минутные протоколы встреч, так что документ превращается в непрерывный поток текста, требующий значительного числа токенов для обработки.
      Где каждый блок раскрывает следующие темы:
      - анализ показателей за последние 12 месяцев по каждому продукту;
      - выписки из счетов поставщиков облачных сервисов;
      - подробные лог-файлы с миллионами строк;
      - протоколы внутренних аудитов и оценки рисков;
      - сценарии инцидентов с восстановлением после сбоев;
      - переговоры с юридическим отделом по вопросам локализации данных.
      Документ завершается перечнем задач, распределённых по командам, и планом непрерывного улучшения.
      Объём приведённого текста должен значительно превышать лимит в 1000 токенов.
    temperature: 0.2
    maxResponseTokens: 128

