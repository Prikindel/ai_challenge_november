# –ü—Ä–æ–º–ø—Ç –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏: üî• –î–µ–Ω—å 23. –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –∫–æ–º–∞–Ω–¥—ã

–¢—ã ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, —Å–æ–∑–¥–∞—é—â–∏–π —É—Ä–æ–∫ ¬´üî• –î–µ–Ω—å 23. –ê—Å—Å–∏—Å—Ç–µ–Ω—Ç –∫–æ–º–∞–Ω–¥—ã¬ª –≤ –º–æ–¥—É–ª–µ `lesson-23-team-assistant`. –ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—Ç–µ–∫ **Kotlin + Ktor + Clean Architecture + SQLite** —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –Ω–∞ **vanilla JS**. –í –∫–∞—á–µ—Å—Ç–≤–µ –±–∞–∑—ã –º—ã **–∫–æ–ø–∏—Ä—É–µ–º –≤–µ—Å—å –∫–æ–¥ –∏–∑ —É—Ä–æ–∫–∞ 22** –∏ —Ä–∞–∑–≤–∏–≤–∞–µ–º –µ–≥–æ ‚Äî –º–µ–Ω—è–µ–º –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è `lesson-22-support-assistant` –Ω–∞ `lesson-23-team-assistant`, –Ω–µ –ª–æ–º–∞—è —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.

## üéØ –¶–µ–ª—å —É—Ä–æ–∫–∞

–°–æ–∑–¥–∞—Ç—å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –∫–æ–º–∞–Ω–¥—ã, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –≤—Å—ë:

- **RAG: –∑–Ω–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- **MCP: –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏** ‚Äî —Å–æ–∑–¥–∞—ë—Ç –∑–∞–¥–∞—á–∏, –ø–æ–ª—É—á–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞
- **LLM: –¥–∞—ë—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏** ‚Äî –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∑–∞–¥–∞—á–∏ –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

**–ü—Ä–∏–º–µ—Ä:** "–ü–æ–∫–∞–∂–∏ –∑–∞–¥–∞—á–∏ —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º high –∏ –ø—Ä–µ–¥–ª–æ–∂–∏, —á—Ç–æ –¥–µ–ª–∞—Ç—å –ø–µ—Ä–≤—ã–º" ‚Äî –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á–∏, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏—Ö –∏ –¥–∞—ë—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏.

### –ö–ª—é—á–µ–≤–∞—è –∏–¥–µ—è

```
–í–æ–ø—Ä–æ—Å –∫–æ–º–∞–Ω–¥—ã ‚Üí RAG-–ø–æ–∏—Å–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ ‚Üí Task MCP (–∑–∞–¥–∞—á–∏ –∏ —Å—Ç–∞—Ç—É—Å) ‚Üí LLM –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ‚Üí –û—Ç–≤–µ—Ç —Å –∑–∞–¥–∞—á–∞–º–∏, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏
```

–°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞:
- –ü–æ–ª—É—á–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ RAG
- –£–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–¥–∞—á–∞–º–∏ —á–µ—Ä–µ–∑ Task Management MCP
- –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ LLM
- –ü—Ä–µ–¥–ª–∞–≥–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
- –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

---

## üìã –ü–æ—ç—Ç–∞–ø–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è (–æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã)

**–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:**
- –ö–∞–∂–¥—ã–π –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã–π —à–∞–≥ = –æ—Ç–¥–µ–ª—å–Ω—ã–π git-–∫–æ–º–º–∏—Ç.
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ **–°–¢–û–ü**, –ø–æ–∫–∞–∂–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏ –¥–æ–∂–¥–∏—Å—å ¬´–æ–∫, –ø—Ä–æ–¥–æ–ª–∂–∞–π¬ª.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º –¥–µ–ª–∞–µ—Ç merge/commit –¥–∞–ª–µ–µ.

### –ö–æ–º–º–∏—Ç 1: –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ä–æ–∫–∞ 21

**–ó–∞–¥–∞—á–∞:** –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ `lesson-21-code-review/` –≤ `lesson-22-support-assistant/`.

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã (server, client, config, README, THEORY, PROMPT, CHAT_PROMPT, –¥–æ–∫—É–º–µ–Ω—Ç—ã, –¥–∞–Ω–Ω—ã–µ, git-mcp-server, rag-mcp-server, mcp-common).
2. –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–∑–≤–∞–Ω–∏—è:
   - –ü–∞–ø–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞, Gradle settings, package references, –∑–∞–≥–æ–ª–æ–≤–∫–∏, README
   - –í—Å–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è `lesson-21-code-review` ‚Üí `lesson-22-support-assistant`
   - ¬´–î–µ–Ω—å 21¬ª ‚Üí ¬´–î–µ–Ω—å 22¬ª
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø—Ä–æ–µ–∫—Ç —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π.

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è, –ø–æ–∫–∞–∑–∞—Ç—å diff –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

---

### –ö–æ–º–º–∏—Ç 2: –°–æ–∑–¥–∞–Ω–∏–µ CRM MCP —Å–µ—Ä–≤–µ—Ä–∞

**–ó–∞–¥–∞—á–∞:** —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π MCP —Å–µ—Ä–≤–µ—Ä –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ —Ç–∏–∫–µ—Ç–∞–º–∏.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. **–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö** (`crm-mcp-server/src/main/kotlin/com/prike/crmmcpserver/model/`):
   - `User.kt` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (id, email, name, status, subscription, createdAt)
   - `Ticket.kt` ‚Äî —Ç–∏–∫–µ—Ç (id, userId, subject, description, status, priority, messages, createdAt, updatedAt)
   - `TicketMessage.kt` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ç–∏–∫–µ—Ç–µ (id, ticketId, author, content, timestamp)
   - Enums: `UserStatus`, `TicketStatus`, `Priority`

2. **–•—Ä–∞–Ω–∏–ª–∏—â–µ** (`crm-mcp-server/src/main/kotlin/com/prike/crmmcpserver/storage/InMemoryCRMStorage.kt`):
   - In-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ç–∏–∫–µ—Ç–æ–≤
   - –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ (–Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ç–∏–∫–µ—Ç–æ–≤)
   - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Ç–∏–∫–µ—Ç–æ–≤

3. **MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã** (`crm-mcp-server/src/main/kotlin/com/prike/crmmcpserver/tools/`):
   - `GetUserTool` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID –∏–ª–∏ email
   - `GetTicketTool` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞ –ø–æ ID
   - `GetUserTicketsTool` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - `CreateTicketTool` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∏–∫–µ—Ç–∞
   - `AddTicketMessageTool` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ç–∏–∫–µ—Ç

4. **Handlers** (`crm-mcp-server/src/main/kotlin/com/prike/crmmcpserver/tools/handlers/`):
   - `GetUserHandler` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è get_user
   - `GetTicketHandler` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è get_ticket
   - `GetUserTicketsHandler` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è get_user_tickets
   - `CreateTicketHandler` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è create_ticket
   - `AddTicketMessageHandler` ‚Äî –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è add_ticket_message

5. **CRM MCP —Å–µ—Ä–≤–µ—Ä** (`crm-mcp-server/src/main/kotlin/com/prike/crmmcpserver/server/CRMMCPServer.kt`):
   - –ù–∞—Å–ª–µ–¥—É–µ—Ç—Å—è –æ—Ç `BaseMCPServer`
   - –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —á–µ—Ä–µ–∑ `ToolRegistry`
   - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã MCP

6. **Main.kt** (`crm-mcp-server/src/main/kotlin/com/prike/crmmcpserver/Main.kt`):
   - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
   - –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ CRM MCP —Å–µ—Ä–≤–µ—Ä–∞

**–í–∞–∂–Ω–æ:**
- –°–ª–µ–¥–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω—É —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö MCP —Å–µ—Ä–≤–µ—Ä–æ–≤ (git-mcp-server, rag-mcp-server)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `mcp-common` –¥–ª—è –±–∞–∑–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω, —Ç–∏–∫–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω)
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 3: –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è FAQ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**–ó–∞–¥–∞—á–∞:** –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (FAQ, troubleshooting, user guide, auth guide).

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏** (`project/docs/support/`):
   - `faq.md` ‚Äî —á–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã
   - `troubleshooting.md` ‚Äî —Ä–µ—à–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
   - `user-guide.md` ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - `auth-guide.md` ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

2. **–û–±–Ω–æ–≤–∏—Ç—å DocumentIndexer** (`rag-mcp-server/service/DocumentIndexer.kt`):
   - –ú–µ—Ç–æ–¥ `indexSupportDocs(supportDocsPath)` ‚Äî –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π `indexDirectory()`

3. **–ù–æ–≤—ã–π MCP –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç** (`rag-mcp-server/tools/RagIndexSupportDocsTool.kt`):
   - `rag_index_support_docs(supportDocsPath)` ‚Äî –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
   - Handler: `RagIndexSupportDocsHandler`

4. **–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** (`config/server.yaml`):
   ```yaml
   indexing:
     supportDocsPath: "project/docs/support"
   ```

5. **–û–±–Ω–æ–≤–∏—Ç—å Config.kt** (`server/src/main/kotlin/com/prike/config/Config.kt`):
   - –î–æ–±–∞–≤–∏—Ç—å `supportDocsPath` –≤ `IndexingConfig`

6. **–û–±–Ω–æ–≤–∏—Ç—å IndexingController** (`server/src/main/kotlin/com/prike/presentation/controller/IndexingController.kt`):
   - Endpoint `POST /api/indexing/index-support-docs` ‚Äî –∑–∞–ø—É—Å–∫ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**–í–∞–∂–Ω–æ:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –ª–æ–≥–∏–∫—É –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ (–ø—É—Ç—å –Ω–µ –Ω–∞–π–¥–µ–Ω, –æ—à–∏–±–∫–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏)
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 4: SupportService

**–ó–∞–¥–∞—á–∞:** —Å–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–æ–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π CRM –∏ RAG.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. **–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö** (`server/src/main/kotlin/com/prike/domain/model/SupportModels.kt`):
   ```kotlin
   data class SupportRequest(
       val ticketId: String?,
       val userId: String?,
       val question: String
   )
   
   data class SupportContext(
       val user: User?,
       val ticket: Ticket?,
       val userTickets: List<Ticket>
   )
   
   data class SupportResponse(
       val answer: String,
       val sources: List<Source>,
       val suggestions: List<String>,
       val ticketId: String?,
       val shouldCreateTicket: Boolean
   )
   
   data class Source(
       val title: String,
       val content: String,
       val url: String
   )
   ```

2. **CRMMCPClient** (`server/src/main/kotlin/com/prike/data/client/CRMMCPClient.kt`):
   - –ö–ª–∏–µ–Ω—Ç –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ CRM MCP —Å–µ—Ä–≤–µ—Ä—É
   - –ê–Ω–∞–ª–æ–≥–∏—á–µ–Ω `GitMCPClient` –∏ `RagMCPClient`

3. **CRMMCPService** (`server/src/main/kotlin/com/prike/domain/service/CRMMCPService.kt`):
   - `getUser(userId, email)` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - `getTicket(ticketId)` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞
   - `getUserTickets(userId)` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - `createTicket(userId, subject, description)` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞
   - `addTicketMessage(ticketId, author, content)` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è

4. **SupportService** (`server/src/main/kotlin/com/prike/domain/service/SupportService.kt`):
   - `answerQuestion(request)` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–æ–ø—Ä–æ—Å–∞
   - `getSupportContext(userId, ticketId)` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
   - `searchInDocs(question)` ‚Äî –ø–æ–∏—Å–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ RAG
   - `generateAnswer(context, question, ragResults)` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ LLM
   - `generateSuggestions(question, answer)` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

**–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
1. –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ CRM MCP (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω userId)
2. –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç–∏–∫–µ—Ç–∞ —á–µ—Ä–µ–∑ CRM MCP (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω ticketId)
3. –ò—â–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é —á–µ—Ä–µ–∑ RAG
4. –§–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ–º–ø—Ç —Å –≤–æ–ø—Ä–æ—Å–æ–º, –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏ RAG-—Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
5. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ LLM
6. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–≤–µ—Ç–∞
7. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω—É–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç–∏–∫–µ—Ç

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 5: –ü—Ä–æ–º–ø—Ç –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**–ó–∞–¥–∞—á–∞:** —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. **SupportPromptBuilder** (`server/src/main/kotlin/com/prike/domain/service/SupportPromptBuilder.kt`):
   - `buildSupportPrompt(context, question, ragResults)` ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏
   - `buildSystemPrompt(context)` ‚Äî —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Å —Ä–æ–ª—å—é support agent
   - `buildUserPrompt(context, question, ragResults)` ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ–º–ø—Ç

2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–º–ø—Ç–∞:**
   - –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç: —Ä–æ–ª—å support agent, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, —É—á—ë—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Ç–∏–∫–µ—Ç–∞
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ–º–ø—Ç: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ, –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç–∏–∫–µ—Ç–∞, –≤–æ–ø—Ä–æ—Å, RAG-–∫–æ–Ω—Ç–µ–∫—Å—Ç

3. **–û–±–Ω–æ–≤–∏—Ç—å SupportService**:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `SupportPromptBuilder` –≤–º–µ—Å—Ç–æ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –º–µ—Ç–æ–¥–æ–≤
   - –£–¥–∞–ª–∏—Ç—å –º–µ—Ç–æ–¥—ã –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ –∏–∑ —Å–µ—Ä–≤–∏—Å–∞

**–í–∞–∂–Ω–æ:**
- –£—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (—Å—Ç–∞—Ç—É—Å, –ø–æ–¥–ø–∏—Å–∫–∞)
- –£—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç–∏–∫–µ—Ç–∞ (–∏—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å RAG-–∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –æ—Ç–≤–µ—Ç–æ–≤
- –¢—Ä–µ–±–æ–≤–∞—Ç—å JSON —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ –æ—Ç LLM

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 6: API –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**–ó–∞–¥–∞—á–∞:** —Å–æ–∑–¥–∞—Ç—å HTTP API endpoints –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–∏–∫–µ—Ç–∞–º–∏.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. **DTO** (`server/src/main/kotlin/com/prike/presentation/dto/SupportDtos.kt`):
   - `SupportQuestionRequest` ‚Äî –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤–æ–ø—Ä–æ—Å
   - `SupportQuestionResponse` ‚Äî –æ—Ç–≤–µ—Ç —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º
   - `SourceDto` ‚Äî DTO –¥–ª—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞
   - `CreateTicketRequest` ‚Äî –∑–∞–ø—Ä–æ—Å –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞
   - `TicketDto`, `TicketMessageDto`, `TicketWithMessagesDto` ‚Äî DTO –¥–ª—è —Ç–∏–∫–µ—Ç–æ–≤
   - `TicketsListResponse` ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ç–æ–≤
   - `AddTicketMessageRequest` ‚Äî –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è

2. **SupportController** (`server/src/main/kotlin/com/prike/presentation/controller/SupportController.kt`):
   - `POST /api/support/ask` ‚Äî –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –ø–æ–¥–¥–µ—Ä–∂–∫–µ
   - `GET /api/support/ticket/{ticketId}` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–∏–∫–µ—Ç–µ
   - `GET /api/support/user/{userId}/tickets` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Ç–∏–∫–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - `POST /api/support/ticket` ‚Äî —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–∏–∫–µ—Ç
   - `POST /api/support/ticket/{ticketId}/message` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —Ç–∏–∫–µ—Ç

3. **–û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** (`config/server.yaml`):
   ```yaml
   crm:
     mcp:
       enabled: true
       jarPath: "crm-mcp-server/build/libs/crm-mcp-server-1.0.0.jar"
   ```

4. **–û–±–Ω–æ–≤–∏—Ç—å Config.kt** (`server/src/main/kotlin/com/prike/config/Config.kt`):
   - –î–æ–±–∞–≤–∏—Ç—å `CRMMCPConfig` –∏ `CrmConfig`
   - –ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ CRM –∏–∑ `server.yaml`

5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Main.kt**:
   - –°–æ–∑–¥–∞—Ç—å `CRMMCPService` —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ CRM MCP —Å–µ—Ä–≤–µ—Ä—É
   - –°–æ–∑–¥–∞—Ç—å `SupportService` —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å `SupportController`
   - –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç—ã –≤ routing

**–í–∞–∂–Ω–æ:**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 7: UI –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**–ó–∞–¥–∞—á–∞:** —Å–æ–∑–¥–∞—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. **support.html**:
   - –§–æ—Ä–º–∞ –¥–ª—è –≤–≤–æ–¥–∞ –≤–æ–ø—Ä–æ—Å–∞
   - –ü–æ–ª—è: Ticket ID (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ), User ID (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ), Question
   - –ö–Ω–æ–ø–∫–∞ "–û—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–æ–ø—Ä–æ—Å"
   - –û–±–ª–∞—Å—Ç—å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞
   - –û–±–ª–∞—Å—Ç—å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
   - –û–±–ª–∞—Å—Ç—å –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
   - –û–±–ª–∞—Å—Ç—å –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏ —Ç–∏–∫–µ—Ç–∞ (–µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω Ticket ID)
   - –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å –≤–∫–ª–∞–¥–∫–æ–π "–ü–æ–¥–¥–µ—Ä–∂–∫–∞"

2. **support.js**:
   - `handleQuestionSubmit()` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–æ–ø—Ä–æ—Å–∞
   - `displayAnswer(response)` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–∞
   - `displaySources(sources)` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
   - `displaySuggestions(suggestions)` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
   - `loadTicketHistory(ticketId)` ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Ç–∏–∫–µ—Ç–∞
   - `displayTicketHistory(ticket)` ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Ç–∏–∫–µ—Ç–∞

3. **–û–±–Ω–æ–≤–∏—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é** (–≤—Å–µ HTML —Ñ–∞–π–ª—ã –≤ `client/`):
   - –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ `support.html` –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é

**–í–∞–∂–Ω–æ:**
- –ò–Ω–¥–∏–∫–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –£–¥–æ–±–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 8: –£–ª—É—á—à–µ–Ω–∏–µ UI –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

**–ó–∞–¥–∞—á–∞:** —É–ª—É—á—à–∏—Ç—å UI –∏ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞–º–∏**:
   - –°–µ–∫—Ü–∏—è "–ú–æ–∏ —Ç–∏–∫–µ—Ç—ã" ‚Äî —Å–ø–∏—Å–æ–∫ —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É
   - –ü–æ–∏—Å–∫ –ø–æ —Ç–µ–º–µ
   - –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ —Ç–∏–∫–µ—Ç–∞ –ø–æ –∫–ª–∏–∫—É

2. **–°–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞**:
   - –°–µ–∫—Ü–∏—è "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–∏–∫–µ—Ç"
   - –§–æ—Ä–º–∞: User ID, Subject, Description
   - –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å —Ç–∏–∫–µ—Ç"
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ Ticket ID –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è

3. **–≠–∫—Å–ø–æ—Ä—Ç –¥–∏–∞–ª–æ–≥–∞**:
   - –ö–Ω–æ–ø–∫–∞ "–≠–∫—Å–ø–æ—Ä—Ç –¥–∏–∞–ª–æ–≥–∞" (–µ—Å–ª–∏ –µ—Å—Ç—å –∏—Å—Ç–æ—Ä–∏—è —Ç–∏–∫–µ—Ç–∞)
   - –§–æ—Ä–º–∞—Ç—ã: JSON, –¢–µ–∫—Å—Ç
   - –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞

4. **–ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤**:
   - –°–µ–∫—Ü–∏—è "–ü—Ä–∏–º–µ—Ä—ã –≤–æ–ø—Ä–æ—Å–æ–≤"
   - –ö–Ω–æ–ø–∫–∏ —Å –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ –≤–æ–ø—Ä–æ—Å–∞–º–∏
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª—è –≤–æ–ø—Ä–æ—Å–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ

**–û–±–Ω–æ–≤–∏—Ç—å support.html –∏ support.js:**
- –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Å–µ–∫—Ü–∏–∏ –∏ —Ñ—É–Ω–∫—Ü–∏–∏
- –£–ª—É—á—à–∏—Ç—å —Å—Ç–∏–ª–∏ –∏ UX

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

---

### –ö–æ–º–º–∏—Ç 9: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –≤—ã–≤–æ–¥—ã

**–ó–∞–¥–∞—á–∞:** –æ–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –≤—ã–≤–æ–¥—ã.

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –û–±–Ω–æ–≤–∏—Ç—å `README.md`:
   - –û–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–∞ 22
   - –ü–∞–π–ø–ª–∞–π–Ω –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –Ω–æ–≤—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
   - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é
   - –ü—Ä–∏–º–µ—Ä—ã API endpoints

2. –û–±–Ω–æ–≤–∏—Ç—å `THEORY.md`:
   - –¢–µ–æ—Ä–∏—è –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAG –¥–ª—è –ø–æ–∏—Å–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM —á–µ—Ä–µ–∑ MCP
   - –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ç–∏–∫–µ—Ç–∞ –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è

3. –û–±–Ω–æ–≤–∏—Ç—å `PROMPT.md`:
   - –ü—Ä–æ–º–ø—Ç –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —É—Ä–æ–∫–∞ 22
   - –ü–æ—ç—Ç–∞–ø–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è
   - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

4. –û–±–Ω–æ–≤–∏—Ç—å `CHAT_PROMPT.txt`:
   - –ö—Ä–∞—Ç–∫–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–æ–º–ø—Ç–∞

5. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ—Ä–Ω–µ–≤–æ–π `README.md`:
   - –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ —É—Ä–æ–∫ 22 (—É–∂–µ –µ—Å—Ç—å, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å)

**–ü–æ—Å–ª–µ –∫–æ–º–º–∏—Ç–∞:** –ø–æ–∫–∞–∑–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

---

## üß† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CRM —á–µ—Ä–µ–∑ MCP

**–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã CRM MCP:**
- `get_user(userId, email)` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `get_ticket(ticketId)` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞
- `get_user_tickets(userId)` ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `create_ticket(userId, subject, description)` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞
- `add_ticket_message(ticketId, author, content)` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```kotlin
val user = crmMCPService.getUser(userId = "user-123")
val ticket = crmMCPService.getTicket("ticket-456")
val userTickets = crmMCPService.getUserTickets("user-123")
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAG –¥–ª—è –ø–æ–∏—Å–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤

**–ó–∞–ø—Ä–æ—Å –∫ RAG:**
```kotlin
val ragResults = ragMCPService.callTool("rag_search_project_docs", JsonObject {
    put("query", question)
    put("topK", 5)
    put("filterPath", "project/docs/support")
})
```

**–ß—Ç–æ –∏—â–µ—Ç—Å—è:**
- FAQ ‚Äî —á–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã
- Troubleshooting ‚Äî —Ä–µ—à–µ–Ω–∏–µ —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º
- User Guide ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- Auth Guide ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ —á–µ—Ä–µ–∑ LLM

**–ü—Ä–æ–º–ø—Ç:**
1. –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç: —Ä–æ–ª—å support agent, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏, —É—á—ë—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
2. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ–º–ø—Ç: –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ, –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç–∏–∫–µ—Ç–∞, –≤–æ–ø—Ä–æ—Å, RAG-–∫–æ–Ω—Ç–µ–∫—Å—Ç

**–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "answer": "–û—Ç–≤–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
  "sources": [
    {
      "title": "FAQ - –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è",
      "content": "–†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç",
      "url": "/docs/support/faq.md"
    }
  ],
  "suggestions": [
    "–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å",
    "–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à –±—Ä–∞—É–∑–µ—Ä–∞"
  ]
}
```

### –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ç–∏–∫–µ—Ç–∞

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
- –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Ç–∏–∫–µ—Ç–∞ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –ø—Ä–æ–º–ø—Ç
- LLM —É—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –æ—Ç–≤–µ—Ç—ã
- –ù–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç —É–∂–µ –¥–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
- –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è

**–£—á—ë—Ç —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
- ACTIVE ‚Äî –æ–±—ã—á–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- SUSPENDED ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- DELETED ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø

**–£—á—ë—Ç –ø–æ–¥–ø–∏—Å–∫–∏:**
- Premium ‚Äî –¥–æ—Å—Ç—É–ø –∫ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º
- –ë–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏ ‚Äî –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è

---

## üìä –ü—Ä–∏–º–µ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è

1. **–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å:**
   ```
   POST /api/support/ask
   {
     "ticketId": "ticket-123",
     "userId": "user-456",
     "question": "–ü–æ—á–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è?"
   }
   ```

2. **–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞:**
   - CRM MCP: get_user("user-456")
   - CRM MCP: get_ticket("ticket-123")
   - RAG: –ø–æ–∏—Å–∫ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏

3. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞:**
   ```
   {
     "answer": "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å email –∏ –ø–∞—Ä–æ–ª—è...",
     "sources": [...],
     "suggestions": ["–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–∞—Ä–æ–ª—å", "–û—á–∏—Å—Ç–∏—Ç—å –∫—ç—à"],
     "ticketId": "ticket-123",
     "shouldCreateTicket": false
   }
   ```

---

## üéì –¶–µ–ª–∏ —É—Ä–æ–∫–∞

- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CRM MCP –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å RAG –¥–ª—è –ø–æ–∏—Å–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã —á–µ—Ä–µ–∑ LLM
- –£—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ç–∏–∫–µ—Ç–∞ –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –æ—Ç–≤–µ—Ç–∞
- –°–æ–∑–¥–∞—Ç—å UI –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
- –£–ø—Ä–∞–≤–ª—è—Ç—å —Ç–∏–∫–µ—Ç–∞–º–∏ (—Å–æ–∑–¥–∞–Ω–∏–µ, –ø—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏)
- –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–í–∏–¥–µ–æ + –ö–æ–¥)

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `PROMPT.md` ‚Äî —Ç–µ–∫—É—â–µ–µ –¢–ó (—ç—Ç–æ—Ç —Ñ–∞–π–ª).
- `THEORY.md` ‚Äî —Ç–µ–æ—Ä–∏—è –ø—Ä–æ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.
- `README.md` ‚Äî —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∑–∞–ø—É—Å–∫—É –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —É—Ä–æ–∫–∞.
- `CHAT_PROMPT.txt` ‚Äî –∫—Ä–∞—Ç–∫–∞—è –≤–µ—Ä—Å–∏—è –¢–ó –¥–ª—è –∞–≥–µ–Ω—Ç–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.
